(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[425],{24654:function(){},37440:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var n=r(44839),a=r(96164);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}},84980:function(e,t,r){"use strict";r.d(t,{Uqw:function(){return O},lN0:function(){return V},L4N:function(){return ep},THV:function(){return ec},p5N:function(){return x},B1y:function(){return K},De1:function(){return ey},EnB:function(){return _},nzy:function(){return S},gFH:function(){return m},RoB:function(){return em},Arm:function(){return es},iEE:function(){return N},_Jg:function(){return ev},fKu:function(){return A},vT9:function(){return M},Zxv:function(){return E},NmN:function(){return X},WUh:function(){return G},UIb:function(){return T},bsA:function(){return Z},TuY:function(){return j},K$j:function(){return er},mzN:function(){return eo},uBv:function(){return ee},RM4:function(){return ea},z2o:function(){return v},NWG:function(){return y},KRD:function(){return w},iqb:function(){return k}});var n=r(40932),a=r(25524);function i(e){return{fetcherOptions:{},queryOptions:{},queryKeyFn:o}}let o=e=>{let t=c(e)?e.path.split("/").filter(Boolean).map(t=>u(t,e.variables.pathParams)):e.path.split("/").filter(Boolean);return s(e)&&t.push(e.variables.queryParams),d(e)&&t.push(e.variables.body),t},u=(e,t)=>e.startsWith("{")&&e.endsWith("}")?t[e.slice(1,-1)]:e,c=e=>!!e.variables.pathParams,d=e=>!!e.variables.body,s=e=>!!e.variables.queryParams;async function l(e){let{url:t,method:r,body:n,headers:a,pathParams:i,queryParams:o,signal:u}=e;try{var c;let e={"Content-Type":"application/json",...a};e["Content-Type"].toLowerCase().includes("multipart/form-data")&&delete e["Content-Type"];let d=await window.fetch("".concat("https://hyperion-3.dev.eclair.ec-lyon.fr").concat(p(t,o,i)),{signal:u,method:r.toUpperCase(),body:n?n instanceof FormData?n:JSON.stringify(n):void 0,headers:e});if(!d.ok){let e;try{e=await d.json()}catch(t){e={status:"unknown",payload:t instanceof Error?"Unexpected error (".concat(t.message,")"):"Unexpected error"}}throw e}if(null===(c=d.headers.get("content-type"))||void 0===c?void 0:c.includes("json"))return await d.json();return await d.blob()}catch(e){throw{name:"unknown",message:e instanceof Error?"Network error (".concat(e.message,")"):"Network error",stack:e}}}let p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new URLSearchParams(t).toString();return n&&(n="?".concat(n)),e.replace(/\{\w*\}/g,e=>r[e.slice(1,-1)])+n},f=(e,t)=>l({url:"/users/me",method:"get",...e,signal:t}),m=(e,t)=>{let{fetcherOptions:r,queryOptions:a,queryKeyFn:o}=i(t);return n.a({queryKey:o({path:"/users/me",operationId:"getUsersMe",variables:e}),queryFn:t=>{let{signal:n}=t;return f({...r,...e},n)},...t,...a})},h=(e,t)=>l({url:"/users/create",method:"post",...e,signal:t}),y=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>h({...t,...e}),...e})},g=(e,t)=>l({url:"/users/activate",method:"post",...e,signal:t}),v=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>g({...t,...e}),...e})},b=(e,t)=>l({url:"/users/recover",method:"post",...e,signal:t}),w=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>b({...t,...e}),...e})},I=(e,t)=>l({url:"/users/reset-password",method:"post",...e,signal:t}),k=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>I({...t,...e}),...e})},F=(e,t)=>l({url:"/raid/participants/{participantId}",method:"get",...e,signal:t}),x=(e,t)=>{let{fetcherOptions:r,queryOptions:a,queryKeyFn:o}=i(t);return n.a({queryKey:o({path:"/raid/participants/{participantId}",operationId:"getRaidParticipantsParticipantId",variables:e}),queryFn:t=>{let{signal:n}=t;return F({...r,...e},n)},...t,...a})},D=(e,t)=>l({url:"/raid/participants/{participantId}",method:"patch",...e,signal:t}),N=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>D({...t,...e}),...e})},q=(e,t)=>l({url:"/raid/participants",method:"post",...e,signal:t}),T=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>q({...t,...e}),...e})},R=(e,t)=>l({url:"/raid/teams",method:"get",...e,signal:t}),_=(e,t)=>{let{fetcherOptions:r,queryOptions:a,queryKeyFn:o}=i(t);return n.a({queryKey:o({path:"/raid/teams",operationId:"getRaidTeams",variables:e}),queryFn:t=>{let{signal:n}=t;return R({...r,...e},n)},...t,...a})},C=(e,t)=>l({url:"/raid/teams",method:"post",...e,signal:t}),j=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>C({...t,...e}),...e})},U=(e,t)=>l({url:"/raid/participants/{participantId}/team",method:"get",...e,signal:t}),K=(e,t)=>{let{fetcherOptions:r,queryOptions:a,queryKeyFn:o}=i(t);return n.a({queryKey:o({path:"/raid/participants/{participantId}/team",operationId:"getRaidParticipantsParticipantIdTeam",variables:e}),queryFn:t=>{let{signal:n}=t;return U({...r,...e},n)},...t,...a})},P=(e,t)=>l({url:"/raid/teams/{teamId}",method:"get",...e,signal:t}),S=(e,t)=>{let{fetcherOptions:r,queryOptions:a,queryKeyFn:o}=i(t);return n.a({queryKey:o({path:"/raid/teams/{teamId}",operationId:"getRaidTeamsTeamId",variables:e}),queryFn:t=>{let{signal:n}=t;return P({...r,...e},n)},...t,...a})},W=(e,t)=>l({url:"/raid/teams/{teamId}",method:"patch",...e,signal:t}),A=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>W({...t,...e}),...e})},J=(e,t)=>l({url:"/raid/teams/{teamId}",method:"delete",...e,signal:t}),O=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>J({...t,...e}),...e})},z=(e,t)=>l({url:"/raid/participant/{participantId}/document",method:"post",...e,signal:t}),E=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>z({...t,...e}),...e})},L=(e,t)=>l({url:"/raid/document/{documentId}",method:"get",...e,signal:t}),V=(e,t)=>{let{fetcherOptions:r,queryOptions:a,queryKeyFn:o}=i(t);return n.a({queryKey:o({path:"/raid/document/{documentId}",operationId:"getRaidDocumentDocumentId",variables:e}),queryFn:t=>{let{signal:n}=t;return L({...r,...e},n)},...t,...a})},B=(e,t)=>l({url:"/raid/document/{documentId}/validate",method:"post",...e,signal:t}),M=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>B({...t,...e}),...e})},H=(e,t)=>l({url:"/raid/security_file/",method:"post",...e,signal:t}),Z=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>H({...t,...e}),...e})},Y=(e,t)=>l({url:"/raid/participant/{participantId}/security_file",method:"post",...e,signal:t}),G=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>Y({...t,...e}),...e})},Q=(e,t)=>l({url:"/raid/participant/{participantId}/payment",method:"post",...e,signal:t}),X=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>Q({...t,...e}),...e})},$=(e,t)=>l({url:"/raid/teams/{teamId}/invite",method:"post",...e,signal:t}),ee=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>$({...t,...e}),...e})},et=(e,t)=>l({url:"/raid/teams/join/{token}",method:"post",...e,signal:t}),er=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>et({...t,...e}),...e})},en=(e,t)=>l({url:"/raid/teams/{teamId}/kick/{participantId}",method:"post",...e,signal:t}),ea=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>en({...t,...e}),...e})},ei=(e,t)=>l({url:"/raid/teams/merge",method:"post",...e,signal:t}),eo=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>ei({...t,...e}),...e})},eu=(e,t)=>l({url:"/raid/information",method:"get",...e,signal:t}),ec=(e,t)=>{let{fetcherOptions:r,queryOptions:a,queryKeyFn:o}=i(t);return n.a({queryKey:o({path:"/raid/information",operationId:"getRaidInformation",variables:e}),queryFn:t=>{let{signal:n}=t;return eu({...r,...e},n)},...t,...a})},ed=(e,t)=>l({url:"/raid/information",method:"patch",...e,signal:t}),es=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>ed({...t,...e}),...e})},el=(e,t)=>l({url:"/raid/drive",method:"get",...e,signal:t}),ep=(e,t)=>{let{fetcherOptions:r,queryOptions:a,queryKeyFn:o}=i(t);return n.a({queryKey:o({path:"/raid/drive",operationId:"getRaidDrive",variables:e}),queryFn:t=>{let{signal:n}=t;return el({...r,...e},n)},...t,...a})},ef=(e,t)=>l({url:"/raid/drive",method:"patch",...e,signal:t}),em=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>ef({...t,...e}),...e})},eh=(e,t)=>l({url:"/raid/price",method:"get",...e,signal:t}),ey=(e,t)=>{let{fetcherOptions:r,queryOptions:a,queryKeyFn:o}=i(t);return n.a({queryKey:o({path:"/raid/price",operationId:"getRaidPrice",variables:e}),queryFn:t=>{let{signal:n}=t;return eh({...r,...e},n)},...t,...a})},eg=(e,t)=>l({url:"/raid/price",method:"patch",...e,signal:t}),ev=e=>{let{fetcherOptions:t}=i();return a.D({mutationFn:e=>eg({...t,...e}),...e})}},89733:function(e,t,r){"use strict";r.d(t,{d:function(){return c},z:function(){return d}});var n=r(57437),a=r(2265),i=r(71538),o=r(12218),u=r(37440);let c=(0,o.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-red-700 text-destructive-foreground hover:bg-red-700/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:r,variant:a,size:o,asChild:d=!1,...s}=e,l=d?i.g7:"button";return(0,n.jsx)(l,{className:(0,u.cn)(c({variant:a,size:o,className:r})),ref:t,...s})});d.displayName="Button"},48185:function(e,t,r){"use strict";r.d(t,{Ol:function(){return u},SZ:function(){return d},Zb:function(){return o},aY:function(){return s},eW:function(){return l},ll:function(){return c}});var n=r(57437),a=r(2265),i=r(37440);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});o.displayName="Card";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...a})});u.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...a})});d.displayName="CardDescription";let s=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...a})});s.displayName="CardContent";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...a})});l.displayName="CardFooter"},40133:function(e,t,r){"use strict";r.d(t,{a:function(){return b}});var n=r(2265),a=r(42126),i=r(97334),o=r(39099),u=r(89291);let c=(0,o.Ue)()((0,u.mW)((0,u.tJ)(e=>({token:null,refreshToken:null,userId:null,setToken:t=>{let r=t?JSON.parse(atob(t.split(".")[1])).sub:null;e({token:t,userId:r})},setRefreshToken:t=>{e({refreshToken:t})}}),{name:"token-storage"})));var d=r(16463),s=r(64773),l=r(84475),p=r(40832),f=r(40932),m=r(45099);let h="RaidRegistering",y="https://raid-registering.myecl.fr/login",g="https://hyperion-3.dev.eclair.ec-lyon.fr",v=["API"],b=()=>{let e=(0,d.usePathname)(),[t,r]=(0,n.useState)(!1),{token:o,setToken:u,refreshToken:b,setRefreshToken:w,userId:I}=c(),{resetUser:k}=(0,s.L)(),{resetParticipant:F}=(0,l.p)(),{resetInviteToken:x}=(0,p.u)(),[D,N]=(0,n.useState)(!1),q=(0,d.useRouter)(),{codeVerifier:T,setCodeVerifier:R,resetCodeVerifier:_}=(0,m.f)(),C=(0,n.useRef)(null);async function j(e){let t=new TextEncoder().encode(e);return await crypto.subtle.digest("SHA-256",t).then(e=>btoa(Array.from(new Uint8Array(e)).map(e=>String.fromCharCode(e)).join("")).replace(/\+/g,"-").replace(/\//g,"_"))}async function U(e){r(!0);let t=(0,i.stringify)(e);try{let e=await a.Z.post("".concat(g,"/auth/token"),t,{headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}});if(200!=e.status){r(!1);return}let n=e.data;r(!1),u(n.access_token),w(n.refresh_token)}catch(e){r(!1),P()&&A()}}async function K(){return t?null:(r(!0),b)?(await U({grant_type:"refresh_token",client_id:h,refresh_token:b}),b):null}function P(){return!!o&&(o?JSON.parse(atob(o.split(".")[1])).exp:0)<Math.floor(Date.now()/1e3)-60}async function S(e,r){T&&!t&&(await U({grant_type:"authorization_code",client_id:h,code:e,redirect_uri:y,code_verifier:T}),N(!0),r&&r(),_())}async function W(){r(!0);let e=function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length,a=crypto.getRandomValues(new Uint8Array(128)),i=0;i<128;i++)t+=r.charAt(Math.floor(a[i]/128*n));return t}(128);R(e);let t="".concat(g,"/auth/authorize?client_id=").concat(h,"&response_type=code&scope=").concat(v.join(" "),"&redirect_uri=").concat(y,"&code_challenge=").concat(await j(e),"&code_challenge_method=S256");window.location.href=t}function A(){u(null),w(null),N(!1),q.replace("/login"),k(),F(),x()}async function J(){return t?null:(r(!0),null!==o?N(!0):["/login","/recover","/register"].includes(null!=e?e:"")||q.replace("/login"),r(!1),o)}return(0,f.a)({queryKey:["lookToRefreshToken"],queryFn:()=>(function(){if(C.current&&clearTimeout(C.current),null===o)return null;let e=(o?JSON.parse(atob(o.split(".")[1])).exp:0)*1e3-Date.now()-6e4;return e<=0?K():C.current=setTimeout(()=>{K(),C.current=null},e),o})(),retry:0,enabled:D,refetchOnMount:!1}),(0,f.a)({queryKey:["getTokenFromStorage"],queryFn:()=>J(),retry:0,enabled:!D,refetchOnMount:!1}),{getTokenFromRequest:W,isLoading:t,token:o,isTokenQueried:D,logout:A,userId:I,isTokenExpired:P,login:S}}},45099:function(e,t,r){"use strict";r.d(t,{f:function(){return i}});var n=r(39099),a=r(89291);let i=(0,n.Ue)()((0,a.mW)((0,a.tJ)(e=>({codeVerifier:void 0,setCodeVerifier:t=>{e({codeVerifier:t,isLoading:!0})},resetCodeVerifier:()=>{e({codeVerifier:void 0,isLoading:!1})},isLoading:!1}),{name:"raid-code-verifier-storage"})))},40832:function(e,t,r){"use strict";r.d(t,{u:function(){return i}});var n=r(39099),a=r(89291);let i=(0,n.Ue)()((0,a.mW)((0,a.tJ)(e=>({InviteToken:void 0,setInviteToken:t=>{e({inviteToken:t})},resetInviteToken:()=>{e({inviteToken:void 0})}}),{name:"raid-invite-token-storage"})))},84475:function(e,t,r){"use strict";r.d(t,{p:function(){return i}});var n=r(39099),a=r(89291);let i=(0,n.Ue)()((0,a.mW)((0,a.tJ)(e=>({participant:void 0,setParticipant:t=>{e({participant:t})},resetParticipant:()=>{e({participant:void 0})}}),{name:"raid-participant-storage"})))},64773:function(e,t,r){"use strict";r.d(t,{L:function(){return i}});var n=r(39099),a=r(89291);let i=(0,n.Ue)()((0,a.mW)((0,a.tJ)(e=>({user:void 0,setUser:t=>{e({user:t})},resetUser:()=>{e({user:void 0})}}),{name:"raid-user-storage"})))}}]);