(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{88790:function(e,a,s){Promise.resolve().then(s.bind(s,52089))},52089:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return ec}});var l=s(57437),t=s(15671),n=s(2265),i=s(81006),r=s(63280),c=s(62177),d=s(575),o=s(22782),u=s(1657),m=s(82012),x=s(51014);let h=n.forwardRef((e,a)=>{let{className:s,orientation:t="horizontal",decorative:n=!0,...i}=e;return(0,l.jsx)(x.f,{ref:a,decorative:n,orientation:t,className:(0,u.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",s),...i})});h.displayName=x.f.displayName;var j=s(33277),f=s(26739);function g(e){let{column:a,title:s,options:t}=e,n=null==a?void 0:a.getFacetedUniqueValues(),i=new Set(null==a?void 0:a.getFilterValue());return(0,l.jsxs)(m.J2,{children:[(0,l.jsx)(m.xo,{asChild:!0,children:(0,l.jsxs)(d.z,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[(0,l.jsx)(c.SPS,{className:"mr-2 h-4 w-4"}),s,(null==i?void 0:i.size)>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h,{orientation:"vertical",className:"mx-2 h-4"}),(0,l.jsx)(j.C,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:i.size}),(0,l.jsx)("div",{className:"hidden space-x-1 lg:flex",children:i.size>2?(0,l.jsxs)(j.C,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[i.size," selected"]}):t.filter(e=>i.has(e.value)).map(e=>(0,l.jsx)(j.C,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:e.label},e.value))})]})]})}),(0,l.jsx)(m.yk,{className:"w-[200px] p-0",align:"start",children:(0,l.jsxs)(f.mY,{children:[(0,l.jsx)(f.sZ,{placeholder:s}),(0,l.jsxs)(f.e8,{children:[(0,l.jsx)(f.rb,{children:"No results found."}),(0,l.jsx)(f.fu,{children:t.map(e=>{let s=i.has(e.value);return(0,l.jsxs)(f.di,{onSelect:()=>{s?i.delete(e.value):i.add(e.value);let l=Array.from(i);null==a||a.setFilterValue(l.length?l:void 0)},children:[(0,l.jsx)("div",{className:(0,u.cn)("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",s?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:(0,l.jsx)(c.nQG,{className:(0,u.cn)("h-4 w-4")})}),e.icon&&(0,l.jsx)(e.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,l.jsx)("span",{children:e.label}),(null==n?void 0:n.get(e.value))&&(0,l.jsx)("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:n.get(e.value)})]},e.value)})}),i.size>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(f.zz,{}),(0,l.jsx)(f.fu,{children:(0,l.jsx)(f.di,{onSelect:()=>null==a?void 0:a.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}var p=s(81100),v=s(34645);function N(e){let{table:a}=e;return(0,l.jsxs)(v.h_,{children:[(0,l.jsx)(p.$F,{asChild:!0,children:(0,l.jsxs)(d.z,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[(0,l.jsx)(c.hsZ,{className:"mr-2 h-4 w-4"}),"Colonnes"]})}),(0,l.jsxs)(v.AW,{align:"end",className:"w-[180px]",children:[(0,l.jsx)(v.Ju,{children:"Activer les colonnes"}),(0,l.jsx)(v.VD,{}),a.getAllColumns().filter(e=>void 0!==e.accessorFn&&e.getCanHide()).map(e=>(0,l.jsx)(v.bO,{checked:e.getIsVisible(),onCheckedChange:a=>e.toggleVisibility(!!a),children:function(e){switch(e){case"second":return"Co\xe9quipier";case"captain":return"Capitaine";case"difficulty":return"Parcours";case"meeting_place":return"Lieu de rendez-vous";case"validation_progress":return"Inscription";default:return e}}(e.id)},e.id))]})]})}var b=s(82084);function w(e){var a,s;let{table:t}=e,n=t.getState().columnFilters.length>0;return(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex flex-1 items-center space-x-2",children:[(0,l.jsx)(o.I,{placeholder:"Filtrer les \xe9quipes...",value:null!==(s=null===(a=t.getColumn("name"))||void 0===a?void 0:a.getFilterValue())&&void 0!==s?s:"",onChange:e=>{var a;return null===(a=t.getColumn("name"))||void 0===a?void 0:a.setFilterValue(e.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),t.getColumn("difficulty")&&(0,l.jsx)(g,{column:t.getColumn("difficulty"),title:"Parcours",options:b.n9}),t.getColumn("meeting_place")&&(0,l.jsx)(g,{column:t.getColumn("meeting_place"),title:"Lieu de rendez-vous",options:b.xQ}),n&&(0,l.jsxs)(d.z,{variant:"ghost",onClick:()=>t.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Supprimer",(0,l.jsx)(c.Pxu,{className:"ml-2 h-4 w-4"})]})]}),(0,l.jsx)(N,{table:t})]})}var y=s(18641);function C(e){let{table:a}=e;return(0,l.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,l.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:[a.getFilteredSelectedRowModel().rows.length," sur"," ",a.getFilteredRowModel().rows.length," \xe9quipe(s) s\xe9l\xe9ctionn\xe9es."]}),(0,l.jsxs)("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:"Equipes par page"}),(0,l.jsxs)(y.Ph,{value:"".concat(a.getState().pagination.pageSize),onValueChange:e=>{a.setPageSize(Number(e))},children:[(0,l.jsx)(y.i4,{className:"h-8 w-[70px]",children:(0,l.jsx)(y.ki,{placeholder:a.getState().pagination.pageSize})}),(0,l.jsx)(y.Bw,{side:"top",children:[10,20,30,40,50].map(e=>(0,l.jsx)(y.Ql,{value:"".concat(e),children:e},e))})]})]}),(0,l.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",a.getState().pagination.pageIndex+1," sur"," ",a.getPageCount()]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsxs)(d.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(0),disabled:!a.getCanPreviousPage(),children:[(0,l.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,l.jsx)(c.kRt,{className:"h-4 w-4"})]}),(0,l.jsxs)(d.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:[(0,l.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,l.jsx)(c.wyc,{className:"h-4 w-4"})]}),(0,l.jsxs)(d.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:[(0,l.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,l.jsx)(c.XCv,{className:"h-4 w-4"})]}),(0,l.jsxs)(d.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>a.setPageIndex(a.getPageCount()-1),disabled:!a.getCanNextPage(),children:[(0,l.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,l.jsx)(c.yr4,{className:"h-4 w-4"})]})]})]})]})}var S=s(5887),k=s(47907);function V(e){var a;let{columns:s,data:t}=e,[c,d]=n.useState({}),[o,u]=n.useState({}),[m,x]=n.useState([]),[h,j]=n.useState([]),f=(0,k.useRouter)(),g=(0,i.b7)({data:t,columns:s,state:{sorting:h,columnVisibility:o,rowSelection:c,columnFilters:m},enableRowSelection:!0,onRowSelectionChange:d,onSortingChange:j,onColumnFiltersChange:x,onColumnVisibilityChange:u,getCoreRowModel:(0,r.sC)(),getFilteredRowModel:(0,r.vL)(),getPaginationRowModel:(0,r.G_)(),getSortedRowModel:(0,r.tj)(),getFacetedRowModel:(0,r.o6)(),getFacetedUniqueValues:(0,r.JG)()});return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(w,{table:g}),(0,l.jsx)("div",{className:"rounded-md border",children:(0,l.jsxs)(S.iA,{children:[(0,l.jsx)(S.xD,{children:g.getHeaderGroups().map(e=>(0,l.jsx)(S.SC,{children:e.headers.map(e=>(0,l.jsx)(S.ss,{colSpan:e.colSpan,children:e.isPlaceholder?null:(0,i.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,l.jsx)(S.RM,{children:(null===(a=g.getRowModel().rows)||void 0===a?void 0:a.length)?g.getRowModel().rows.map(e=>(0,l.jsx)(S.SC,{"data-state":e.getIsSelected()&&"selected",onClick:()=>{var a;return a=e.original.id,void f.replace("/admin/teams?teamId=".concat(a))},children:e.getVisibleCells().map(e=>(0,l.jsx)(S.pj,{children:(0,i.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,l.jsx)(S.SC,{children:(0,l.jsx)(S.pj,{colSpan:s.length,className:"h-24 text-center",children:"Pas de r\xe9sultat"})})})]})}),(0,l.jsx)(C,{table:g})]})}var z=s(79024);function P(e){let{column:a,title:s,className:t}=e;return a.getCanSort()?(0,l.jsx)("div",{className:(0,u.cn)("flex items-center space-x-2",t),children:(0,l.jsxs)(v.h_,{children:[(0,l.jsx)(v.$F,{asChild:!0,children:(0,l.jsxs)(d.z,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[(0,l.jsx)("span",{children:s}),"desc"===a.getIsSorted()?(0,l.jsx)(c.veu,{className:"ml-2 h-4 w-4"}):"asc"===a.getIsSorted()?(0,l.jsx)(c.Hf3,{className:"ml-2 h-4 w-4"}):(0,l.jsx)(c.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,l.jsxs)(v.AW,{align:"start",children:[(0,l.jsxs)(v.Xi,{onClick:()=>a.toggleSorting(!1),children:[(0,l.jsx)(c.Hf3,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),(0,l.jsxs)(v.Xi,{onClick:()=>a.toggleSorting(!0),children:[(0,l.jsx)(c.veu,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),(0,l.jsx)(v.VD,{}),(0,l.jsxs)(v.Xi,{onClick:()=>a.toggleVisibility(!1),children:[(0,l.jsx)(c.L52,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Cacher"]})]})]})}):(0,l.jsx)("div",{className:(0,u.cn)(t),children:s})}function R(e){let{row:a}=e,s=a.original;return(0,l.jsxs)(v.h_,{children:[(0,l.jsx)(v.$F,{asChild:!0,children:(0,l.jsxs)(d.z,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[(0,l.jsx)(c.nWS,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,l.jsxs)(v.AW,{align:"end",className:"w-[160px]",children:[(0,l.jsx)(v.Xi,{children:"Edit"}),(0,l.jsx)(v.Xi,{children:"Make a copy"}),(0,l.jsx)(v.Xi,{children:"Favorite"}),(0,l.jsx)(v.VD,{}),(0,l.jsxs)(v.Ph,{children:[(0,l.jsx)(v.kt,{children:"Parcours"}),(0,l.jsx)(v.TG,{children:(0,l.jsx)(v._x,{value:s.name,children:b.n9.map(e=>(0,l.jsx)(v.qB,{value:e.value,children:e.label},e.value))})})]}),(0,l.jsx)(v.VD,{}),(0,l.jsxs)(v.Xi,{children:["Delete",(0,l.jsx)(v.KM,{children:"⌘⌫"})]})]})]})}let F=[{id:"select",header:e=>{let{table:a}=e;return(0,l.jsx)(z.X,{checked:a.getIsAllPageRowsSelected()||a.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:e=>a.toggleAllPageRowsSelected(!!e),"aria-label":"Select all",className:"translate-y-[2px]"})},cell:e=>{let{row:a}=e;return(0,l.jsx)(z.X,{checked:a.getIsSelected(),onCheckedChange:e=>a.toggleSelected(!!e),"aria-label":"Select row",className:"translate-y-[2px]"})},enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:e=>{let{column:a}=e;return(0,l.jsx)(P,{column:a,title:"Equipe"})},cell:e=>{let{row:a}=e;return(0,l.jsx)("div",{children:a.getValue("name")})},enableSorting:!1,enableHiding:!1},{accessorKey:"captain",header:e=>{let{column:a}=e;return(0,l.jsx)(P,{column:a,title:"Capitaine"})},cell:e=>{let{row:a}=e,s=a.getValue("captain");return(0,l.jsxs)("div",{className:"flex space-x-2",children:[s.firstname," ",s.name]})},enableSorting:!1},{accessorKey:"second",header:e=>{let{column:a}=e;return(0,l.jsx)(P,{column:a,title:"Co\xe9quiper"})},cell:e=>{let{row:a}=e,s=a.getValue("second");return(0,l.jsx)("div",{className:"flex space-x-2",children:s?"".concat(s.firstname," ").concat(s.name):"Aucun"})},enableSorting:!1},{accessorKey:"difficulty",header:e=>{let{column:a}=e;return(0,l.jsx)(P,{column:a,title:"Parcours"})},cell:e=>{let{row:a}=e;return(0,l.jsx)("div",{className:"flex space-x-2",children:(0,l.jsx)(j.C,{variant:"outline",children:(0,b.Jg)(b.n9,a.getValue("difficulty"))})})},filterFn:(e,a,s)=>s.includes(e.getValue(a))},{accessorKey:"meeting_place",header:e=>{let{column:a}=e;return(0,l.jsx)(P,{column:a,title:"Lie de rendezvous"})},cell:e=>{let{row:a}=e;return(0,l.jsx)("div",{className:"flex space-x-2",children:(0,l.jsx)(j.C,{variant:"outline",children:(0,b.Jg)(b.n9,a.getValue("meeting_place"))})})},filterFn:(e,a,s)=>s.includes(e.getValue(a))},{accessorKey:"validation_progress",header:e=>{let{column:a}=e;return(0,l.jsx)(P,{column:a,title:"Inscription"})},cell:e=>{let{row:a}=e;return(0,l.jsx)("div",{className:"flex w-[100px] items-center",children:(0,l.jsxs)("span",{children:[a.getValue("validation_progress").toFixed(0),"%"]})})},sortingFn:(e,a,s)=>e.getValue(s)-a.getValue(s)},{id:"actions",cell:e=>{let{row:a}=e;return(0,l.jsx)(R,{row:a})}}];var _=s(53832),D=s(1146),A=s(41391),I=s(50326),q=s(425),L=s(68855);let T=e=>{let{token:a,userId:s}=(0,L.a)(),{isAdmin:l}=(0,A.a)(),{data:t,refetch:n}=(0,q.oiV)({headers:{Authorization:"Bearer ".concat(a)},pathParams:{teamId:e}},{enabled:null!==s&&l(),retry:0,queryHash:"getTeamById"});return{team:t,refetchTeam:n}};var O=s(99497),M=s(68932),Z=s(55348);let X=e=>{let{participant:a}=e;return(0,l.jsxs)(t.Zb,{children:[(0,l.jsxs)(t.Ol,{children:[(0,l.jsx)(t.ll,{children:a.firstname+" "+a.name}),(0,l.jsxs)(t.SZ,{children:["dossier particiant complet\xe9 \xe0"," ",a.validation_progress.toFixed(0),"%"]})]}),(0,l.jsxs)(t.aY,{children:[(0,l.jsx)(M.l,{label:"Addresse",value:a.address}),(0,l.jsx)(M.l,{label:"Taille de v\xe9lo",value:a.bike_size}),(0,l.jsx)(M.l,{label:"Taille de t-shirt",value:a.t_shirt_size}),(0,l.jsx)(M.l,{label:"R\xe9gime alimentaire",value:a.diet}),function(e){var a,s;let t=(0,Z.l)(null!==(a=e.situation)&&void 0!==a?a:void 0),n=(0,Z.Q)(null!==(s=e.situation)&&void 0!==s?s:void 0);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(M.l,{label:"Situation",value:(0,b.Jg)(b.LN,t)}),"otherschool"===t&&(0,l.jsx)(M.l,{label:"Nom de l'\xe9cole",value:n}),"corporatepartner"===t&&(0,l.jsx)(M.l,{label:"Nom de l'entreprise",value:n}),"other"===t&&(0,l.jsx)(M.l,{label:"Autre situation",value:n})]})}(a),(0,l.jsx)(M.l,{label:"Attestation sur l'honneur",value:a.attestation_on_honour})]})]})},G=e=>{let{team:a}=e;return(0,l.jsxs)("div",{className:"grid xl:grid-cols-2 gap-4 w-full py-6 grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,l.jsx)(X,{participant:a.captain}),a.second?(0,l.jsx)(X,{participant:a.second}):(0,l.jsx)(t.Zb,{className:"w-full h-full",children:(0,l.jsx)(t.aY,{className:"w-full h-full mt-3",children:(0,l.jsx)("span",{className:"flex m-auto h-full justify-center items-center text-muted-foreground",children:"Aucun co\xe9quipier n'a \xe9t\xe9 ajout\xe9 \xe0 cette \xe9quipe."})})})]})};var Y=s(77625),B=s(80146),E=s(23441);let H=B.fC,U=n.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)(B.ck,{ref:a,className:(0,u.cn)("border-b",s),...t})});U.displayName="AccordionItem";let K=n.forwardRef((e,a)=>{let{className:s,children:t,...n}=e;return(0,l.jsx)(B.h4,{className:"flex",children:(0,l.jsxs)(B.xz,{ref:a,className:(0,u.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...n,children:[t,(0,l.jsx)(E.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});K.displayName=B.xz.displayName;let W=n.forwardRef((e,a)=>{let{className:s,children:t,...n}=e;return(0,l.jsx)(B.VY,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,l.jsx)("div",{className:(0,u.cn)("pb-4 pt-0",s),children:t})})});W.displayName=B.VY.displayName;var J=s(29908);let Q=e=>{let{value:a,document:s,index:t,setDocument:n,downloadDocument:i,validateDocument:r,isValidationLoading:o}=e,u=s&&s.validated||!1;return(0,l.jsxs)(U,{value:"item-".concat(t),onClick:()=>{s&&n(s)},children:[(0,l.jsx)(K,{children:(0,l.jsxs)("div",{className:"flex flex-row mr-auto items-center",children:[u&&(0,l.jsx)(J.dZ6,{className:"mr-4"}),a]})}),(0,l.jsx)(W,{children:s?(0,l.jsxs)("div",{className:"flex grid-cols-2 gap-6",children:[(0,l.jsx)(d.z,{variant:"outline",className:"w-full",onClick:e=>i(s),children:"T\xe9l\xe9charger le document"}),!u&&(0,l.jsx)(d.z,{className:"w-full",onClick:e=>{r(s.id)},disabled:o,children:o?(0,l.jsx)(c.BGW,{className:"mr-2 h-4 w-4 animate-spin"}):"Valider le document"})]}):(0,l.jsx)("span",{className:"text-muted-foreground",children:"Aucun document"})})]})},$=e=>{var a,s,n,i;let{participant:r,setDocument:c,downloadDocument:d,validateDocument:o,isValidationLoading:u}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.Ol,{children:(0,l.jsxs)(t.ll,{children:[r.firstname," ",r.name]})}),(0,l.jsx)(t.aY,{children:(0,l.jsxs)(H,{type:"single",collapsible:!0,className:"w-full",children:[(0,l.jsx)(Q,{value:"Carte d'identit\xe9",document:r.id_card,index:0,setDocument:c,downloadDocument:d,validateDocument:o,isValidationLoading:u}),(0,l.jsx)(Q,{value:"Certificat m\xe9dical",document:r.medical_certificate,index:1,setDocument:c,downloadDocument:d,validateDocument:o,isValidationLoading:u}),(0,l.jsx)(Q,{value:"R\xe9glement",document:null!==(a=r.raid_rules)&&void 0!==a?a:null,index:2,setDocument:c,downloadDocument:d,validateDocument:o,isValidationLoading:u}),["centrale","otherschool"].includes(null!==(n=(0,Z.l)(null!==(s=r.situation)&&void 0!==s?s:void 0))&&void 0!==n?n:"")&&(0,l.jsx)(Q,{value:"Carte \xe9tudiant",document:null!==(i=r.student_card)&&void 0!==i?i:null,index:3,setDocument:c,downloadDocument:d,validateDocument:o,isValidationLoading:u})]})})]})};var ee=s(99257),ea=s(56201),es=s(77147);let el=e=>{let{team:a}=e,{getDocument:s,validateDocument:i,isValidationLoading:r}=(0,ea.k)(),{refetchTeam:c}=T(a.id),{refetchTeams:d}=(0,D.y)(),[o,u]=(0,n.useState)(null),[m,x]=(0,n.useState)(null);function h(e,a){let l=e.type,t=s(a.id,l);if(void 0!==t){let e=t.type.split("/")[1],s="".concat(a.firstname,"_").concat(a.name,"_").concat(l,".").concat(e),n=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=n,i.setAttribute("download",s),document.body.appendChild(i),i.click()}}function j(e){i(e,()=>{c(),d(),(0,es.Am)({title:"Document valid\xe9 avec succ\xe8s"})})}let f=null==o?void 0:o.type;return(0,l.jsxs)("div",{className:"grid xl:grid-cols-2 gap-4 w-full py-6 grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,l.jsxs)(t.Zb,{children:[(0,l.jsx)($,{participant:a.captain,setDocument:e=>{var s;return s=a.captain.id,void(u(e),x(s))},downloadDocument:e=>h(e,a.captain),validateDocument:j,isValidationLoading:r}),a.second&&(0,l.jsx)($,{participant:a.second,setDocument:e=>{var s;return s=a.second.id,void(u(e),x(s))},downloadDocument:e=>h(e,a.second),validateDocument:j,isValidationLoading:r})]}),o&&f&&m&&(0,l.jsx)(ee.s,{userId:m,documentKey:f,id:o.id,file:s(m,f)})]})},et=e=>{let{participant:a,validateCallback:s,isLoading:n}=e;return(0,l.jsxs)(t.Zb,{children:[(0,l.jsx)(t.Ol,{children:(0,l.jsxs)(t.ll,{children:[a.firstname," ",a.name]})}),(0,l.jsx)(t.aY,{children:a.payment?(0,l.jsx)("p",{children:"L'inscription \xe0 \xe9t\xe9 pay\xe9e"}):(0,l.jsx)(d.z,{onClick:e=>s(a.id),disabled:n,className:"w-full",children:n?(0,l.jsx)(c.BGW,{className:"h-4 w-4 animate-spin"}):"Valider le paiement de l'inscription"})})]})},en=()=>{let{token:e}=(0,L.a)(),{mutate:a,isPending:s}=(0,q.t7X)();return{validatePayment:(s,l)=>{a({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:s}},{onSettled:()=>{l()}})},isLoading:s}},ei=e=>{let{team:a}=e,{validatePayment:s,isLoading:n}=en(),{refetchTeam:i}=T(a.id),{refetchTeams:r}=(0,D.y)();function c(e){s(e,()=>{i(),r(),(0,es.Am)({title:"Paiement valid\xe9 avec succ\xe8s"})})}return(0,l.jsxs)("div",{className:"grid xl:grid-cols-2 gap-4 w-full py-6 grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,l.jsx)(et,{participant:a.captain,validateCallback:c,isLoading:n}),a.second?(0,l.jsx)(et,{participant:a.second,validateCallback:c,isLoading:n}):(0,l.jsx)(t.Zb,{className:"w-full h-full",children:(0,l.jsx)(t.aY,{className:"w-full h-full mt-3",children:(0,l.jsx)("span",{className:"flex m-auto h-full justify-center items-center text-muted-foreground",children:"Aucun co\xe9quipier n'a \xe9t\xe9 ajout\xe9 \xe0 cette \xe9quipe."})})})]})},er=e=>{let{isOpened:a,onClose:s,teamId:t}=e,{team:n}=T(t),i=(null==n?void 0:n.id)!==t;return(0,l.jsx)(I.yo,{open:a,onOpenChange:s,children:(0,l.jsxs)(I.ue,{side:"team",children:[(0,l.jsx)(I.Tu,{children:i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Y.O,{className:"h-8 w-32"}),(0,l.jsx)(Y.O,{className:"h-4 w-80"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(I.bC,{children:null==n?void 0:n.name}),(0,l.jsxs)(I.Ei,{children:["Dossier \xe9quipe complet\xe9 \xe0 ",null==n?void 0:n.validation_progress.toFixed(0)," ","%"]})]})}),(0,l.jsx)("div",{className:"p-4"}),(0,l.jsxs)(O.mQ,{defaultValue:"information",className:"",children:[(0,l.jsxs)(O.dr,{className:"grid grid-cols-3 w-[500px]",children:[(0,l.jsx)(O.SP,{value:"information",children:"Informations"}),(0,l.jsx)(O.SP,{value:"document",children:"Documents"}),(0,l.jsx)(O.SP,{value:"payment",children:"Paiement"})]}),i?(0,l.jsx)(Y.O,{className:"h-96 w-192 mt-6"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(O.nU,{value:"information",children:n&&(0,l.jsx)(G,{team:n})}),(0,l.jsx)(O.nU,{value:"document",children:n&&(0,l.jsx)(el,{team:n})}),(0,l.jsx)(O.nU,{value:"payment",children:n&&(0,l.jsx)(ei,{team:n})})]})]})]})})};var ec=()=>{let{isAdmin:e}=(0,A.a)(),{teams:a}=(0,D.y)(),s=(0,k.useRouter)(),i=(0,k.useSearchParams)(),[r,c]=(0,n.useState)(!1),[d,o]=(0,n.useState)(null);if(!e()){let e=new URL(window.location.href),a=e.pathname+e.search;s.replace("/?redirect=".concat(a))}let u=i.get("teamId");return u!==d&&(o(u),c(!!u)),(0,l.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-muted/40",children:[(0,l.jsx)(_.D,{}),(0,l.jsx)("main",{className:"grid flex-1 items-start gap-4 p-4 sm:px-6 sm:py-0 md:gap-8 mt-8",children:(0,l.jsxs)(t.Zb,{children:[(0,l.jsxs)(t.Ol,{children:[(0,l.jsx)(t.ll,{children:"Equipes"}),(0,l.jsx)(t.SZ,{children:"Liste des \xe9quipes enregistr\xe9es"})]}),(0,l.jsx)(t.aY,{children:a&&(0,l.jsx)(V,{data:a,columns:F})})]})}),d&&(0,l.jsx)(er,{isOpened:r,onClose:function(){c(!1),s.replace("/admin/teams"),o(null)},teamId:d})]})}},53832:function(e,a,s){"use strict";s.d(a,{D:function(){return h}});var l=s(57437),t=s(8792),n=s(12153),i=s(79744),r=s(575),c=s(34645),d=s(50326),o=s(40695),u=s(77625),m=s(41391),x=s(91806);let h=()=>{let{me:e}=(0,m.a)();function a(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.default,{href:"#",className:"flex items-center gap-2 text-lg font-semibold md:text-base",children:(0,l.jsx)(n.Z,{className:"h-6 w-6"})}),(0,l.jsx)(t.default,{href:"/admin",className:"text-foreground transition-colors hover:text-foreground",children:"Tableau de bord"}),(0,l.jsx)(t.default,{href:"/admin/teams",className:"text-muted-foreground transition-colors hover:text-foreground",children:"Equipes"})]})}return(0,l.jsxs)("header",{className:"sticky top-0 flex h-16 items-center gap-4 border-b bg-background px-4 md:px-6",children:[(0,l.jsx)("nav",{className:"hidden flex-col gap-6 text-lg font-medium md:flex md:flex-row md:items-center md:gap-5 md:text-sm lg:gap-6 mx-10 max-md:mx-0 w-full",children:a()}),(0,l.jsxs)(d.yo,{children:[(0,l.jsx)(d.aM,{asChild:!0,children:(0,l.jsxs)(r.z,{variant:"outline",size:"icon",className:"shrink-0 md:hidden",children:[(0,l.jsx)(i.Z,{className:"h-5 w-5"}),(0,l.jsx)("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),(0,l.jsx)(d.ue,{side:"left",children:(0,l.jsx)("nav",{className:"grid gap-6 text-lg font-medium",children:a()})})]}),(0,l.jsx)("div",{className:"flex w-full items-center gap-4 md:ml-auto md:gap-2 lg:gap-4  mx-10 max-md:mx-0",children:(0,l.jsxs)("div",{className:"flex flex-row ml-auto",children:[(0,l.jsxs)(c.h_,{children:[(0,l.jsx)(c.$F,{asChild:!0,children:(0,l.jsx)(r.z,{variant:"ghost",children:(null==e?void 0:e.firstname)===void 0||(null==e?void 0:e.name)===void 0?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.O,{className:"w-24 h-6"})}):(0,l.jsx)(l.Fragment,{children:e.firstname+" "+e.name})})}),(0,l.jsx)(c.AW,{align:"end",children:(0,l.jsx)(c.Xi,{children:(0,l.jsx)(x.s,{})})})]}),(0,l.jsx)("div",{className:"w-4"}),(0,l.jsx)(o.U,{})]})})]})}},33277:function(e,a,s){"use strict";s.d(a,{C:function(){return r}});var l=s(57437);s(2265);var t=s(57742),n=s(1657);let i=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function r(e){let{className:a,variant:s,...t}=e;return(0,l.jsx)("div",{className:(0,n.cn)(i({variant:s}),a),...t})}},5887:function(e,a,s){"use strict";s.d(a,{RM:function(){return c},SC:function(){return d},iA:function(){return i},pj:function(){return u},ss:function(){return o},xD:function(){return r}});var l=s(57437),t=s(2265),n=s(1657);let i=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:a,className:(0,n.cn)("w-full caption-bottom text-sm",s),...t})})});i.displayName="Table";let r=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("thead",{ref:a,className:(0,n.cn)("[&_tr]:border-b",s),...t})});r.displayName="TableHeader";let c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("tbody",{ref:a,className:(0,n.cn)("[&_tr:last-child]:border-0",s),...t})});c.displayName="TableBody",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("tfoot",{ref:a,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t})}).displayName="TableFooter";let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("tr",{ref:a,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t})});d.displayName="TableRow";let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("th",{ref:a,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t})});o.displayName="TableHead";let u=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("td",{ref:a,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t})});u.displayName="TableCell",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)("caption",{ref:a,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",s),...t})}).displayName="TableCaption"},99497:function(e,a,s){"use strict";s.d(a,{SP:function(){return d},dr:function(){return c},mQ:function(){return r},nU:function(){return o}});var l=s(57437),t=s(2265),n=s(64694),i=s(1657);let r=n.fC,c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)(n.aV,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t})});c.displayName=n.aV.displayName;let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)(n.xz,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t})});d.displayName=n.xz.displayName;let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,l.jsx)(n.VY,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t})});o.displayName=n.VY.displayName},1146:function(e,a,s){"use strict";s.d(a,{y:function(){return i}});var l=s(425),t=s(41391),n=s(68855);let i=()=>{let{token:e}=(0,n.a)(),{isAdmin:a}=(0,t.a)(),{data:s,isLoading:i,refetch:r}=(0,l.kAw)({headers:{Authorization:"Bearer ".concat(e)}},{enabled:a()&&null!==e,retry:0,queryHash:"getTeams"});return{teams:s,isLoading:i,refetchTeams:r}}}},function(e){e.O(0,[422,310,651,470,305,169,953,864,712,244,91,971,69,744],function(){return e(e.s=88790)}),_N_E=e.O()}]);