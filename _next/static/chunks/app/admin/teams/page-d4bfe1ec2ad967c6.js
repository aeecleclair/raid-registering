(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{88790:function(e,l,a){Promise.resolve().then(a.bind(a,64319))},64319:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return eh}});var s=a(57437),t=a(15671),n=a(2265),r=a(81006),i=a(63280),c=a(62177),d=a(575),o=a(22782),u=a(1657),m=a(82012),x=a(51014);let h=n.forwardRef((e,l)=>{let{className:a,orientation:t="horizontal",decorative:n=!0,...r}=e;return(0,s.jsx)(x.f,{ref:l,decorative:n,orientation:t,className:(0,u.cn)("shrink-0 bg-border","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",a),...r})});h.displayName=x.f.displayName;var f=a(33277),j=a(26739);function p(e){let{column:l,title:a,options:t}=e,n=null==l?void 0:l.getFacetedUniqueValues(),r=new Set(null==l?void 0:l.getFilterValue());return(0,s.jsxs)(m.J2,{children:[(0,s.jsx)(m.xo,{asChild:!0,children:(0,s.jsxs)(d.z,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[(0,s.jsx)(c.SPS,{className:"mr-2 h-4 w-4"}),a,(null==r?void 0:r.size)>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h,{orientation:"vertical",className:"mx-2 h-4"}),(0,s.jsx)(f.C,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:r.size}),(0,s.jsx)("div",{className:"hidden space-x-1 lg:flex",children:r.size>2?(0,s.jsxs)(f.C,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[r.size," selected"]}):t.filter(e=>r.has(e.value)).map(e=>(0,s.jsx)(f.C,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:e.label},e.value))})]})]})}),(0,s.jsx)(m.yk,{className:"w-[200px] p-0",align:"start",children:(0,s.jsxs)(j.mY,{children:[(0,s.jsx)(j.sZ,{placeholder:a}),(0,s.jsxs)(j.e8,{children:[(0,s.jsx)(j.rb,{children:"No results found."}),(0,s.jsx)(j.fu,{children:t.map(e=>{let a=r.has(e.value);return(0,s.jsxs)(j.di,{onSelect:()=>{a?r.delete(e.value):r.add(e.value);let s=Array.from(r);console.log(s),null==l||l.setFilterValue(s.length?s:void 0)},children:[(0,s.jsx)("div",{className:(0,u.cn)("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",a?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:(0,s.jsx)(c.nQG,{className:(0,u.cn)("h-4 w-4")})}),e.icon&&(0,s.jsx)(e.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{children:e.label}),(null==n?void 0:n.get(e.value))&&(0,s.jsx)("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:n.get(e.value)})]},e.value)})}),r.size>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.zz,{}),(0,s.jsx)(j.fu,{children:(0,s.jsx)(j.di,{onSelect:()=>null==l?void 0:l.setFilterValue(void 0),className:"justify-center text-center",children:"Supprimer les filtres"})})]})]})]})})]})}var g=a(22638),v=a(34645);function N(e){let{table:l}=e;return(0,s.jsxs)(v.h_,{children:[(0,s.jsx)(g.$F,{asChild:!0,children:(0,s.jsxs)(d.z,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[(0,s.jsx)(c.hsZ,{className:"mr-2 h-4 w-4"}),"Colonnes"]})}),(0,s.jsxs)(v.AW,{align:"end",className:"w-[180px]",children:[(0,s.jsx)(v.Ju,{children:"Activer les colonnes"}),(0,s.jsx)(v.VD,{}),l.getAllColumns().filter(e=>void 0!==e.accessorFn&&e.getCanHide()).map(e=>(0,s.jsx)(v.bO,{checked:e.getIsVisible(),onCheckedChange:l=>e.toggleVisibility(!!l),children:function(e){switch(e){case"second":return"Co\xe9quipier";case"captain":return"Capitaine";case"difficulty":return"Parcours";case"meeting_place":return"Lieu de rendez-vous";case"validation_progress":return"Inscription";case"document_progress":return"Documents";default:return e}}(e.id)},e.id))]})]})}var b=a(82084),w=a(79024);function y(e){let{column:l,title:a}=e,t=new Set(null==l?void 0:l.getFilterValue()),n=Array.from(t).length>0;return(0,s.jsxs)("div",{className:"h-8 border-dashed border rounded-md items-center flex px-3 justify-center whitespace-nowrap text-sm font-medium ",children:[(0,s.jsx)(w.X,{checked:n,className:"mr-2",onCheckedChange:e=>{n?t.delete(null):t.add(null);let a=Array.from(t);console.log(a),null==l||l.setFilterValue(a.length?a:void 0)}}),a]})}function C(e){var l,a;let{table:t}=e,n=t.getState().columnFilters.length>0;return(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-1 items-center space-x-2",children:[(0,s.jsx)(o.I,{placeholder:"Filtrer les \xe9quipes...",value:null!==(a=null===(l=t.getColumn("name"))||void 0===l?void 0:l.getFilterValue())&&void 0!==a?a:"",onChange:e=>{var l;return null===(l=t.getColumn("name"))||void 0===l?void 0:l.setFilterValue(e.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),t.getColumn("difficulty")&&(0,s.jsx)(p,{column:t.getColumn("difficulty"),title:"Parcours",options:b.n9}),t.getColumn("meeting_place")&&(0,s.jsx)(p,{column:t.getColumn("meeting_place"),title:"Lieu de rendez-vous",options:b.xQ}),t.getColumn("second")&&(0,s.jsx)(y,{column:t.getColumn("second"),title:"Equipe sans co\xe9quipier"}),n&&(0,s.jsxs)(d.z,{variant:"ghost",onClick:()=>t.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Supprimer",(0,s.jsx)(c.Pxu,{className:"ml-2 h-4 w-4"})]})]}),(0,s.jsx)(N,{table:t})]})}var S=a(18641);function V(e){let{table:l}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,s.jsxs)("div",{className:"flex-1 text-sm text-muted-foreground",children:[l.getFilteredSelectedRowModel().rows.length," sur"," ",l.getFilteredRowModel().rows.length," \xe9quipe(s) s\xe9l\xe9ctionn\xe9es."]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Equipes par page"}),(0,s.jsxs)(S.Ph,{value:"".concat(l.getState().pagination.pageSize),onValueChange:e=>{l.setPageSize(Number(e))},children:[(0,s.jsx)(S.i4,{className:"h-8 w-[70px]",children:(0,s.jsx)(S.ki,{placeholder:l.getState().pagination.pageSize})}),(0,s.jsx)(S.Bw,{side:"top",children:[10,20,30,40,50].map(e=>(0,s.jsx)(S.Ql,{value:"".concat(e),children:e},e))})]})]}),(0,s.jsxs)("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",l.getState().pagination.pageIndex+1," sur"," ",l.getPageCount()]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(d.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>l.setPageIndex(0),disabled:!l.getCanPreviousPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,s.jsx)(c.kRt,{className:"h-4 w-4"})]}),(0,s.jsxs)(d.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,s.jsx)(c.wyc,{className:"h-4 w-4"})]}),(0,s.jsxs)(d.z,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,s.jsx)(c.XCv,{className:"h-4 w-4"})]}),(0,s.jsxs)(d.z,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>l.setPageIndex(l.getPageCount()-1),disabled:!l.getCanNextPage(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,s.jsx)(c.yr4,{className:"h-4 w-4"})]})]})]})]})}var _=a(5887),k=a(47907);function R(e){var l;let{columns:a,data:t}=e,[c,d]=n.useState({}),[o,u]=n.useState({}),[m,x]=n.useState([]),[h,f]=n.useState([]),j=(0,k.useRouter)(),p=(0,r.b7)({data:t,columns:a,state:{sorting:h,columnVisibility:o,rowSelection:c,columnFilters:m},enableRowSelection:!0,onRowSelectionChange:d,onSortingChange:f,onColumnFiltersChange:x,onColumnVisibilityChange:u,getCoreRowModel:(0,i.sC)(),getFilteredRowModel:(0,i.vL)(),getPaginationRowModel:(0,i.G_)(),getSortedRowModel:(0,i.tj)(),getFacetedRowModel:(0,i.o6)(),getFacetedUniqueValues:(0,i.JG)()});return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(C,{table:p}),(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(_.iA,{children:[(0,s.jsx)(_.xD,{children:p.getHeaderGroups().map(e=>(0,s.jsx)(_.SC,{children:e.headers.map(e=>(0,s.jsx)(_.ss,{colSpan:e.colSpan,children:e.isPlaceholder?null:(0,r.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(_.RM,{children:(null===(l=p.getRowModel().rows)||void 0===l?void 0:l.length)?p.getRowModel().rows.map(e=>(0,s.jsx)(_.SC,{"data-state":e.getIsSelected()&&"selected",onClick:()=>{var l;return l=e.original.id,void j.replace("/admin/teams?teamId=".concat(l))},children:e.getVisibleCells().map(e=>(0,s.jsx)(_.pj,{children:(0,r.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(_.SC,{children:(0,s.jsx)(_.pj,{colSpan:a.length,className:"h-24 text-center",children:"Pas de r\xe9sultat"})})})]})}),(0,s.jsx)(V,{table:p})]})}function z(e){let{column:l,title:a,className:t}=e;return l.getCanSort()?(0,s.jsx)("div",{className:(0,u.cn)("flex items-center space-x-2",t),children:(0,s.jsxs)(v.h_,{children:[(0,s.jsx)(v.$F,{asChild:!0,children:(0,s.jsxs)(d.z,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent -mr-7",children:[(0,s.jsx)("span",{children:a}),"desc"===l.getIsSorted()?(0,s.jsx)(c.veu,{className:"ml-2 h-4 w-4"}):"asc"===l.getIsSorted()?(0,s.jsx)(c.Hf3,{className:"ml-2 h-4 w-4"}):(0,s.jsx)(c.jnn,{className:"ml-2 h-4 w-4"})]})}),(0,s.jsxs)(v.AW,{align:"start",children:[(0,s.jsxs)(v.Xi,{onClick:()=>l.toggleSorting(!1),children:[(0,s.jsx)(c.Hf3,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),(0,s.jsxs)(v.Xi,{onClick:()=>l.toggleSorting(!0),children:[(0,s.jsx)(c.veu,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),(0,s.jsx)(v.VD,{}),(0,s.jsxs)(v.Xi,{onClick:()=>l.toggleVisibility(!1),children:[(0,s.jsx)(c.L52,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Cacher"]})]})]})}):(0,s.jsx)("div",{className:(0,u.cn)(t),children:a})}function P(e){let{row:l}=e,a=l.original;return(0,s.jsxs)(v.h_,{children:[(0,s.jsx)(v.$F,{asChild:!0,children:(0,s.jsxs)(d.z,{variant:"ghost",className:"flex h-8 w-4 p-0 data-[state=open]:bg-muted",children:[(0,s.jsx)(c.nWS,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,s.jsxs)(v.AW,{align:"end",className:"w-[160px]",children:[(0,s.jsx)(v.Xi,{children:"Edit"}),(0,s.jsx)(v.Xi,{children:"Make a copy"}),(0,s.jsx)(v.Xi,{children:"Favorite"}),(0,s.jsx)(v.VD,{}),(0,s.jsxs)(v.Ph,{children:[(0,s.jsx)(v.kt,{children:"Parcours"}),(0,s.jsx)(v.TG,{children:(0,s.jsx)(v._x,{value:a.name,children:b.n9.map(e=>(0,s.jsx)(v.qB,{value:e.value,children:e.label},e.value))})})]}),(0,s.jsx)(v.VD,{}),(0,s.jsxs)(v.Xi,{children:["Delete",(0,s.jsx)(v.KM,{children:"⌘⌫"})]})]})]})}var F=a(38815);let D=[{accessorKey:"name",header:e=>{let{column:l}=e;return(0,s.jsx)(z,{column:l,title:"Equipe"})},cell:e=>{let{row:l}=e;return(0,s.jsx)("div",{children:l.getValue("name")})},enableSorting:!1,enableHiding:!1},{accessorKey:"captain",header:e=>{let{column:l}=e;return(0,s.jsx)(z,{column:l,title:"Capitaine"})},cell:e=>{let{row:l}=e,a=l.getValue("captain");return(0,s.jsxs)("div",{className:"flex space-x-2",children:[a.firstname," ",a.name]})},enableSorting:!1},{accessorKey:"second",header:e=>{let{column:l}=e;return(0,s.jsx)(z,{column:l,title:"Co\xe9quiper"})},cell:e=>{let{row:l}=e,a=l.getValue("second");return(0,s.jsx)("div",{className:"flex space-x-2 ".concat(null!=a?a:"text-muted-foreground"),children:a?"".concat(a.firstname," ").concat(a.name):"Non renseign\xe9"})},enableSorting:!1,filterFn:(e,l,a)=>a.includes(e.getValue(l))},{accessorKey:"difficulty",header:e=>{let{column:l}=e;return(0,s.jsx)(z,{column:l,title:"Parcours",className:"max-lg:hidden"})},cell:e=>{let{row:l}=e;return(0,s.jsx)("div",{className:"flex space-x-2 max-lg:hidden",children:(0,s.jsx)(f.C,{variant:"outline",children:(0,b.Jg)(b.n9,l.getValue("difficulty"))})})},filterFn:(e,l,a)=>a.includes(e.getValue(l))},{accessorKey:"meeting_place",header:e=>{let{column:l}=e;return(0,s.jsx)(z,{column:l,title:"Lieu de rendez-vous",className:"max-lg:hidden"})},cell:e=>{let{row:l}=e;return(0,s.jsx)("div",{className:"flex space-x-2 max-lg:hidden",children:(0,s.jsx)(f.C,{variant:"outline",children:(0,b.Jg)(b.xQ,l.getValue("meeting_place"))})})},filterFn:(e,l,a)=>a.includes(e.getValue(l))},{accessorKey:"validation_progress",header:e=>{let{column:l}=e;return(0,s.jsx)(z,{column:l,title:"Inscription",className:""})},cell:e=>{let{row:l}=e;return(0,s.jsx)("div",{className:"flex space-x-2 items-center",children:(0,s.jsxs)("span",{children:[l.getValue("validation_progress").toFixed(0),"%"]})})},sortingFn:(e,l,a)=>e.getValue(a)-l.getValue(a)},{accessorKey:"document_progress",header:e=>{let{column:l}=e;return(0,s.jsx)(z,{column:l,title:"Documents"})},cell:e=>{var l,a,t,n;let{row:r}=e,i=r.getValue("captain").number_of_validated_document+(null!==(t=null===(l=r.getValue("second"))||void 0===l?void 0:l.number_of_validated_document)&&void 0!==t?t:0),c=r.getValue("captain").number_of_document+(null!==(n=null===(a=r.getValue("second"))||void 0===a?void 0:a.number_of_document)&&void 0!==n?n:0);return(0,s.jsx)("div",{className:"flex w-[110px] items-center",children:(0,s.jsxs)(f.C,{variant:"outline",children:[(0,s.jsx)(F.$,{value:i/c*100}),(0,s.jsxs)("span",{className:"ml-2",children:[i," / ",c," ","valid\xe9s"]})]})})},enableSorting:!1},{id:"actions",cell:e=>{let{row:l}=e;return(0,s.jsx)(P,{row:l})}}];var A=a(612),L=a(1146),q=a(41391),I=a(50326),T=a(425),O=a(68855);let M=e=>{let{token:l,userId:a,isTokenExpired:s}=(0,O.a)(),{isAdmin:t}=(0,q.a)(),{data:n,refetch:r}=(0,T.oiV)({headers:{Authorization:"Bearer ".concat(l)},pathParams:{teamId:e}},{enabled:null!==a&&t()&&!s(),retry:0,queryHash:"getTeamById"});return{team:n,refetchTeam:r}};var Z=a(99497),E=a(68932),Y=a(55348);let X=e=>{let{participant:l}=e;return(0,s.jsxs)(t.Zb,{children:[(0,s.jsxs)(t.Ol,{children:[(0,s.jsx)(t.ll,{children:l.firstname+" "+l.name}),(0,s.jsxs)(t.SZ,{children:["dossier particiant complet\xe9 \xe0"," ",l.validation_progress.toFixed(0),"%"]})]}),(0,s.jsxs)(t.aY,{children:[(0,s.jsx)(E.l,{label:"Email",value:l.email}),(0,s.jsx)(E.l,{label:"Adresse",value:l.address}),(0,s.jsx)(E.l,{label:"Taille de v\xe9lo",value:l.bike_size}),(0,s.jsx)(E.l,{label:"Taille de t-shirt",value:l.t_shirt_size}),(0,s.jsx)(E.l,{label:"R\xe9gime alimentaire",value:l.diet}),function(e){var l,a;let t=(0,Y.l)(null!==(l=e.situation)&&void 0!==l?l:void 0),n=(0,Y.Q)(null!==(a=e.situation)&&void 0!==a?a:void 0);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(E.l,{label:"Situation",value:(0,b.Jg)(b.LN,t)}),"otherschool"===t&&(0,s.jsx)(E.l,{label:"Nom de l'\xe9cole",value:n}),"corporatepartner"===t&&(0,s.jsx)(E.l,{label:"Nom de l'entreprise",value:n}),"other"===t&&(0,s.jsx)(E.l,{label:"Autre situation",value:n})]})}(l),(0,s.jsx)(E.l,{label:"Attestation sur l'honneur",value:l.attestation_on_honour})]})]})},G=e=>{let{team:l}=e;return(0,s.jsxs)("div",{className:"grid xl:grid-cols-2 gap-4 w-full py-6 grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,s.jsx)(X,{participant:l.captain}),l.second?(0,s.jsx)(X,{participant:l.second}):(0,s.jsx)(t.Zb,{className:"w-full h-full",children:(0,s.jsx)(t.aY,{className:"w-full h-full mt-3",children:(0,s.jsx)("span",{className:"flex m-auto h-full justify-center items-center text-muted-foreground",children:"Aucun co\xe9quipier n'a \xe9t\xe9 ajout\xe9 \xe0 cette \xe9quipe."})})})]})};var H=a(77625),K=a(80146),U=a(23441);let B=K.fC,Q=n.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)(K.ck,{ref:l,className:(0,u.cn)("border-b",a),...t})});Q.displayName="AccordionItem";let J=n.forwardRef((e,l)=>{let{className:a,children:t,...n}=e;return(0,s.jsx)(K.h4,{className:"flex",children:(0,s.jsxs)(K.xz,{ref:l,className:(0,u.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...n,children:[t,(0,s.jsx)(U.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});J.displayName=K.xz.displayName;let W=n.forwardRef((e,l)=>{let{className:a,children:t,...n}=e;return(0,s.jsx)(K.VY,{ref:l,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:(0,s.jsx)("div",{className:(0,u.cn)("pb-4 pt-0",a),children:t})})});W.displayName=K.VY.displayName;var $=a(29908),ee=a(1800);let el=e=>{let{value:l,document:a,index:t,setDocument:n,downloadDocument:r,validateDocument:i,isValidationLoading:c}=e,o=a&&a.validated||!1;return(0,s.jsxs)(Q,{value:"item-".concat(t),onClick:()=>{a&&n(a)},children:[(0,s.jsx)(J,{children:(0,s.jsxs)("div",{className:"flex flex-row mr-auto items-center",children:[o&&(0,s.jsx)($.dZ6,{className:"mr-4"}),l]})}),(0,s.jsx)(W,{children:a?(0,s.jsxs)("div",{className:"flex grid-cols-2 gap-6",children:[(0,s.jsx)(d.z,{variant:"outline",className:"w-full",onClick:e=>r(a),children:"T\xe9l\xe9charger le document"}),!o&&(0,s.jsx)(ee.f,{isLoading:c,label:"Valider le document",className:"w-full",onClick:e=>{i(a.id)}})]}):(0,s.jsx)("span",{className:"text-muted-foreground",children:"Aucun document"})})]})},ea=e=>{var l,a,n,r;let{participant:i,setDocument:c,downloadDocument:d,validateDocument:o,isValidationLoading:u}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.Ol,{children:(0,s.jsxs)(t.ll,{children:[i.firstname," ",i.name]})}),(0,s.jsx)(t.aY,{children:(0,s.jsxs)(B,{type:"single",collapsible:!0,className:"w-full",children:[(0,s.jsx)(el,{value:"Carte d'identit\xe9",document:i.id_card,index:0,setDocument:c,downloadDocument:d,validateDocument:o,isValidationLoading:u}),(0,s.jsx)(el,{value:"Certificat m\xe9dical",document:i.medical_certificate,index:1,setDocument:c,downloadDocument:d,validateDocument:o,isValidationLoading:u}),(0,s.jsx)(el,{value:"R\xe9glement",document:null!==(l=i.raid_rules)&&void 0!==l?l:null,index:2,setDocument:c,downloadDocument:d,validateDocument:o,isValidationLoading:u}),["centrale","otherschool"].includes(null!==(n=(0,Y.l)(null!==(a=i.situation)&&void 0!==a?a:void 0))&&void 0!==n?n:"")&&(0,s.jsx)(el,{value:"Carte \xe9tudiant",document:null!==(r=i.student_card)&&void 0!==r?r:null,index:3,setDocument:c,downloadDocument:d,validateDocument:o,isValidationLoading:u})]})})]})};var es=a(99257),et=a(56201),en=a(77147);let er=e=>{let{team:l}=e,{getDocument:a,validateDocument:r,isValidationLoading:i}=(0,et.k)(),{refetchTeam:c}=M(l.id),{refetchTeams:d}=(0,L.y)(),[o,u]=(0,n.useState)(null),[m,x]=(0,n.useState)(null);function h(e,l){let s=e.type,t=a(l.id,s);if(void 0!==t){let e=t.type.split("/")[1],a="".concat(l.firstname,"_").concat(l.name,"_").concat(s,".").concat(e),n=window.URL.createObjectURL(new Blob([t])),r=document.createElement("a");r.href=n,r.setAttribute("download",a),document.body.appendChild(r),r.click()}}function f(e){r(e,()=>{c(),d(),(0,en.Am)({title:"Document valid\xe9 avec succ\xe8s"})})}let j=null==o?void 0:o.type;return(0,s.jsxs)("div",{className:"grid xl:grid-cols-2 gap-4 w-full py-6 grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,s.jsxs)(t.Zb,{children:[(0,s.jsx)(ea,{participant:l.captain,setDocument:e=>{var a;return a=l.captain.id,void(u(e),x(a))},downloadDocument:e=>h(e,l.captain),validateDocument:f,isValidationLoading:i}),l.second&&(0,s.jsx)(ea,{participant:l.second,setDocument:e=>{var a;return a=l.second.id,void(u(e),x(a))},downloadDocument:e=>h(e,l.second),validateDocument:f,isValidationLoading:i})]}),o&&j&&m&&(0,s.jsx)(es.s,{userId:m,documentKey:j,id:o.id,file:a(m,j)})]})},ei=e=>{let{participant:l,validateCallback:a,isLoading:n}=e;return(0,s.jsxs)(t.Zb,{children:[(0,s.jsx)(t.Ol,{children:(0,s.jsxs)(t.ll,{children:[l.firstname," ",l.name]})}),(0,s.jsx)(t.aY,{children:l.payment?(0,s.jsx)("p",{children:"L'inscription \xe0 \xe9t\xe9 pay\xe9e"}):(0,s.jsx)(ee.f,{onClick:e=>a(l.id),isLoading:n,label:"Valider le paiement de l'inscription",className:"w-full"})})]})},ec=()=>{let{token:e}=(0,O.a)(),{mutate:l,isPending:a}=(0,T.t7X)();return{validatePayment:(a,s)=>{l({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:a}},{onSettled:()=>{s()}})},isLoading:a}},ed=e=>{let{team:l}=e,{validatePayment:a,isLoading:n}=ec(),{refetchTeam:r}=M(l.id),{refetchTeams:i}=(0,L.y)();function c(e){a(e,()=>{r(),i(),(0,en.Am)({title:"Paiement valid\xe9 avec succ\xe8s"})})}return(0,s.jsxs)("div",{className:"grid xl:grid-cols-2 gap-4 w-full py-6 grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,s.jsx)(ei,{participant:l.captain,validateCallback:c,isLoading:n}),l.second?(0,s.jsx)(ei,{participant:l.second,validateCallback:c,isLoading:n}):(0,s.jsx)(t.Zb,{className:"w-full h-full",children:(0,s.jsx)(t.aY,{className:"w-full h-full mt-3",children:(0,s.jsx)("span",{className:"flex m-auto h-full justify-center items-center text-muted-foreground",children:"Aucun co\xe9quipier n'a \xe9t\xe9 ajout\xe9 \xe0 cette \xe9quipe."})})})]})};var eo=a(19346);let eu=n.forwardRef((e,l)=>{let{className:a,children:t,...n}=e;return(0,s.jsxs)(eo.fC,{ref:l,className:(0,u.cn)("relative overflow-hidden",a),...n,children:[(0,s.jsx)(eo.l_,{className:"h-full w-full rounded-[inherit]",children:t}),(0,s.jsx)(em,{}),(0,s.jsx)(eo.Ns,{})]})});eu.displayName=eo.fC.displayName;let em=n.forwardRef((e,l)=>{let{className:a,orientation:t="vertical",...n}=e;return(0,s.jsx)(eo.gb,{ref:l,orientation:t,className:(0,u.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,s.jsx)(eo.q4,{className:"relative flex-1 rounded-full bg-border"})})});em.displayName=eo.gb.displayName;let ex=e=>{let{isOpened:l,onClose:a,teamId:t}=e,{team:n}=M(t),r=(null==n?void 0:n.id)!==t;return(0,s.jsx)(I.yo,{open:l,onOpenChange:a,children:(0,s.jsxs)(I.ue,{side:"team",children:[(0,s.jsx)(I.Tu,{children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H.O,{className:"h-8 w-32"}),(0,s.jsx)(H.O,{className:"h-4 w-80"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.bC,{children:null==n?void 0:n.name}),(0,s.jsxs)(I.Ei,{children:["Dossier \xe9quipe complet\xe9 \xe0 ",null==n?void 0:n.validation_progress.toFixed(0)," ","%"]})]})}),(0,s.jsx)("div",{className:"p-4"}),(0,s.jsxs)(Z.mQ,{defaultValue:"information",className:"",children:[(0,s.jsxs)(Z.dr,{className:"grid grid-cols-3 w-[500px]",children:[(0,s.jsx)(Z.SP,{value:"information",children:"Informations"}),(0,s.jsx)(Z.SP,{value:"document",children:"Documents"}),(0,s.jsx)(Z.SP,{value:"payment",children:"Paiement"})]}),r?(0,s.jsx)(H.O,{className:"h-96 w-192 mt-6"}):(0,s.jsxs)(eu,{className:"h-[calc(100vh-180px)] w-full mt-4",children:[(0,s.jsx)(Z.nU,{value:"information",className:"mt-0",children:n&&(0,s.jsx)(G,{team:n})}),(0,s.jsx)(Z.nU,{value:"document",className:"mt-0",children:n&&(0,s.jsx)(er,{team:n})}),(0,s.jsx)(Z.nU,{value:"payment",className:"mt-0",children:n&&(0,s.jsx)(ed,{team:n})})]})]})]})})};var eh=()=>{let{isAdmin:e}=(0,q.a)(),{teams:l}=(0,L.y)(),a=(0,k.useRouter)(),r=(0,k.useSearchParams)(),[i,c]=(0,n.useState)(!1),[d,o]=(0,n.useState)(null);if(!e()){let e=new URL(window.location.href),l=e.pathname+e.search;a.replace("/?redirect=".concat(l))}let u=r.get("teamId");return u!==d&&(o(u),c(!!u)),(0,s.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-muted/40",children:[(0,s.jsx)(A.D,{}),(0,s.jsx)("main",{className:"grid flex-1 items-start gap-4 p-4 sm:px-6 sm:py-0 md:gap-8 mt-8",children:(0,s.jsxs)(t.Zb,{children:[(0,s.jsxs)(t.Ol,{children:[(0,s.jsx)(t.ll,{children:"Equipes"}),(0,s.jsx)(t.SZ,{children:"Liste des \xe9quipes enregistr\xe9es"})]}),(0,s.jsx)(t.aY,{children:l&&(0,s.jsx)(R,{data:l,columns:D})})]})}),d&&(0,s.jsx)(ex,{isOpened:i,onClose:function(){c(!1),a.replace("/admin/teams"),o(null)},teamId:d})]})}},33277:function(e,l,a){"use strict";a.d(l,{C:function(){return i}});var s=a(57437);a(2265);var t=a(57742),n=a(1657);let r=(0,t.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:l,variant:a,...t}=e;return(0,s.jsx)("div",{className:(0,n.cn)(r({variant:a}),l),...t})}},38815:function(e,l,a){"use strict";a.d(l,{$:function(){return n}});var s=a(57437),t=a(86909);a(77151);let n=e=>{let{value:l}=e;return(0,s.jsx)("div",{className:"h-3 w-3",children:(0,s.jsx)(t.Ip,{value:l,strokeWidth:15,styles:{root:{},path:{stroke:"black",strokeLinecap:"round"},trail:{},text:{},background:{}}})})}},5887:function(e,l,a){"use strict";a.d(l,{RM:function(){return c},SC:function(){return d},iA:function(){return r},pj:function(){return u},ss:function(){return o},xD:function(){return i}});var s=a(57437),t=a(2265),n=a(1657);let r=t.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:l,className:(0,n.cn)("w-full caption-bottom text-sm",a),...t})})});r.displayName="Table";let i=t.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)("thead",{ref:l,className:(0,n.cn)("[&_tr]:border-b",a),...t})});i.displayName="TableHeader";let c=t.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)("tbody",{ref:l,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...t})});c.displayName="TableBody",t.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)("tfoot",{ref:l,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t})}).displayName="TableFooter";let d=t.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)("tr",{ref:l,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t})});d.displayName="TableRow";let o=t.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)("th",{ref:l,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...t})});o.displayName="TableHead";let u=t.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)("td",{ref:l,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...t})});u.displayName="TableCell",t.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)("caption",{ref:l,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...t})}).displayName="TableCaption"},99497:function(e,l,a){"use strict";a.d(l,{SP:function(){return d},dr:function(){return c},mQ:function(){return i},nU:function(){return o}});var s=a(57437),t=a(2265),n=a(64694),r=a(1657);let i=n.fC,c=t.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)(n.aV,{ref:l,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...t})});c.displayName=n.aV.displayName;let d=t.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)(n.xz,{ref:l,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...t})});d.displayName=n.xz.displayName;let o=t.forwardRef((e,l)=>{let{className:a,...t}=e;return(0,s.jsx)(n.VY,{ref:l,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...t})});o.displayName=n.VY.displayName},1146:function(e,l,a){"use strict";a.d(l,{y:function(){return r}});var s=a(425),t=a(41391),n=a(68855);let r=()=>{let{token:e,isTokenExpired:l}=(0,n.a)(),{isAdmin:a}=(0,t.a)(),{data:r,isLoading:i,refetch:c}=(0,s.kAw)({headers:{Authorization:"Bearer ".concat(e)}},{enabled:a()&&!l(),retry:0,queryHash:"getTeams"});return{teams:r,isLoading:i,refetchTeams:c}}}},function(e){e.O(0,[422,310,651,495,972,631,802,819,122,397,135,108,962,956,267,971,69,744],function(){return e(e.s=88790)}),_N_E=e.O()}]);