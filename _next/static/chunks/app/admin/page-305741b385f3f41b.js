(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{48952:function(e,a,s){Promise.resolve().then(s.bind(s,81062))},81062:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return _}});var l=s(57437),r=s(42729),t=s(53832),i=s(8792),n=s(8967),d=s(33277),c=s(575),o=s(15671),u=s(5887),m=s(77625),x=s(82084);let f=e=>{let{teams:a,isLoading:s}=e;return(0,l.jsxs)(o.Zb,{className:"xl:col-span-2",children:[(0,l.jsxs)(o.Ol,{className:"flex flex-row items-center",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(o.ll,{children:"Equipes"}),(0,l.jsx)(o.SZ,{children:"Aper\xe7u des derni\xe8res \xe9quipes inscrites"})]}),(0,l.jsx)(c.z,{asChild:!0,size:"sm",className:"ml-auto gap-1",children:(0,l.jsxs)(i.default,{href:"/admin/teams",children:["Voir tout",(0,l.jsx)(n.Z,{className:"h-4 w-4"})]})})]}),(0,l.jsx)(o.aY,{children:(0,l.jsxs)(u.iA,{children:[(0,l.jsx)(u.xD,{children:(0,l.jsxs)(u.SC,{children:[(0,l.jsx)(u.ss,{children:"Nom"}),(0,l.jsx)(u.ss,{className:"max-md:hidden",children:"Capitaine"}),(0,l.jsx)(u.ss,{className:"max-md:hidden",children:"Co\xe9quipier"}),(0,l.jsx)(u.ss,{className:"max-md:hidden",children:"Parcours"}),(0,l.jsx)(u.ss,{className:"text-right",children:"Inscription"})]})}),(0,l.jsxs)(u.RM,{children:[s&&(0,l.jsx)(l.Fragment,{children:[...Array(10)].map((e,a)=>(0,l.jsxs)(u.SC,{children:[(0,l.jsx)(u.pj,{children:(0,l.jsx)(m.O,{className:"h-4 w-20"})}),(0,l.jsx)(u.pj,{className:"max-md:hidden",children:(0,l.jsx)(m.O,{className:"h-4 w-20"})}),(0,l.jsx)(u.pj,{className:"max-md:hidden",children:(0,l.jsx)(m.O,{className:"h-4 w-20"})}),(0,l.jsx)(u.pj,{className:"max-md:hidden",children:(0,l.jsx)(m.O,{className:"h-4 w-20"})}),(0,l.jsx)(u.pj,{className:" ml-auto text-right",children:(0,l.jsx)(m.O,{className:"h-4 w-20"})})]},a))}),a&&(0,l.jsx)(l.Fragment,{children:a.slice(0,10).map(e=>{var a,s,r,t;return(0,l.jsxs)(u.SC,{children:[(0,l.jsx)(u.pj,{children:e.name}),(0,l.jsxs)(u.pj,{className:"max-md:hidden",children:[(0,l.jsxs)("div",{className:"font-medium",children:[null===(a=e.captain)||void 0===a?void 0:a.firstname," ",null===(s=e.captain)||void 0===s?void 0:s.name]}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground max-md:hidden",children:null===(r=e.captain)||void 0===r?void 0:r.email})]}),(0,l.jsx)(u.pj,{className:"max-md:hidden",children:e.second?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"font-medium",children:[e.second.firstname," ",e.second.name]}),(0,l.jsx)("div",{className:"text-sm text-muted-foreground max-md:hidden",children:e.second.email})]}):(0,l.jsx)("div",{className:"font-medium",children:"Non renseign\xe9"})}),(0,l.jsx)(u.pj,{className:"max-md:hidden",children:(0,l.jsx)(d.C,{className:"text-xs",variant:"outline",children:(0,x.Jg)(x.n9,null!==(t=e.difficulty)&&void 0!==t?t:void 0)})}),(0,l.jsxs)(u.pj,{className:"text-right",children:[null==e?void 0:e.validation_progress.toFixed(0),"%"]})]},e.id)})})]})]})})]})};var h=s(26587),v=s(74251),j=s(13105),p=s(74994),b=s(64848);let g={cssVars:{light:{primary:"240 5.9% 10%"},dark:{primary:"0 0% 98%"}}},N=e=>{let{data:a}=e,{theme:s}=(0,b.F)();return(0,l.jsxs)("div",{children:[(0,l.jsx)(h.h,{className:"min-h-40 md:min-h-80",children:(0,l.jsx)(v.v,{data:a,children:(0,l.jsx)(j.$,{dataKey:"value",radius:[10,10,0,0],style:{fill:"hsl(".concat(null==g?void 0:g.cssVars["dark"===s?"dark":"light"].primary,")"),opacity:1},children:a.map((e,a)=>(0,l.jsx)(p.b,{},"cell-".concat(a+1)))})})}),(0,l.jsx)("div",{className:"flex flex-row mt-1",children:a.map((e,a)=>(0,l.jsxs)("div",{className:"flex flex-col w-full",children:[(0,l.jsx)("span",{className:"text-center font-semibold",children:e.label}),(0,l.jsx)("span",{className:"text-sm text-muted-foreground w-full text-center",children:e.value})]},"cell-".concat(a+1)))})]})};var y=s(99497),w=s(2265),k=s(94845),S=s(1657);let C=w.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)(k.fC,{className:(0,S.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...r,ref:a,children:(0,l.jsx)(k.bU,{className:(0,S.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});C.displayName=k.fC.displayName;var z=s(55348);let R=e=>{let{teams:a,isLoading:s}=e,[r,t]=(0,w.useState)(!1),{difficultyData:i,meetingPlaceData:n,bikeSizeData:d,tShirtSizeData:c,situationData:u}=function(e,a){var s,l,r,t,i;let n=null==a?void 0:a.filter(a=>e),d=(s=[{value:0,label:"D\xe9couverte"},{value:0,label:"Sportif"},{value:0,label:"Expert"}],e&&s.push({value:0,label:"Non renseign\xe9"}),n&&n.forEach(a=>{"discovery"===a.difficulty?s[0].value++:"sports"===a.difficulty?s[1].value++:"expert"===a.difficulty?s[2].value++:e&&s[3].value++}),s),c=(l=[{value:0,label:"Centrale"},{value:0,label:"Bellecour"},{value:0,label:"Peu importe"}],e&&l.push({value:0,label:"Non renseign\xe9"}),n&&n.forEach(a=>{switch(a.meeting_place){case"centrale":l[0].value++;break;case"bellecour":l[1].value++;break;case"anyway":l[2].value++;break;default:e&&l[3].value++}}),l);return{difficultyData:d,meetingPlaceData:c,bikeSizeData:(r=[{value:0,label:"XS"},{value:0,label:"S"},{value:0,label:"M"},{value:0,label:"L"},{value:0,label:"XL"}],e&&r.push({value:0,label:"N/A"}),n&&n.map(e=>[e.captain,e.second]).flat(1).forEach(a=>{if(a)switch(a.bike_size){case"XS":r[0].value++;break;case"S":r[1].value++;break;case"M":r[2].value++;break;case"L":r[3].value++;break;case"XL":r[4].value++;break;default:e&&r[5].value++}}),r),tShirtSizeData:(t=[{value:0,label:"XS"},{value:0,label:"S"},{value:0,label:"M"},{value:0,label:"L"},{value:0,label:"XL"}],e&&t.push({value:0,label:"N/A"}),n&&n.map(e=>[e.captain,e.second]).flat(1).forEach(a=>{if(a)switch(a.t_shirt_size){case"XS":t[0].value++;break;case"S":t[1].value++;break;case"M":t[2].value++;break;case"L":t[3].value++;break;case"XL":t[4].value++;break;default:e&&t[5].value++}}),t),situationData:(i=[{value:0,label:"Centrale"},{value:0,label:"Autre \xe9cole"},{value:0,label:"Partenaire"},{value:0,label:"Autre"}],e&&i.push({value:0,label:"N/A"}),n&&n.map(e=>[e.captain,e.second]).flat(1).forEach(a=>{if(a){var s;switch((0,z.l)(null!==(s=a.situation)&&void 0!==s?s:void 0)){case"centrale":i[0].value++;break;case"otherschool":i[1].value++;break;case"corporatepartner":i[2].value++;break;case"other":i[3].value++;break;default:e&&i[4].value++}}}),i)}}(r,a);return(0,l.jsxs)(o.Zb,{children:[(0,l.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between",children:[(0,l.jsxs)("div",{className:"grid gap-2",children:[(0,l.jsx)(o.ll,{children:"Statistiques"}),(0,l.jsx)(o.SZ,{children:r?"Porte sur toutes les \xe9quipes":"Ne porte que sur les \xe9quipes valid\xe9es"})]}),(0,l.jsx)("div",{className:"items-center space-x-2 grid gap-2",children:(0,l.jsx)(C,{id:"airplane-mode",checked:r,onCheckedChange:t})})]}),(0,l.jsx)(o.aY,{children:(0,l.jsxs)(y.mQ,{defaultValue:"difficulty",children:[(0,l.jsxs)(y.dr,{className:"grid w-full grid-cols-5 mb-6",children:[(0,l.jsx)(y.SP,{value:"difficulty",children:"Parcours"}),(0,l.jsx)(y.SP,{value:"meetingPlace",children:"D\xe9part"}),(0,l.jsx)(y.SP,{value:"bikeSize",children:"VTT"}),(0,l.jsx)(y.SP,{value:"tShirtSize",children:"T-Shirt"}),(0,l.jsx)(y.SP,{value:"situation",children:"Situation"})]}),(0,l.jsx)(y.nU,{value:"difficulty",children:(0,l.jsx)(N,{data:i})}),(0,l.jsx)(y.nU,{value:"meetingPlace",children:(0,l.jsx)(N,{data:n})}),(0,l.jsx)(y.nU,{value:"bikeSize",children:(0,l.jsx)(N,{data:d})}),(0,l.jsx)(y.nU,{value:"tShirtSize",children:(0,l.jsx)(N,{data:c})}),(0,l.jsx)(y.nU,{value:"situation",children:(0,l.jsx)(N,{data:u})})]})})]})};var O=s(41391),P=s(47907),T=s(1146),_=()=>{var e,a;let{isAdmin:s}=(0,O.a)(),{teams:i,isLoading:n}=(0,T.y)(),d=(0,P.useRouter)(),c=[{title:"Participants inscrits",value:(null==i?void 0:null===(e=i.length)||void 0===e?void 0:e.toString())||"0",description:"personnes ayant commenc\xe9 leur inscription",unit:void 0},{title:"Bin\xf4mes enregistr\xe9s",value:(null==i?void 0:null===(a=i.filter(e=>e.second).length)||void 0===a?void 0:a.toString())||"0",description:"dossier en cours de validation",unit:void 0},{title:"Equipes valid\xe9es",value:"0",description:"dossier valid\xe9 et pay\xe9",unit:void 0},{title:"Cloture des inscriptions",value:"01/09/2024",description:"x jours restants",unit:void 0}];return s()||d.replace("/?redirect=/admin"),(0,l.jsxs)("div",{className:"flex min-h-screen w-full flex-col",children:[(0,l.jsx)(t.D,{}),(0,l.jsxs)("main",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-8",children:[(0,l.jsx)("div",{className:"grid gap-4 md:grid-cols-2 md:gap-8 lg:grid-cols-4",children:c.map(e=>(0,l.jsx)(r.L,{info:e,isLoaded:!n},e.title))}),(0,l.jsxs)("div",{className:"grid gap-4 md:gap-8 lg:grid-cols-2 xl:grid-cols-3",children:[(0,l.jsx)(f,{teams:i,isLoading:n}),(0,l.jsx)(R,{teams:i,isLoading:n})]})]})]})}},53832:function(e,a,s){"use strict";s.d(a,{D:function(){return f}});var l=s(57437),r=s(8792),t=s(12153),i=s(79744),n=s(575),d=s(34645),c=s(50326),o=s(40695),u=s(77625),m=s(41391),x=s(91806);let f=()=>{let{me:e}=(0,m.a)();function a(){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r.default,{href:"#",className:"flex items-center gap-2 text-lg font-semibold md:text-base",children:[(0,l.jsx)(t.Z,{className:"h-6 w-6"}),(0,l.jsx)("span",{className:"sr-only",children:"Acme Inc"})]}),(0,l.jsx)(r.default,{href:"#",className:"text-foreground transition-colors hover:text-foreground",children:"Tableau de bord"}),(0,l.jsx)(r.default,{href:"/admin/teams",className:"text-muted-foreground transition-colors hover:text-foreground",children:"Equipes"})]})}return(0,l.jsxs)("header",{className:"sticky top-0 flex h-16 items-center gap-4 border-b bg-background px-4 md:px-6",children:[(0,l.jsx)("nav",{className:"hidden flex-col gap-6 text-lg font-medium md:flex md:flex-row md:items-center md:gap-5 md:text-sm lg:gap-6 mx-10 max-md:mx-0 w-full",children:a()}),(0,l.jsxs)(c.yo,{children:[(0,l.jsx)(c.aM,{asChild:!0,children:(0,l.jsxs)(n.z,{variant:"outline",size:"icon",className:"shrink-0 md:hidden",children:[(0,l.jsx)(i.Z,{className:"h-5 w-5"}),(0,l.jsx)("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),(0,l.jsx)(c.ue,{side:"left",children:(0,l.jsx)("nav",{className:"grid gap-6 text-lg font-medium",children:a()})})]}),(0,l.jsx)("div",{className:"flex w-full items-center gap-4 md:ml-auto md:gap-2 lg:gap-4  mx-10 max-md:mx-0",children:(0,l.jsxs)("div",{className:"flex flex-row ml-auto",children:[(0,l.jsxs)(d.h_,{children:[(0,l.jsx)(d.$F,{asChild:!0,children:(0,l.jsx)(n.z,{variant:"ghost",children:(null==e?void 0:e.firstname)===void 0||(null==e?void 0:e.name)===void 0?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.O,{className:"w-24 h-6"})}):(0,l.jsx)(l.Fragment,{children:e.firstname+" "+e.name})})}),(0,l.jsx)(d.AW,{align:"end",children:(0,l.jsx)(d.Xi,{children:(0,l.jsx)(x.s,{})})})]}),(0,l.jsx)("div",{className:"w-4"}),(0,l.jsx)(o.U,{})]})})]})}},42729:function(e,a,s){"use strict";s.d(a,{L:function(){return i}});var l=s(57437),r=s(15671),t=s(77625);let i=e=>{let{info:a,isLoaded:s}=e;return(0,l.jsxs)(r.Zb,{children:[(0,l.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(r.ll,{className:"text-sm font-medium",children:s?(0,l.jsx)("span",{children:a.title}):(0,l.jsx)(t.O,{className:"w-24 h-5"})}),a.unit&&(s?a.unit:(0,l.jsx)(t.O,{className:"w-4 h-4 text-muted-foreground"}))]}),(0,l.jsxs)(r.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:s?a.value:(0,l.jsx)(t.O,{className:"w-[150px] h-6"})}),s?(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:a.description}):(0,l.jsx)(t.O,{className:"w-[120px] h-4 mt-1"})]})]},a.title)}},33277:function(e,a,s){"use strict";s.d(a,{C:function(){return n}});var l=s(57437);s(2265);var r=s(57742),t=s(1657);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:a,variant:s,...r}=e;return(0,l.jsx)("div",{className:(0,t.cn)(i({variant:s}),a),...r})}},5887:function(e,a,s){"use strict";s.d(a,{RM:function(){return d},SC:function(){return c},iA:function(){return i},pj:function(){return u},ss:function(){return o},xD:function(){return n}});var l=s(57437),r=s(2265),t=s(1657);let i=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)("div",{className:"relative w-full overflow-auto",children:(0,l.jsx)("table",{ref:a,className:(0,t.cn)("w-full caption-bottom text-sm",s),...r})})});i.displayName="Table";let n=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)("thead",{ref:a,className:(0,t.cn)("[&_tr]:border-b",s),...r})});n.displayName="TableHeader";let d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)("tbody",{ref:a,className:(0,t.cn)("[&_tr:last-child]:border-0",s),...r})});d.displayName="TableBody",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)("tfoot",{ref:a,className:(0,t.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)("tr",{ref:a,className:(0,t.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});c.displayName="TableRow";let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)("th",{ref:a,className:(0,t.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});o.displayName="TableHead";let u=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)("td",{ref:a,className:(0,t.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});u.displayName="TableCell",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)("caption",{ref:a,className:(0,t.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption"},99497:function(e,a,s){"use strict";s.d(a,{SP:function(){return c},dr:function(){return d},mQ:function(){return n},nU:function(){return o}});var l=s(57437),r=s(2265),t=s(64694),i=s(1657);let n=t.fC,d=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)(t.aV,{ref:a,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r})});d.displayName=t.aV.displayName;let c=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)(t.xz,{ref:a,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r})});c.displayName=t.xz.displayName;let o=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,l.jsx)(t.VY,{ref:a,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r})});o.displayName=t.VY.displayName},1146:function(e,a,s){"use strict";s.d(a,{y:function(){return i}});var l=s(425),r=s(41391),t=s(68855);let i=()=>{let{token:e}=(0,t.a)(),{isAdmin:a}=(0,r.a)(),{data:s,isLoading:i,refetch:n}=(0,l.kAw)({headers:{Authorization:"Bearer ".concat(e)}},{enabled:a()&&null!==e,retry:0,queryHash:"getTeams"});return{teams:s,isLoading:i,refetchTeams:n}}}},function(e){e.O(0,[422,50,991,701,104,147,244,971,69,744],function(){return e(e.s=48952)}),_N_E=e.O()}]);