(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{51483:function(e,n,i){Promise.resolve().then(i.bind(i,18095))},18095:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return X}});var r=i(57437),s=i(85115),l=i(89733),t=i(2265),a=i(77209),d=i(48185);let o=e=>{let{label:n,children:i}=e;return(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,r.jsx)(d.ll,{className:"text-sm font-medium",children:n})}),(0,r.jsx)(d.aY,{children:i})]})};var c=i(93363),u=i(31014),m=i(39343),x=i(59772),p=i(59805),h=i(44032);let f=()=>{var e,n;let{information:i,updateInformation:s}=(0,p.u)(),[d,f]=(0,t.useState)(!1),[v,g]=(0,t.useState)(!1),j=x.z.object({email:x.z.string().email({message:"Veuillez renseigner une adresse email valide"})}),b=(0,m.cI)({resolver:(0,u.F)(j),defaultValues:{email:null!==(e=null==i?void 0:i.contact)&&void 0!==e?e:void 0}});return(0,r.jsx)(c.l0,{...b,children:(0,r.jsx)("form",{onSubmit:b.handleSubmit(function(e){g(!0),s({...i,contact:e.email},()=>{g(!1),f(!1),b.reset({email:e.email})})}),children:(0,r.jsx)(o,{label:"Contact",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Wi,{control:b.control,name:"email",render:e=>{let{field:n}=e;return(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"items-center gap-4",children:[(0,r.jsx)(c.NI,{children:(0,r.jsx)(a.I,{...n})}),(0,r.jsx)(c.zG,{})]})})}}),(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(l.z,{variant:"outline",className:"mt-2 mr-2 w-[120px]",onClick:()=>{f(!1)},children:"Annuler"}),(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",type:"submit",label:"Valider",isLoading:v})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:null!==(n=null==i?void 0:i.contact)&&void 0!==n?n:(0,r.jsx)("span",{children:"Aucun contact"})}),(0,r.jsx)(l.z,{variant:"outline",className:"mt-4 w-[120px]",type:"button",onClick:function(){f(!d)},children:"Modifier"})]})})})})};var v=i(84980),g=i(40133);let j=()=>{let{token:e,userId:n}=(0,g.a)(),{data:i,isLoading:r,refetch:s}=(0,v.L4N)({headers:{Authorization:"Bearer ".concat(e)}},{enabled:null!==n,retry:0,queryHash:"getRaidDriveFolder"}),{mutate:l,isPending:t}=(0,v.RoB)({});return{driveFolder:i,isLoading:r,refetchDriveFolder:s,updateDriveFolder:(n,i)=>{l({body:n,headers:{Authorization:"Bearer ".concat(e)}},{onSettled:()=>{s(),i()}})},isUpdateLoading:t}},b=()=>{let{driveFolder:e,updateDriveFolder:n}=j(),[i,s]=(0,t.useState)(!1),[d,p]=(0,t.useState)(!1),f=x.z.object({parent_folder_id:x.z.string().min(1,{message:"Veuillez renseigner un dossier de drive"})}),v=(0,m.cI)({resolver:(0,u.F)(f),defaultValues:{parent_folder_id:(null==e?void 0:e.parent_folder_id)?"https://drive.google.com/drive/u/0/folders/"+(null==e?void 0:e.parent_folder_id):void 0}});return(0,r.jsx)(c.l0,{...v,children:(0,r.jsx)("form",{onSubmit:v.handleSubmit(function(e){p(!0);let i=e.parent_folder_id.split("/folders/").pop();i?(i.endsWith("/")&&(i=i.slice(0,-1)),n({parent_folder_id:i},()=>{p(!1),s(!1),v.reset({parent_folder_id:e.parent_folder_id})})):p(!1)}),children:(0,r.jsx)(o,{label:"Lien du dossier Drive",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Wi,{control:v.control,name:"parent_folder_id",render:e=>{let{field:n}=e;return(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"items-center gap-4",children:[(0,r.jsx)(c.NI,{children:(0,r.jsx)(a.I,{...n})}),(0,r.jsx)(c.zG,{})]})})}}),(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(l.z,{variant:"outline",className:"mt-2 mr-2 w-[120px]",onClick:()=>{s(!1)},children:"Annuler"}),(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",type:"submit",label:"Valider",isLoading:d})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"".concat((null==e?void 0:e.parent_folder_id)&&"text-green-700 hover:text-green-800 underline"," text-2xl font-bold h-8"),children:(null==e?void 0:e.parent_folder_id)?(0,r.jsx)("a",{target:"_blank",href:"https://drive.google.com/drive/u/0/folders/"+(null==e?void 0:e.parent_folder_id),children:"Lien du dossier Drive"}):(0,r.jsx)("span",{children:"Aucun lien"})}),(0,r.jsx)(l.z,{variant:"outline",className:"mt-4 w-[120px]",type:"button",onClick:function(){s(!i)},children:"Modifier"})]})})})})};var _=i(52934),N=i(54662),w=i(39589),z=i.n(w),y=i(35265),C=i(54008);let S=()=>{var e,n,i,s,a,d,f,v,g,j,b,w,S,F,V,k,I,Q,D,L;let P;let{information:R,updateInformation:A}=(0,p.u)(),[M,W]=(0,t.useState)(!1),[Z,J]=(0,t.useState)(!1),q=x.z.object({president:x.z.object({firstname:x.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:x.z.string().min(1,{message:"Veuillez renseigner votre nom"}),phone:x.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).refine(e=>"+33"===e||""===e||!(e.length<10)&&!(e.length>14),{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"})}).partial(),volunteer_responsible:x.z.object({firstname:x.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:x.z.string().min(1,{message:"Veuillez renseigner votre nom"}),phone:x.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).refine(e=>"+33"===e||""===e||!(e.length<10)&&!(e.length>14),{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"})}).partial(),security_responsible:x.z.object({firstname:x.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:x.z.string().min(1,{message:"Veuillez renseigner votre nom"}),phone:x.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).refine(e=>"+33"===e||""===e||!(e.length<10)&&!(e.length>14),{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"})}).partial(),rescue:x.z.object({phone:x.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).refine(e=>"+33"===e||""===e||!(e.length<10)&&!(e.length>14),{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"})}).partial()});function G(e){return e?e.startsWith("0")?"+33 ".concat(e.slice(1)):e:""}let O=(0,m.cI)({resolver:(0,u.F)(q),defaultValues:{president:{firstname:null!==(b=null==R?void 0:null===(e=R.president)||void 0===e?void 0:e.firstname)&&void 0!==b?b:void 0,name:null!==(w=null==R?void 0:null===(n=R.president)||void 0===n?void 0:n.name)&&void 0!==w?w:void 0,phone:G(null!==(S=null==R?void 0:null===(i=R.president)||void 0===i?void 0:i.phone)&&void 0!==S?S:"")},volunteer_responsible:{firstname:null!==(F=null==R?void 0:null===(s=R.volunteer_responsible)||void 0===s?void 0:s.firstname)&&void 0!==F?F:void 0,name:null!==(V=null==R?void 0:null===(a=R.volunteer_responsible)||void 0===a?void 0:a.name)&&void 0!==V?V:void 0,phone:G(null!==(k=null==R?void 0:null===(d=R.volunteer_responsible)||void 0===d?void 0:d.phone)&&void 0!==k?k:"")},security_responsible:{firstname:null!==(I=null==R?void 0:null===(f=R.security_responsible)||void 0===f?void 0:f.firstname)&&void 0!==I?I:void 0,name:null!==(Q=null==R?void 0:null===(v=R.security_responsible)||void 0===v?void 0:v.name)&&void 0!==Q?Q:void 0,phone:G(null!==(D=null==R?void 0:null===(g=R.security_responsible)||void 0===g?void 0:g.phone)&&void 0!==D?D:"")},rescue:{phone:G(null!==(L=null==R?void 0:null===(j=R.rescue)||void 0===j?void 0:j.phone)&&void 0!==L?L:"")}}}),T=()=>O.watch("president.firstname")&&O.watch("president.name")&&O.watch("president.phone"),B=()=>O.watch("volunteer_responsible.firstname")&&O.watch("volunteer_responsible.name")&&O.watch("volunteer_responsible.phone"),E=()=>O.watch("security_responsible.firstname")&&O.watch("security_responsible.name")&&O.watch("security_responsible.phone"),U=()=>O.watch("rescue.phone");return(0,r.jsxs)(N.Vq,{open:Z,onOpenChange:J,children:[(0,r.jsxs)(o,{label:"Personnes \xe0 contacter en cas d'urgence",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"".concat((P=0,T()&&P++,B()&&P++,E()&&P++,U()&&P++,P),"/4 remplis")}),(0,r.jsx)(N.hg,{asChild:!0,children:(0,r.jsx)(l.z,{variant:"outline",className:"mt-4 w-[120px]",type:"button",onClick:function(){J(e=>!e)},children:"Modifier"})})]}),(0,r.jsxs)(N.cZ,{className:"sm:max-w-[600px]",children:[(0,r.jsxs)(N.fK,{children:[(0,r.jsx)(N.$N,{children:"Contacts importants"}),(0,r.jsx)(N.Be,{children:"Les personnes que les participants doivent contacter en cas d'urgence."})]}),(0,r.jsx)(c.l0,{...O,children:(0,r.jsxs)("form",{onSubmit:O.handleSubmit(function(e){W(!0),A({...R,president:{firstname:e.president.firstname,name:e.president.name,phone:e.president.phone},volunteer_responsible:{firstname:e.volunteer_responsible.firstname,name:e.volunteer_responsible.name,phone:e.volunteer_responsible.phone},security_responsible:{firstname:e.security_responsible.firstname,name:e.security_responsible.name,phone:e.security_responsible.phone},rescue:{phone:e.rescue.phone}},()=>{W(!1),J(!1),O.reset({president:{firstname:e.president.firstname,name:e.president.name,phone:G(e.president.phone)},volunteer_responsible:{firstname:e.volunteer_responsible.firstname,name:e.volunteer_responsible.name,phone:G(e.volunteer_responsible.phone)},security_responsible:{firstname:e.security_responsible.firstname,name:e.security_responsible.name,phone:G(e.security_responsible.phone)},rescue:{phone:G(e.rescue.phone)}})})}),children:[(0,r.jsxs)(y.UQ,{type:"single",collapsible:!0,children:[(0,r.jsxs)(y.Qd,{value:"president",children:[(0,r.jsx)(y.o4,{children:(0,r.jsxs)("div",{className:"flex flex-row mr-auto items-center",children:[T()&&(0,r.jsx)(C.dZ6,{className:"mr-4"}),"Pr\xe9sident\xb7e"]})}),(0,r.jsx)(y.vF,{children:(0,r.jsxs)("div",{className:"grid gap-6 py-4 mr-2",children:[(0,r.jsx)(_.l,{form:O,label:"Pr\xe9nom",id:"president.firstname",placeholder:"Pr\xe9nom"}),(0,r.jsx)(_.l,{form:O,label:"Nom",id:"president.name",placeholder:"Nom"}),(0,r.jsx)(c.Wi,{control:O.control,name:"president.phone",render:()=>(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,r.jsx)(c.lX,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,r.jsxs)("div",{className:"col-span-4",children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(m.Qr,{name:"president.phone",control:O.control,render:e=>{let{field:{onChange:n,value:i}}=e;return(0,r.jsx)(z(),{value:i,onChange:n,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})})]})})]}),(0,r.jsxs)(y.Qd,{value:"volunteer_responsible",children:[(0,r.jsx)(y.o4,{children:(0,r.jsxs)("div",{className:"flex flex-row mr-auto items-center",children:[B()&&(0,r.jsx)(C.dZ6,{className:"mr-4"}),"Responsable B\xe9n\xe9vole"]})}),(0,r.jsx)(y.vF,{children:(0,r.jsxs)("div",{className:"grid gap-6 py-4 mr-2",children:[(0,r.jsx)(_.l,{form:O,label:"Pr\xe9nom",id:"volunteer_responsible.firstname",placeholder:"Pr\xe9nom"}),(0,r.jsx)(_.l,{form:O,label:"Nom",id:"volunteer_responsible.name",placeholder:"Nom"}),(0,r.jsx)(c.Wi,{control:O.control,name:"volunteer_responsible.phone",render:()=>(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,r.jsx)(c.lX,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,r.jsxs)("div",{className:"col-span-4",children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(m.Qr,{name:"volunteer_responsible.phone",control:O.control,render:e=>{let{field:{onChange:n,value:i}}=e;return(0,r.jsx)(z(),{value:i,onChange:n,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})})]})})]}),(0,r.jsxs)(y.Qd,{value:"security_responsible",children:[(0,r.jsx)(y.o4,{children:(0,r.jsxs)("div",{className:"flex flex-row mr-auto items-center",children:[E()&&(0,r.jsx)(C.dZ6,{className:"mr-4"}),"Responsable S\xe9curit\xe9"]})}),(0,r.jsx)(y.vF,{children:(0,r.jsxs)("div",{className:"grid gap-6 py-4 mr-2",children:[(0,r.jsx)(_.l,{form:O,label:"Pr\xe9nom",id:"security_responsible.firstname",placeholder:"Pr\xe9nom"}),(0,r.jsx)(_.l,{form:O,label:"Nom",id:"security_responsible.name",placeholder:"Nom"}),(0,r.jsx)(c.Wi,{control:O.control,name:"security_responsible.phone",render:()=>(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,r.jsx)(c.lX,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,r.jsxs)("div",{className:"col-span-4",children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(m.Qr,{name:"security_responsible.phone",control:O.control,render:e=>{let{field:{onChange:n,value:i}}=e;return(0,r.jsx)(z(),{value:i,onChange:n,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})})]})})]}),(0,r.jsxs)(y.Qd,{value:"rescue",children:[(0,r.jsx)(y.o4,{children:(0,r.jsxs)("div",{className:"flex flex-row mr-auto items-center",children:[U()&&(0,r.jsx)(C.dZ6,{className:"mr-4"}),"Secouristes"]})}),(0,r.jsx)(y.vF,{children:(0,r.jsx)("div",{className:"grid gap-6 py-4 mr-2",children:(0,r.jsx)(c.Wi,{control:O.control,name:"rescue.phone",render:()=>(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,r.jsx)(c.lX,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,r.jsxs)("div",{className:"col-span-4",children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(m.Qr,{name:"rescue.phone",control:O.control,render:e=>{let{field:{onChange:n,value:i}}=e;return(0,r.jsx)(z(),{value:i,onChange:n,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})})})})]})]}),(0,r.jsx)(N.cN,{children:(0,r.jsx)(h.f,{isLoading:M,label:"Valider",type:"submit",className:"w-full mt-4"})})]})})]})]})};var F=i(74546),V=i(86465),k=i(88835),I=i(39202);let Q=()=>{let{information:e,updateInformation:n}=(0,p.u)(),[i,s]=(0,t.useState)(!1),[a,d]=(0,t.useState)(!1),[c,u]=(0,t.useState)((null==e?void 0:e.raid_registering_end_date)?(0,F.Q)(e.raid_registering_end_date):void 0);function m(){i?(d(!0),n({...e,raid_registering_end_date:(0,I.uv)(c)},()=>{d(!1),s(!1)})):s(!i)}return(0,r.jsx)(o,{label:"Date de la cl\xf4ture des inscriptions",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.M,{date:c,setDate:u,fromDate:(0,V.B)(new Date,-1),toDate:(0,V.B)(new Date,1)}),(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(l.z,{variant:"outline",className:"mt-2 mr-2 w-[120px]",onClick:()=>{s(!1)},children:"Annuler"}),(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",isLoading:a,onClick:m,label:"Valider"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.raid_registering_end_date)?(0,I.p6)(e.raid_registering_end_date):(0,r.jsx)("span",{children:"Date non d\xe9finie"})}),(0,r.jsx)(l.z,{variant:"outline",className:"mt-4 w-[120px]",onClick:m,type:"button",children:"Modifier"})]})})};var D=i(24241),L=i(13415),P=i(37440),R=i(21413),A=i(69081);function M(e){let{dateRange:n,setDateRange:i,defaultDate:s}=e;return(0,r.jsxs)(R.J2,{children:[(0,r.jsx)(R.xo,{asChild:!0,children:(0,r.jsxs)(l.z,{variant:"outline",className:(0,P.cn)("w-full justify-start text-left font-normal",!n&&"text-muted-foreground"),type:"button",children:[(0,r.jsx)(D.Z,{className:"mr-2 h-4 w-4"}),n&&n.from&&n.to?(0,I._Q)(n.from.toString(),n.to.toString()):(0,r.jsx)("span",{children:"S\xe9lectionner une p\xe9riode"})]})}),(0,r.jsx)(R.yk,{className:"w-auto p-0",children:(0,r.jsx)(A.f,{mode:"range",selected:n,onSelect:i,locale:L.fr,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1,defaultMonth:s,initialFocus:!0})})]})}let W=()=>{let{information:e,updateInformation:n}=(0,p.u)(),[i,s]=(0,t.useState)(!1),[a,d]=(0,t.useState)(!1),[c,u]=(0,t.useState)((null==e?void 0:e.raid_start_date)&&(null==e?void 0:e.raid_end_date)?{from:(0,F.Q)(e.raid_start_date),to:(0,F.Q)(e.raid_end_date)}:void 0);function m(){i?(d(!0),n({...e,raid_start_date:(0,I.uv)(null==c?void 0:c.from),raid_end_date:(0,I.uv)(null==c?void 0:c.to)},()=>{d(!1),s(!1)})):s(!i)}return(0,r.jsx)(o,{label:"Date du raid",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M,{dateRange:c,setDateRange:u}),(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(l.z,{variant:"outline",className:"mt-2 mr-2 w-[120px]",onClick:()=>{s(!1)},children:"Annuler"}),(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",onClick:m,isLoading:a,label:"Valider"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.raid_start_date)&&(null==e?void 0:e.raid_end_date)?(0,I._Q)(e.raid_start_date.toString(),e.raid_end_date.toString()):(0,r.jsx)("span",{children:"P\xe9riode non d\xe9finie"})}),(0,r.jsx)(l.z,{variant:"outline",className:"mt-4 w-[120px]",onClick:m,children:"Modifier"})]})})};var Z=i(36136);let J=e=>{var n,i;let{information:s}=e,{updateInformation:a}=(0,p.u)(),[d,f]=(0,t.useState)(!1),v=x.z.object({raid_information:x.z.object({name:x.z.string(),id:x.z.string(),type:x.z.string(),updated:x.z.boolean()}).partial()}),g=(0,m.cI)({resolver:(0,u.F)(v),defaultValues:{raid_information:{name:null!==(n=s.raid_information_id)&&void 0!==n?n:void 0,id:null!==(i=s.raid_information_id)&&void 0!==i?i:void 0,type:"raid_information"}}}),[j,b]=(0,t.useState)(!1),[_,w]=(0,t.useState)(!1);return(0,r.jsx)(c.l0,{...g,children:(0,r.jsx)("form",{onSubmit:g.handleSubmit(function(e){if(f(!0),!e.raid_information.id){f(!1);return}a({...s,raid_information_id:e.raid_information.id},()=>{f(!1),g.reset({raid_information:e.raid_information})})}),children:(0,r.jsxs)(o,{label:"Fiche d'information",children:[(0,r.jsx)(c.Wi,{control:g.control,name:"raid_information",render:e=>{var n,i;let{field:s}=e;return(0,r.jsx)(c.xJ,{children:(0,r.jsx)("div",{className:"items-center gap-4",children:(0,r.jsx)(c.NI,{children:(0,r.jsxs)(N.Vq,{open:j,onOpenChange:b,children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(N.hg,{asChild:!0,children:(0,r.jsx)(l.z,{variant:"outline",className:"col-span-4 w-full",disabled:_,children:(0,r.jsx)("div",{className:"flex flex-row items-start w-full",children:(0,r.jsx)(r.Fragment,{children:(null===(n=s.value)||void 0===n?void 0:n.id)?(0,r.jsx)("span",{className:"text-gray-500 overflow-hidden",children:s.value.id?"Fiche d'information":"Aucun fichier s\xe9l\xe9ctionn\xe9"}):(0,r.jsx)("span",{className:"font-semibold  mr-6",children:"Choisir un fichier"})})})})}),(0,r.jsxs)(N.cZ,{className:"md:max-w-2xl top-1/2",children:[(0,r.jsx)(N.fK,{children:(0,r.jsx)(N.$N,{className:"text-red sm:text-lg",children:"R\xe8glement du raid"})}),(0,r.jsx)(Z.e,{setIsOpen:b,setIsUploading:w,field:s,fileType:"raid_information",participantId:"admin",documentId:null===(i=s.value)||void 0===i?void 0:i.id})]})]})})})})}}),(0,r.jsx)("div",{className:"flex flex-row",children:(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",type:"submit",label:"Modifier",isLoading:d,disabled:_||!g.formState.isDirty})})]})})})};var q=i(31283),G=i(42001);let O=e=>{let{onChange:n,value:i}=e;return(0,r.jsx)(G.ZP,{intlConfig:{locale:"fr-FR",currency:"EUR"},className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",onValueChange:n,allowNegativeValue:!1,value:i})},T=()=>{let{price:e,updatePrice:n}=(0,q.k)(),[i,s]=(0,t.useState)(!1),[a,d]=(0,t.useState)(!1),p=x.z.object({student_price:x.z.number().positive()}),f=(0,m.cI)({resolver:(0,u.F)(p),defaultValues:{student_price:(null==e?void 0:e.student_price)?e.student_price/100:void 0}});return(0,r.jsx)(c.l0,{...f,children:(0,r.jsx)("form",{onSubmit:f.handleSubmit(function(i){d(!0),n({...e,student_price:100*i.student_price},()=>{d(!1),s(!1),f.reset({student_price:i.student_price})})}),children:(0,r.jsx)(o,{label:"Prix du Raid",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Wi,{control:f.control,name:"student_price",render:e=>{let{field:n}=e;return(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"items-center gap-4",children:[(0,r.jsx)(c.NI,{children:(0,r.jsx)(O,{onChange:(e,i,r)=>n.onChange(null==r?void 0:r.float),value:n.value})}),(0,r.jsx)(c.zG,{})]})})}}),(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(l.z,{variant:"outline",className:"mt-2 mr-2 w-[120px]",onClick:()=>{s(!1)},children:"Annuler"}),(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",type:"submit",label:"Valider",isLoading:a})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.student_price)?"".concat((e.student_price/100).toFixed(2)," €"):(0,r.jsx)("span",{children:"Prix non fix\xe9"})}),(0,r.jsx)(l.z,{variant:"outline",className:"mt-4 w-[120px]",type:"button",onClick:function(){s(!i)},children:"Modifier"})]})})})})},B=e=>{var n,i;let{information:s}=e,{updateInformation:a}=(0,p.u)(),[d,f]=(0,t.useState)(!1),v=x.z.object({raid_rules:x.z.object({name:x.z.string(),id:x.z.string(),type:x.z.string(),updated:x.z.boolean()}).partial()}),g=(0,m.cI)({resolver:(0,u.F)(v),defaultValues:{raid_rules:{name:null!==(n=s.raid_rules_id)&&void 0!==n?n:void 0,id:null!==(i=s.raid_rules_id)&&void 0!==i?i:void 0,type:"raid_rules"}}}),[j,b]=(0,t.useState)(!1),[_,w]=(0,t.useState)(!1);return(0,r.jsx)(c.l0,{...g,children:(0,r.jsx)("form",{onSubmit:g.handleSubmit(function(e){if(f(!0),!e.raid_rules.id){f(!1);return}a({...s,raid_rules_id:e.raid_rules.id},()=>{f(!1),g.reset({raid_rules:e.raid_rules})})}),children:(0,r.jsxs)(o,{label:"R\xe9glement du Raid",children:[(0,r.jsx)(c.Wi,{control:g.control,name:"raid_rules",render:e=>{var n,i;let{field:s}=e;return(0,r.jsx)(c.xJ,{children:(0,r.jsx)("div",{className:"items-center gap-4",children:(0,r.jsx)(c.NI,{children:(0,r.jsxs)(N.Vq,{open:j,onOpenChange:b,children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(N.hg,{asChild:!0,children:(0,r.jsx)(l.z,{variant:"outline",className:"col-span-4 w-full",disabled:_,children:(0,r.jsx)("div",{className:"flex flex-row items-start w-full",children:(0,r.jsx)(r.Fragment,{children:(null===(n=s.value)||void 0===n?void 0:n.id)?(0,r.jsx)("span",{className:"text-gray-500 overflow-hidden",children:s.value.id?"R\xe9glement du raid":"Aucun fichier s\xe9l\xe9ctionn\xe9"}):(0,r.jsx)("span",{className:"font-semibold  mr-6",children:"Choisir un fichier"})})})})}),(0,r.jsxs)(N.cZ,{className:"md:max-w-2xl top-1/2",children:[(0,r.jsx)(N.fK,{children:(0,r.jsx)(N.$N,{className:"text-red sm:text-lg",children:"R\xe8glement du raid"})}),(0,r.jsx)(Z.e,{setIsOpen:b,setIsUploading:w,field:s,fileType:"raid_rules",participantId:"admin",documentId:null===(i=s.value)||void 0===i?void 0:i.id})]})]})})})})}}),(0,r.jsx)("div",{className:"flex flex-row",children:(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",type:"submit",label:"Modifier",isLoading:d,disabled:_||!g.formState.isDirty})})]})})})},E=()=>{let{price:e,updatePrice:n}=(0,q.k)(),[i,s]=(0,t.useState)(!1),[a,d]=(0,t.useState)(!1),p=x.z.object({t_shirt_price:x.z.number().positive()}),f=(0,m.cI)({resolver:(0,u.F)(p),defaultValues:{t_shirt_price:(null==e?void 0:e.t_shirt_price)?e.t_shirt_price/100:void 0}});return(0,r.jsx)(c.l0,{...f,children:(0,r.jsx)("form",{onSubmit:f.handleSubmit(function(i){d(!0),n({...e,t_shirt_price:100*i.t_shirt_price},()=>{d(!1),s(!1),f.reset({t_shirt_price:i.t_shirt_price})})}),children:(0,r.jsx)(o,{label:"Prix du T-Shirt",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Wi,{control:f.control,name:"t_shirt_price",render:e=>{let{field:n}=e;return(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"items-center gap-4",children:[(0,r.jsx)(c.NI,{children:(0,r.jsx)(O,{onChange:(e,i,r)=>n.onChange(null==r?void 0:r.float),value:n.value})}),(0,r.jsx)(c.zG,{})]})})}}),(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(l.z,{variant:"outline",className:"mt-2 mr-2 w-[120px]",onClick:()=>{s(!1)},children:"Annuler"}),(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",type:"submit",label:"Valider",isLoading:a})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.t_shirt_price)?"".concat((e.t_shirt_price/100).toFixed(2)," €"):(0,r.jsx)("span",{children:"Prix non fix\xe9"})}),(0,r.jsx)(l.z,{variant:"outline",className:"mt-4 w-[120px]",type:"button",onClick:function(){s(!i)},children:"Modifier"})]})})})})};var U=i(17042),Y=i(16463),X=()=>{let{isAdmin:e}=(0,U.a)(),n=(0,Y.useRouter)(),{information:i}=(0,p.u)();if(!e()){let e=new URL(window.location.href),i=e.pathname+e.search;n.replace("/?redirect=".concat(i))}return(0,r.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-muted/40",children:[(0,r.jsx)(s.D,{}),(0,r.jsx)("main",{className:"grid flex-1 items-start gap-4 p-4 sm:px-6 sm:py-0 md:gap-8 mt-8",children:(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{children:"Informations"})}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)(y.UQ,{type:"multiple",defaultValue:["date","price","contact","files"],children:[(0,r.jsxs)(y.Qd,{value:"date",children:[(0,r.jsx)(y.o4,{children:"Dates"}),(0,r.jsx)(y.vF,{children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 xl:grid-cols-3 gap-4 w-full grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,r.jsx)(Q,{}),(0,r.jsx)(W,{})]})})]}),(0,r.jsxs)(y.Qd,{value:"price",children:[(0,r.jsx)(y.o4,{children:"Prix"}),(0,r.jsx)(y.vF,{children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 xl:grid-cols-3 gap-4 w-full grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,r.jsx)(T,{}),(0,r.jsx)(E,{})]})})]}),(0,r.jsxs)(y.Qd,{value:"contact",children:[(0,r.jsx)(y.o4,{children:"Contact"}),(0,r.jsx)(y.vF,{children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 xl:grid-cols-3 gap-4 w-full grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,r.jsx)(f,{}),(0,r.jsx)(S,{})]})})]}),(0,r.jsxs)(y.Qd,{value:"files",children:[(0,r.jsx)(y.o4,{children:"Fichiers"}),(0,r.jsx)(y.vF,{children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 xl:grid-cols-3 gap-4 w-full grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,r.jsx)(b,{}),i&&(0,r.jsx)(B,{information:i}),i&&(0,r.jsx)(J,{information:i})]})})]})]})})]})})]})}},85115:function(e,n,i){"use strict";i.d(n,{D:function(){return x}});var r=i(57437),s=i(87138),l=i(42873),t=i(89733),a=i(19706),d=i(55936),o=i(60603),c=i(2183),u=i(17042),m=i(24729);let x=()=>{let{me:e}=(0,u.a)(),n=window.location.pathname;function i(e,i){let l=n===e;return(0,r.jsx)(s.default,{href:e,className:"".concat(l?"text-foreground":"text-muted-foreground"," transition-colors hover:text-foreground"),children:i})}function x(){return(0,r.jsxs)(r.Fragment,{children:[i("/admin","Tableau de bord"),i("/admin/teams","Equipes"),i("/admin/information","Informations")]})}return(0,r.jsxs)("header",{className:"sticky top-0 flex h-16 items-center gap-4 border-b bg-background px-4 md:px-6 z-10",children:[(0,r.jsx)("nav",{className:"hidden flex-col gap-6 text-lg font-medium md:flex md:flex-row md:items-center md:gap-5 md:text-sm lg:gap-6 mx-10 max-md:mx-0 w-full",children:x()}),(0,r.jsxs)(d.yo,{children:[(0,r.jsx)(d.aM,{asChild:!0,children:(0,r.jsxs)(t.z,{variant:"outline",size:"icon",className:"shrink-0 md:hidden",children:[(0,r.jsx)(l.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),(0,r.jsx)(d.ue,{side:"left",children:(0,r.jsx)("nav",{className:"grid gap-6 text-lg font-medium",children:x()})})]}),(0,r.jsx)("div",{className:"flex w-full items-center gap-4 md:ml-auto md:gap-2 lg:gap-4  mx-10 max-md:mx-0",children:(0,r.jsx)("div",{className:"flex flex-row ml-auto",children:(0,r.jsx)(a.nm,{children:(0,r.jsxs)(a.QP,{children:[(0,r.jsx)(a.rQ,{asChild:!0,children:(0,r.jsx)(t.z,{variant:"ghost",children:(null==e?void 0:e.firstname)===void 0||(null==e?void 0:e.name)===void 0?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c.O,{className:"w-24 h-6"})}):(0,r.jsx)(r.Fragment,{children:e.firstname+" "+e.name})})}),(0,r.jsxs)(a.uE,{align:"end",children:[(0,r.jsx)(o.U,{}),(0,r.jsx)(a.yE,{}),(0,r.jsx)(m.s,{})]})]})})})})]})}}},function(e){e.O(0,[74,310,422,651,756,629,792,547,974,336,486,543,840,425,118,59,971,23,744],function(){return e(e.s=51483)}),_N_E=e.O()}]);