(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30],{51483:function(e,n,i){Promise.resolve().then(i.bind(i,93054))},42873:function(e,n,i){"use strict";i.d(n,{Z:function(){return r}});/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,i(78030).Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},93054:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return B}});var r=i(57437),l=i(85115),s=i(89733),t=i(2265),a=i(77209),d=i(48185);let o=e=>{let{label:n,children:i}=e;return(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,r.jsx)(d.ll,{className:"text-sm font-medium",children:n})}),(0,r.jsx)(d.aY,{children:i})]})};var c=i(93363),m=i(31014),u=i(39343),x=i(59772),p=i(59805),h=i(44032);let f=()=>{var e,n;let{information:i,updateInformation:l}=(0,p.u)(),[d,f]=(0,t.useState)(!1),[v,g]=(0,t.useState)(!1),j=x.z.object({email:x.z.string().email({message:"Veuillez renseigner une adresse email valide"})}),b=(0,u.cI)({resolver:(0,m.F)(j),defaultValues:{email:null!==(e=null==i?void 0:i.contact)&&void 0!==e?e:void 0}});return(0,r.jsx)(c.l0,{...b,children:(0,r.jsx)("form",{onSubmit:b.handleSubmit(function(e){g(!0),l({...i,contact:e.email},()=>{g(!1),f(!1),b.reset({email:e.email})})}),children:(0,r.jsx)(o,{label:"Contact",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Wi,{control:b.control,name:"email",render:e=>{let{field:n}=e;return(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"items-center gap-4",children:[(0,r.jsx)(c.NI,{children:(0,r.jsx)(a.I,{...n})}),(0,r.jsx)(c.zG,{})]})})}}),(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(s.z,{variant:"outline",className:"mt-2 mr-2 w-[120px]",onClick:()=>{f(!1)},children:"Annuler"}),(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",type:"submit",label:"Valider",isLoading:v})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:null!==(n=null==i?void 0:i.contact)&&void 0!==n?n:(0,r.jsx)("span",{children:"Aucun contact"})}),(0,r.jsx)(s.z,{variant:"outline",className:"mt-4 w-[120px]",type:"button",onClick:function(){f(!d)},children:"Modifier"})]})})})})};var v=i(84980),g=i(40133);let j=()=>{let{token:e,userId:n}=(0,g.a)(),{data:i,isLoading:r,refetch:l}=(0,v.L4N)({headers:{Authorization:"Bearer ".concat(e)}},{enabled:null!==n,retry:0,queryHash:"getRaidDriveFolder"}),{mutate:s,isPending:t}=(0,v.RoB)({});return{driveFolder:i,isLoading:r,refetchDriveFolder:l,updateDriveFolder:(n,i)=>{s({body:n,headers:{Authorization:"Bearer ".concat(e)}},{onSettled:()=>{l(),i()}})},isUpdateLoading:t}},b=()=>{let{driveFolder:e,updateDriveFolder:n}=j(),[i,l]=(0,t.useState)(!1),[d,p]=(0,t.useState)(!1),f=x.z.object({parent_folder_id:x.z.string().min(1,{message:"Veuillez renseigner un dossier de drive"})}),v=(0,u.cI)({resolver:(0,m.F)(f),defaultValues:{parent_folder_id:(null==e?void 0:e.parent_folder_id)?"https://drive.google.com/drive/u/0/folders/"+(null==e?void 0:e.parent_folder_id):void 0}});return(0,r.jsx)(c.l0,{...v,children:(0,r.jsx)("form",{onSubmit:v.handleSubmit(function(e){p(!0);let i=e.parent_folder_id.split("/folders/").pop();i?(i.endsWith("/")&&(i=i.slice(0,-1)),n({parent_folder_id:i},()=>{p(!1),l(!1),v.reset({parent_folder_id:e.parent_folder_id})})):p(!1)}),children:(0,r.jsx)(o,{label:"Lien du dossier Drive",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Wi,{control:v.control,name:"parent_folder_id",render:e=>{let{field:n}=e;return(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"items-center gap-4",children:[(0,r.jsx)(c.NI,{children:(0,r.jsx)(a.I,{...n})}),(0,r.jsx)(c.zG,{})]})})}}),(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(s.z,{variant:"outline",className:"mt-2 mr-2 w-[120px]",onClick:()=>{l(!1)},children:"Annuler"}),(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",type:"submit",label:"Valider",isLoading:d})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"".concat((null==e?void 0:e.parent_folder_id)&&"text-green-700 hover:text-green-800 underline"," text-2xl font-bold h-8"),children:(null==e?void 0:e.parent_folder_id)?(0,r.jsx)("a",{target:"_blank",href:"https://drive.google.com/drive/u/0/folders/"+(null==e?void 0:e.parent_folder_id),children:"Lien du dossier Drive"}):(0,r.jsx)("span",{children:"Aucun lien"})}),(0,r.jsx)(s.z,{variant:"outline",className:"mt-4 w-[120px]",type:"button",onClick:function(){l(!i)},children:"Modifier"})]})})})})};var _=i(52934),N=i(54662),w=i(39589),y=i.n(w),z=i(35265),k=i(54008);let S=()=>{var e,n,i,l,a,d,f,v,g,j,b,w,S,C,F,V,I,Q,D,L;let P;let{information:R,updateInformation:Z}=(0,p.u)(),[A,M]=(0,t.useState)(!1),[W,q]=(0,t.useState)(!1),J=x.z.object({president:x.z.object({firstname:x.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:x.z.string().min(1,{message:"Veuillez renseigner votre nom"}),phone:x.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).refine(e=>"+33"===e||""===e||!(e.length<10)&&!(e.length>14),{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"})}).partial(),volunteer_responsible:x.z.object({firstname:x.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:x.z.string().min(1,{message:"Veuillez renseigner votre nom"}),phone:x.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).refine(e=>"+33"===e||""===e||!(e.length<10)&&!(e.length>14),{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"})}).partial(),security_responsible:x.z.object({firstname:x.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:x.z.string().min(1,{message:"Veuillez renseigner votre nom"}),phone:x.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).refine(e=>"+33"===e||""===e||!(e.length<10)&&!(e.length>14),{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"})}).partial(),rescue:x.z.object({phone:x.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).refine(e=>"+33"===e||""===e||!(e.length<10)&&!(e.length>14),{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"})}).partial()});function O(e){return e?e.startsWith("0")?"+33 ".concat(e.slice(1)):e:""}let G=(0,u.cI)({resolver:(0,m.F)(J),defaultValues:{president:{firstname:null!==(b=null==R?void 0:null===(e=R.president)||void 0===e?void 0:e.firstname)&&void 0!==b?b:void 0,name:null!==(w=null==R?void 0:null===(n=R.president)||void 0===n?void 0:n.name)&&void 0!==w?w:void 0,phone:O(null!==(S=null==R?void 0:null===(i=R.president)||void 0===i?void 0:i.phone)&&void 0!==S?S:"")},volunteer_responsible:{firstname:null!==(C=null==R?void 0:null===(l=R.volunteer_responsible)||void 0===l?void 0:l.firstname)&&void 0!==C?C:void 0,name:null!==(F=null==R?void 0:null===(a=R.volunteer_responsible)||void 0===a?void 0:a.name)&&void 0!==F?F:void 0,phone:O(null!==(V=null==R?void 0:null===(d=R.volunteer_responsible)||void 0===d?void 0:d.phone)&&void 0!==V?V:"")},security_responsible:{firstname:null!==(I=null==R?void 0:null===(f=R.security_responsible)||void 0===f?void 0:f.firstname)&&void 0!==I?I:void 0,name:null!==(Q=null==R?void 0:null===(v=R.security_responsible)||void 0===v?void 0:v.name)&&void 0!==Q?Q:void 0,phone:O(null!==(D=null==R?void 0:null===(g=R.security_responsible)||void 0===g?void 0:g.phone)&&void 0!==D?D:"")},rescue:{phone:O(null!==(L=null==R?void 0:null===(j=R.rescue)||void 0===j?void 0:j.phone)&&void 0!==L?L:"")}}}),T=()=>G.watch("president.firstname")&&G.watch("president.name")&&G.watch("president.phone"),B=()=>G.watch("volunteer_responsible.firstname")&&G.watch("volunteer_responsible.name")&&G.watch("volunteer_responsible.phone"),E=()=>G.watch("security_responsible.firstname")&&G.watch("security_responsible.name")&&G.watch("security_responsible.phone"),U=()=>G.watch("rescue.phone");return(0,r.jsxs)(N.Vq,{open:W,onOpenChange:q,children:[(0,r.jsxs)(o,{label:"Personnes \xe0 contacter en cas d'urgence",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"".concat((P=0,T()&&P++,B()&&P++,E()&&P++,U()&&P++,P),"/4 remplis")}),(0,r.jsx)(N.hg,{asChild:!0,children:(0,r.jsx)(s.z,{variant:"outline",className:"mt-4 w-[120px]",type:"button",onClick:function(){q(e=>!e)},children:"Modifier"})})]}),(0,r.jsxs)(N.cZ,{className:"sm:max-w-[600px]",children:[(0,r.jsxs)(N.fK,{children:[(0,r.jsx)(N.$N,{children:"Contacts importants"}),(0,r.jsx)(N.Be,{children:"Les personnes que les participants doivent contacter en cas d'urgence."})]}),(0,r.jsx)(c.l0,{...G,children:(0,r.jsxs)("form",{onSubmit:G.handleSubmit(function(e){M(!0),Z({...R,president:{firstname:e.president.firstname,name:e.president.name,phone:e.president.phone},volunteer_responsible:{firstname:e.volunteer_responsible.firstname,name:e.volunteer_responsible.name,phone:e.volunteer_responsible.phone},security_responsible:{firstname:e.security_responsible.firstname,name:e.security_responsible.name,phone:e.security_responsible.phone},rescue:{phone:e.rescue.phone}},()=>{M(!1),q(!1),G.reset({president:{firstname:e.president.firstname,name:e.president.name,phone:O(e.president.phone)},volunteer_responsible:{firstname:e.volunteer_responsible.firstname,name:e.volunteer_responsible.name,phone:O(e.volunteer_responsible.phone)},security_responsible:{firstname:e.security_responsible.firstname,name:e.security_responsible.name,phone:O(e.security_responsible.phone)},rescue:{phone:O(e.rescue.phone)}})})}),children:[(0,r.jsxs)(z.UQ,{type:"single",collapsible:!0,children:[(0,r.jsxs)(z.Qd,{value:"president",children:[(0,r.jsx)(z.o4,{children:(0,r.jsxs)("div",{className:"flex flex-row mr-auto items-center",children:[T()&&(0,r.jsx)(k.dZ6,{className:"mr-4"}),"Pr\xe9sident\xb7e"]})}),(0,r.jsx)(z.vF,{children:(0,r.jsxs)("div",{className:"grid gap-6 py-4 mr-2",children:[(0,r.jsx)(_.l,{form:G,label:"Pr\xe9nom",id:"president.firstname",placeholder:"Pr\xe9nom"}),(0,r.jsx)(_.l,{form:G,label:"Nom",id:"president.name",placeholder:"Nom"}),(0,r.jsx)(c.Wi,{control:G.control,name:"president.phone",render:()=>(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,r.jsx)(c.lX,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,r.jsxs)("div",{className:"col-span-4",children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(u.Qr,{name:"president.phone",control:G.control,render:e=>{let{field:{onChange:n,value:i}}=e;return(0,r.jsx)(y(),{value:i,onChange:n,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})})]})})]}),(0,r.jsxs)(z.Qd,{value:"volunteer_responsible",children:[(0,r.jsx)(z.o4,{children:(0,r.jsxs)("div",{className:"flex flex-row mr-auto items-center",children:[B()&&(0,r.jsx)(k.dZ6,{className:"mr-4"}),"Responsable B\xe9n\xe9vole"]})}),(0,r.jsx)(z.vF,{children:(0,r.jsxs)("div",{className:"grid gap-6 py-4 mr-2",children:[(0,r.jsx)(_.l,{form:G,label:"Pr\xe9nom",id:"volunteer_responsible.firstname",placeholder:"Pr\xe9nom"}),(0,r.jsx)(_.l,{form:G,label:"Nom",id:"volunteer_responsible.name",placeholder:"Nom"}),(0,r.jsx)(c.Wi,{control:G.control,name:"volunteer_responsible.phone",render:()=>(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,r.jsx)(c.lX,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,r.jsxs)("div",{className:"col-span-4",children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(u.Qr,{name:"volunteer_responsible.phone",control:G.control,render:e=>{let{field:{onChange:n,value:i}}=e;return(0,r.jsx)(y(),{value:i,onChange:n,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})})]})})]}),(0,r.jsxs)(z.Qd,{value:"security_responsible",children:[(0,r.jsx)(z.o4,{children:(0,r.jsxs)("div",{className:"flex flex-row mr-auto items-center",children:[E()&&(0,r.jsx)(k.dZ6,{className:"mr-4"}),"Responsable S\xe9curit\xe9"]})}),(0,r.jsx)(z.vF,{children:(0,r.jsxs)("div",{className:"grid gap-6 py-4 mr-2",children:[(0,r.jsx)(_.l,{form:G,label:"Pr\xe9nom",id:"security_responsible.firstname",placeholder:"Pr\xe9nom"}),(0,r.jsx)(_.l,{form:G,label:"Nom",id:"security_responsible.name",placeholder:"Nom"}),(0,r.jsx)(c.Wi,{control:G.control,name:"security_responsible.phone",render:()=>(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,r.jsx)(c.lX,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,r.jsxs)("div",{className:"col-span-4",children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(u.Qr,{name:"security_responsible.phone",control:G.control,render:e=>{let{field:{onChange:n,value:i}}=e;return(0,r.jsx)(y(),{value:i,onChange:n,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})})]})})]}),(0,r.jsxs)(z.Qd,{value:"rescue",children:[(0,r.jsx)(z.o4,{children:(0,r.jsxs)("div",{className:"flex flex-row mr-auto items-center",children:[U()&&(0,r.jsx)(k.dZ6,{className:"mr-4"}),"Secouristes"]})}),(0,r.jsx)(z.vF,{children:(0,r.jsx)("div",{className:"grid gap-6 py-4 mr-2",children:(0,r.jsx)(c.Wi,{control:G.control,name:"rescue.phone",render:()=>(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,r.jsx)(c.lX,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,r.jsxs)("div",{className:"col-span-4",children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(u.Qr,{name:"rescue.phone",control:G.control,render:e=>{let{field:{onChange:n,value:i}}=e;return(0,r.jsx)(y(),{value:i,onChange:n,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})})})})]})]}),(0,r.jsx)(N.cN,{children:(0,r.jsx)(h.f,{isLoading:A,label:"Valider",type:"submit",className:"w-full mt-4"})})]})})]})]})};var C=i(74546),F=i(86465),V=i(88835),I=i(39202);let Q=()=>{let{information:e,updateInformation:n}=(0,p.u)(),[i,l]=(0,t.useState)(!1),[a,d]=(0,t.useState)(!1),[c,m]=(0,t.useState)((null==e?void 0:e.raid_registering_end_date)?(0,C.Q)(e.raid_registering_end_date):void 0);function u(){i?(d(!0),n({...e,raid_registering_end_date:(0,I.uv)(c)},()=>{d(!1),l(!1)})):l(!i)}return(0,r.jsx)(o,{label:"Date de la cl\xf4ture des inscriptions",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V.M,{date:c,setDate:m,fromDate:(0,F.B)(new Date,-1),toDate:(0,F.B)(new Date,1)}),(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(s.z,{variant:"outline",className:"mt-2 mr-2 w-[120px]",onClick:()=>{l(!1)},children:"Annuler"}),(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",isLoading:a,onClick:u,label:"Valider"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.raid_registering_end_date)?(0,I.p6)(e.raid_registering_end_date):(0,r.jsx)("span",{children:"Date non d\xe9finie"})}),(0,r.jsx)(s.z,{variant:"outline",className:"mt-4 w-[120px]",onClick:u,type:"button",children:"Modifier"})]})})};var D=i(24241),L=i(13415),P=i(37440),R=i(21413),Z=i(69081);function A(e){let{dateRange:n,setDateRange:i,defaultDate:l}=e;return(0,r.jsxs)(R.J2,{children:[(0,r.jsx)(R.xo,{asChild:!0,children:(0,r.jsxs)(s.z,{variant:"outline",className:(0,P.cn)("w-full justify-start text-left font-normal",!n&&"text-muted-foreground"),type:"button",children:[(0,r.jsx)(D.Z,{className:"mr-2 h-4 w-4"}),n&&n.from&&n.to?(0,I._Q)(n.from.toString(),n.to.toString()):(0,r.jsx)("span",{children:"S\xe9lectionner une p\xe9riode"})]})}),(0,r.jsx)(R.yk,{className:"w-auto p-0",children:(0,r.jsx)(Z.f,{mode:"range",selected:n,onSelect:i,locale:L.fr,captionLayout:"dropdown-buttons",fromYear:new Date().getFullYear()-1,toYear:new Date().getFullYear()+1,defaultMonth:l,initialFocus:!0})})]})}let M=()=>{let{information:e,updateInformation:n}=(0,p.u)(),[i,l]=(0,t.useState)(!1),[a,d]=(0,t.useState)(!1),[c,m]=(0,t.useState)((null==e?void 0:e.raid_start_date)&&(null==e?void 0:e.raid_end_date)?{from:(0,C.Q)(e.raid_start_date),to:(0,C.Q)(e.raid_end_date)}:void 0);function u(){i?(d(!0),n({...e,raid_start_date:(0,I.uv)(null==c?void 0:c.from),raid_end_date:(0,I.uv)(null==c?void 0:c.to)},()=>{d(!1),l(!1)})):l(!i)}return(0,r.jsx)(o,{label:"Date du raid",children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A,{dateRange:c,setDateRange:m}),(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(s.z,{variant:"outline",className:"mt-2 mr-2 w-[120px]",onClick:()=>{l(!1)},children:"Annuler"}),(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",onClick:u,isLoading:a,label:"Valider"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:(null==e?void 0:e.raid_start_date)&&(null==e?void 0:e.raid_end_date)?(0,I._Q)(e.raid_start_date.toString(),e.raid_end_date.toString()):(0,r.jsx)("span",{children:"P\xe9riode non d\xe9finie"})}),(0,r.jsx)(s.z,{variant:"outline",className:"mt-4 w-[120px]",onClick:u,children:"Modifier"})]})})};var W=i(36136);let q=e=>{var n,i;let{information:l}=e,{updateInformation:a}=(0,p.u)(),[d,f]=(0,t.useState)(!1),v=x.z.object({raid_information:x.z.object({name:x.z.string(),id:x.z.string(),type:x.z.string(),updated:x.z.boolean()}).partial()}),g=(0,u.cI)({resolver:(0,m.F)(v),defaultValues:{raid_information:{name:null!==(n=l.raid_information_id)&&void 0!==n?n:void 0,id:null!==(i=l.raid_information_id)&&void 0!==i?i:void 0,type:"raid_information"}}}),[j,b]=(0,t.useState)(!1),[_,w]=(0,t.useState)(!1);return(0,r.jsx)(c.l0,{...g,children:(0,r.jsx)("form",{onSubmit:g.handleSubmit(function(e){if(f(!0),!e.raid_information.id){f(!1);return}a({...l,raid_information_id:e.raid_information.id},()=>{f(!1),g.reset({raid_information:e.raid_information})})}),children:(0,r.jsxs)(o,{label:"Fiche d'information",children:[(0,r.jsx)(c.Wi,{control:g.control,name:"raid_information",render:e=>{var n,i;let{field:l}=e;return(0,r.jsx)(c.xJ,{children:(0,r.jsx)("div",{className:"items-center gap-4",children:(0,r.jsx)(c.NI,{children:(0,r.jsxs)(N.Vq,{open:j,onOpenChange:b,children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(N.hg,{asChild:!0,children:(0,r.jsx)(s.z,{variant:"outline",className:"col-span-4 w-full",disabled:_,children:(0,r.jsx)("div",{className:"flex flex-row items-start w-full",children:(0,r.jsx)(r.Fragment,{children:(null===(n=l.value)||void 0===n?void 0:n.id)?(0,r.jsx)("span",{className:"text-gray-500 overflow-hidden",children:l.value.id?"Fiche d'information":"Aucun fichier s\xe9l\xe9ctionn\xe9"}):(0,r.jsx)("span",{className:"font-semibold  mr-6",children:"Choisir un fichier"})})})})}),(0,r.jsxs)(N.cZ,{className:"md:max-w-2xl top-1/2",children:[(0,r.jsx)(N.fK,{children:(0,r.jsx)(N.$N,{className:"text-red sm:text-lg",children:"R\xe8glement du raid"})}),(0,r.jsx)(W.e,{setIsOpen:b,setIsUploading:w,field:l,fileType:"raid_information",participantId:"admin",documentId:null===(i=l.value)||void 0===i?void 0:i.id})]})]})})})})}}),(0,r.jsx)("div",{className:"flex flex-row",children:(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",type:"submit",label:"Modifier",isLoading:d,disabled:_||!g.formState.isDirty})})]})})})},J=e=>{var n,i;let{information:l}=e,{updateInformation:a}=(0,p.u)(),[d,f]=(0,t.useState)(!1),v=x.z.object({raid_rules:x.z.object({name:x.z.string(),id:x.z.string(),type:x.z.string(),updated:x.z.boolean()}).partial()}),g=(0,u.cI)({resolver:(0,m.F)(v),defaultValues:{raid_rules:{name:null!==(n=l.raid_rules_id)&&void 0!==n?n:void 0,id:null!==(i=l.raid_rules_id)&&void 0!==i?i:void 0,type:"raid_rules"}}}),[j,b]=(0,t.useState)(!1),[_,w]=(0,t.useState)(!1);return(0,r.jsx)(c.l0,{...g,children:(0,r.jsx)("form",{onSubmit:g.handleSubmit(function(e){if(f(!0),!e.raid_rules.id){f(!1);return}a({...l,raid_rules_id:e.raid_rules.id},()=>{f(!1),g.reset({raid_rules:e.raid_rules})})}),children:(0,r.jsxs)(o,{label:"R\xe9glement du Raid",children:[(0,r.jsx)(c.Wi,{control:g.control,name:"raid_rules",render:e=>{var n,i;let{field:l}=e;return(0,r.jsx)(c.xJ,{children:(0,r.jsx)("div",{className:"items-center gap-4",children:(0,r.jsx)(c.NI,{children:(0,r.jsxs)(N.Vq,{open:j,onOpenChange:b,children:[(0,r.jsx)(c.zG,{}),(0,r.jsx)(N.hg,{asChild:!0,children:(0,r.jsx)(s.z,{variant:"outline",className:"col-span-4 w-full",disabled:_,children:(0,r.jsx)("div",{className:"flex flex-row items-start w-full",children:(0,r.jsx)(r.Fragment,{children:(null===(n=l.value)||void 0===n?void 0:n.id)?(0,r.jsx)("span",{className:"text-gray-500 overflow-hidden",children:l.value.id?"R\xe9glement du raid":"Aucun fichier s\xe9l\xe9ctionn\xe9"}):(0,r.jsx)("span",{className:"font-semibold  mr-6",children:"Choisir un fichier"})})})})}),(0,r.jsxs)(N.cZ,{className:"md:max-w-2xl top-1/2",children:[(0,r.jsx)(N.fK,{children:(0,r.jsx)(N.$N,{className:"text-red sm:text-lg",children:"R\xe8glement du raid"})}),(0,r.jsx)(W.e,{setIsOpen:b,setIsUploading:w,field:l,fileType:"raid_rules",participantId:"admin",documentId:null===(i=l.value)||void 0===i?void 0:i.id})]})]})})})})}}),(0,r.jsx)("div",{className:"flex flex-row",children:(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",type:"submit",label:"Modifier",isLoading:d,disabled:_||!g.formState.isDirty})})]})})})};var O=i(17042),G=i(16463);let T=()=>{var e;let{information:n,updateInformation:i}=(0,p.u)(),[l,d]=(0,t.useState)(!1),[f,v]=(0,t.useState)(!1),g=x.z.object({payment_link:x.z.string().min(1,{message:"Veuillez renseigner le lien de paiement"})}),j=(0,u.cI)({resolver:(0,m.F)(g),defaultValues:{payment_link:null!==(e=null==n?void 0:n.payment_link)&&void 0!==e?e:void 0}});return(0,r.jsx)(c.l0,{...j,children:(0,r.jsx)("form",{onSubmit:j.handleSubmit(function(e){v(!0),i({payment_link:e.payment_link},()=>{v(!1),d(!1),j.reset({payment_link:e.payment_link})})}),children:(0,r.jsx)(o,{label:"Lien du paiement",children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Wi,{control:j.control,name:"payment_link",render:e=>{let{field:n}=e;return(0,r.jsx)(c.xJ,{children:(0,r.jsxs)("div",{className:"items-center gap-4",children:[(0,r.jsx)(c.NI,{children:(0,r.jsx)(a.I,{...n})}),(0,r.jsx)(c.zG,{})]})})}}),(0,r.jsxs)("div",{className:"flex flex-row",children:[(0,r.jsx)(s.z,{variant:"outline",className:"mt-2 mr-2 w-[120px]",onClick:()=>{d(!1)},children:"Annuler"}),(0,r.jsx)(h.f,{className:"mt-2 w-[120px]",type:"submit",label:"Valider",isLoading:f})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:'$information?.payment_link && "text-green-700 hover:text-green-800 underline"} text-2xl font-bold h-8',children:(null==n?void 0:n.payment_link)?(0,r.jsx)("a",{target:"_blank",href:null==n?void 0:n.payment_link,children:"Lien de paiement"}):(0,r.jsx)("span",{children:"Aucun lien"})}),(0,r.jsx)(s.z,{variant:"outline",className:"mt-4 w-[120px]",type:"button",onClick:function(){d(!l)},children:"Modifier"})]})})})})};var B=()=>{let{isAdmin:e}=(0,O.a)(),n=(0,G.useRouter)(),{information:i}=(0,p.u)();if(!e()){let e=new URL(window.location.href),i=e.pathname+e.search;n.replace("/?redirect=".concat(i))}return(0,r.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-muted/40",children:[(0,r.jsx)(l.D,{}),(0,r.jsx)("main",{className:"grid flex-1 items-start gap-4 p-4 sm:px-6 sm:py-0 md:gap-8 mt-8",children:(0,r.jsxs)(d.Zb,{children:[(0,r.jsx)(d.Ol,{children:(0,r.jsx)(d.ll,{children:"Informations"})}),(0,r.jsx)(d.aY,{children:(0,r.jsxs)(z.UQ,{type:"multiple",defaultValue:["date","price","contact","files"],children:[(0,r.jsxs)(z.Qd,{value:"date",children:[(0,r.jsx)(z.o4,{children:"Dates"}),(0,r.jsx)(z.vF,{children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 xl:grid-cols-3 gap-4 w-full grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,r.jsx)(Q,{}),(0,r.jsx)(M,{})]})})]}),(0,r.jsxs)(z.Qd,{value:"price",children:[(0,r.jsx)(z.o4,{children:"Prix"}),(0,r.jsx)(z.vF,{children:(0,r.jsx)("div",{className:"grid lg:grid-cols-2 xl:grid-cols-3 gap-4 w-full grid-cols-1 max-md:p-8 max-md:gap-4",children:(0,r.jsx)(T,{})})})]}),(0,r.jsxs)(z.Qd,{value:"contact",children:[(0,r.jsx)(z.o4,{children:"Contact"}),(0,r.jsx)(z.vF,{children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 xl:grid-cols-3 gap-4 w-full grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,r.jsx)(f,{}),(0,r.jsx)(S,{})]})})]}),(0,r.jsxs)(z.Qd,{value:"files",children:[(0,r.jsx)(z.o4,{children:"Fichiers"}),(0,r.jsx)(z.vF,{children:(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 xl:grid-cols-3 gap-4 w-full grid-cols-1 max-md:p-8 max-md:gap-4",children:[(0,r.jsx)(b,{}),i&&(0,r.jsx)(J,{information:i}),i&&(0,r.jsx)(q,{information:i})]})})]})]})})]})})]})}},85115:function(e,n,i){"use strict";i.d(n,{D:function(){return x}});var r=i(57437),l=i(87138),s=i(42873),t=i(89733),a=i(19706),d=i(55936),o=i(60603),c=i(2183),m=i(17042),u=i(24729);let x=()=>{let{me:e}=(0,m.a)(),n=window.location.pathname;function i(e,i){let s=n===e;return(0,r.jsx)(l.default,{href:e,className:"".concat(s?"text-foreground":"text-muted-foreground"," transition-colors hover:text-foreground"),children:i})}function x(){return(0,r.jsxs)(r.Fragment,{children:[i("/admin","Tableau de bord"),i("/admin/teams","Equipes"),i("/admin/information","Informations")]})}return(0,r.jsxs)("header",{className:"sticky top-0 flex h-16 items-center gap-4 border-b bg-background px-4 md:px-6 z-10",children:[(0,r.jsx)("nav",{className:"hidden flex-col gap-6 text-lg font-medium md:flex md:flex-row md:items-center md:gap-5 md:text-sm lg:gap-6 mx-10 max-md:mx-0 w-full",children:x()}),(0,r.jsxs)(d.yo,{children:[(0,r.jsx)(d.aM,{asChild:!0,children:(0,r.jsxs)(t.z,{variant:"outline",size:"icon",className:"shrink-0 md:hidden",children:[(0,r.jsx)(s.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),(0,r.jsx)(d.ue,{side:"left",children:(0,r.jsx)("nav",{className:"grid gap-6 text-lg font-medium",children:x()})})]}),(0,r.jsx)("div",{className:"flex w-full items-center gap-4 md:ml-auto md:gap-2 lg:gap-4  mx-10 max-md:mx-0",children:(0,r.jsx)("div",{className:"flex flex-row ml-auto",children:(0,r.jsx)(a.nm,{children:(0,r.jsxs)(a.QP,{children:[(0,r.jsx)(a.rQ,{asChild:!0,children:(0,r.jsx)(t.z,{variant:"ghost",children:(null==e?void 0:e.firstname)===void 0||(null==e?void 0:e.name)===void 0?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(c.O,{className:"w-24 h-6"})}):(0,r.jsx)(r.Fragment,{children:e.firstname+" "+e.name})})}),(0,r.jsxs)(a.uE,{align:"end",children:[(0,r.jsx)(o.U,{}),(0,r.jsx)(a.yE,{}),(0,r.jsx)(u.s,{})]})]})})})})]})}}},function(e){e.O(0,[74,310,422,651,756,629,792,547,974,336,486,543,425,118,877,971,23,744],function(){return e(e.s=51483)}),_N_E=e.O()}]);