(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4654:function(){},1827:function(e,t,a){Promise.resolve().then(a.bind(a,9521))},1657:function(e,t,a){"use strict";a.d(t,{cn:function(){return i}});var l=a(3167),s=a(1367);function i(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,l.W)(t))}},9521:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ar}});var l,s,i=a(7437),r=a(5671),n=a(9908),o=a(7147),d=a(575),c=a(4642),u=a(568);function m(e){return{fetcherOptions:{},queryOptions:{},queryKeyFn:p}}let p=e=>{let t=x(e)?e.path.split("/").filter(Boolean).map(t=>f(t,e.variables.pathParams)):e.path.split("/").filter(Boolean);return v(e)&&t.push(e.variables.queryParams),h(e)&&t.push(e.variables.body),t},f=(e,t)=>e.startsWith("{")&&e.endsWith("}")?t[e.slice(1,-1)]:e,x=e=>!!e.variables.pathParams,h=e=>!!e.variables.body,v=e=>!!e.variables.queryParams;async function j(e){let{url:t,method:a,body:l,headers:s,pathParams:i,queryParams:r,signal:n}=e;try{var o;let e={"Content-Type":"application/json",...s};e["Content-Type"].toLowerCase().includes("multipart/form-data")&&delete e["Content-Type"];let d=await window.fetch("".concat("https://hyperion-3.dev.eclair.ec-lyon.fr").concat(g(t,r,i)),{signal:n,method:a.toUpperCase(),body:l?l instanceof FormData?l:JSON.stringify(l):void 0,headers:e});if(!d.ok){let e;try{e=await d.json()}catch(t){e={status:"unknown",payload:t instanceof Error?"Unexpected error (".concat(t.message,")"):"Unexpected error"}}throw e}if(null===(o=d.headers.get("content-type"))||void 0===o?void 0:o.includes("json"))return await d.json();return await d.blob()}catch(e){throw{name:"unknown",message:e instanceof Error?"Network error (".concat(e.message,")"):"Network error",stack:e}}}let g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=new URLSearchParams(t).toString();return l&&(l="?".concat(l)),e.replace(/\{\w*\}/g,e=>a[e.slice(1,-1)])+l},y=(e,t)=>j({url:"/users/me",method:"get",...e,signal:t}),b=(e,t)=>{let{fetcherOptions:a,queryOptions:l,queryKeyFn:s}=m(t);return c.a({queryKey:s({path:"/users/me",operationId:"readCurrentUserUsersMeGet",variables:e}),queryFn:t=>{let{signal:l}=t;return y({...a,...e},l)},...t,...l})},N=(e,t)=>j({url:"/raid/participants/{participantId}",method:"get",...e,signal:t}),w=(e,t)=>{let{fetcherOptions:a,queryOptions:l,queryKeyFn:s}=m(t);return c.a({queryKey:s({path:"/raid/participants/{participantId}",operationId:"getParticipantByIdRaidParticipantsParticipantIdGet",variables:e}),queryFn:t=>{let{signal:l}=t;return N({...a,...e},l)},...t,...l})},z=(e,t)=>j({url:"/raid/participants/{participantId}",method:"patch",...e,signal:t}),_=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>z({...t,...e}),...e})},C=(e,t)=>j({url:"/raid/participants",method:"post",...e,signal:t}),S=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>C({...t,...e}),...e})},k=(e,t)=>j({url:"/raid/teams",method:"post",...e,signal:t}),I=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>k({...t,...e}),...e})},F=(e,t)=>j({url:"/raid/participants/{participantId}/team",method:"get",...e,signal:t}),R=(e,t)=>{let{fetcherOptions:a,queryOptions:l,queryKeyFn:s}=m(t);return c.a({queryKey:s({path:"/raid/participants/{participantId}/team",operationId:"getTeamByParticipantIdRaidParticipantsParticipantIdTeamGet",variables:e}),queryFn:t=>{let{signal:l}=t;return F({...a,...e},l)},...t,...l})},T=(e,t)=>j({url:"/raid/teams/{teamId}",method:"patch",...e,signal:t}),D=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>T({...t,...e}),...e})},A=(e,t)=>j({url:"/raid/participant/{participantId}/document",method:"post",...e,signal:t}),P=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>A({...t,...e}),...e})},O=(e,t)=>j({url:"/raid/document/{documentId}",method:"get",...e,signal:t}),E=(e,t)=>{let{fetcherOptions:a,queryOptions:l,queryKeyFn:s}=m(t);return c.a({queryKey:s({path:"/raid/document/{documentId}",operationId:"readDocumentRaidDocumentDocumentIdGet",variables:e}),queryFn:t=>{let{signal:l}=t;return O({...a,...e},l)},...t,...l})},V=(e,t)=>j({url:"/raid/security_file/",method:"post",...e,signal:t}),L=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>V({...t,...e}),...e})},B=(e,t)=>j({url:"/raid/participant/{participantId}/security_file",method:"post",...e,signal:t}),U=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>B({...t,...e}),...e})},q=(e,t)=>j({url:"/raid/teams/{teamId}/invite",method:"post",...e,signal:t}),M=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>q({...t,...e}),...e})},Y=(e,t)=>j({url:"/raid/teams/join/{token}",method:"post",...e,signal:t}),Z=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>Y({...t,...e}),...e})};var G=a(4505);let W=()=>{let{token:e}=(0,G.u)(),{mutate:t,isPending:a,isSuccess:l}=M({}),{mutate:s,isPending:i,isSuccess:r}=Z({});return{createInviteToken:(a,l)=>{t({headers:{Authorization:"Bearer ".concat(e)},pathParams:{teamId:a}},{onSuccess(e,t,a){l(e)}})},isCreationLoading:a,isCreationSuccess:l,joinTeam:(t,a)=>{s({headers:{Authorization:"Bearer ".concat(e)},pathParams:{token:t}},{onSettled:(e,t)=>{console.log(e,t),a()}})},isJoinLoading:i,isJoinSuccess:r}};var H=a(2177);let Q=e=>{let{team:t}=e,{createInviteToken:a,isCreationLoading:l}=W();return(0,i.jsx)(r.Zb,{className:"w-full",onClick:function(){void 0!==t&&a(t.id,e=>{let t="".concat("https://raid-registering.myecl.fr/","?invite=").concat(e.token);navigator.clipboard.writeText(t).then(()=>{(0,o.Am)({title:"Invitation envoy\xe9e",description:"Le lien d'invitation a \xe9t\xe9 copi\xe9 dans le presse-papier."})})})},children:(0,i.jsx)(r.aY,{className:"w-full h-full",children:(0,i.jsx)("div",{className:"flex m-auto h-full mt-3",children:(0,i.jsx)(d.z,{variant:"outline",className:"flex m-auto w-[200px]",disabled:l,children:l?(0,i.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.b9W,{className:"inline mr-4"}),(0,i.jsx)("span",{children:"Inviter un participant"})]})})})})})};var J=a(2265),X=a(6969),K=a(9259),$=a(1657);let ee=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(X.fC,{ref:t,className:(0,$.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...l,children:(0,i.jsx)(X.z$,{className:(0,$.cn)("flex items-center justify-center text-current"),children:(0,i.jsx)(K.Z,{className:"h-4 w-4"})})})});function et(e){let{className:t,...a}=e;return(0,i.jsx)("div",{className:(0,$.cn)("animate-pulse rounded-md bg-muted",t),...a})}ee.displayName=X.fC.displayName;var ea=a(2936),el=a(2235);let es=ea.fC,ei=ea.xz,er=ea.h_;ea.x8;let en=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(ea.aV,{ref:t,className:(0,$.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});en.displayName=ea.aV.displayName;let eo=J.forwardRef((e,t)=>{let{className:a,children:l,hideClose:s,...r}=e;return(0,i.jsxs)(er,{children:[(0,i.jsx)(en,{}),(0,i.jsxs)(ea.VY,{ref:t,className:(0,$.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[l,!s&&(0,i.jsxs)(ea.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,i.jsx)(el.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});eo.displayName=ea.VY.displayName;let ed=e=>{let{className:t,...a}=e;return(0,i.jsx)("div",{className:(0,$.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};ed.displayName="DialogHeader";let ec=e=>{let{className:t,...a}=e;return(0,i.jsx)("div",{className:(0,$.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};ec.displayName="DialogFooter";let eu=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(ea.Dx,{ref:t,className:(0,$.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});eu.displayName=ea.Dx.displayName;let em=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(ea.dk,{ref:t,className:(0,$.cn)("text-sm text-muted-foreground",a),...l})});em.displayName=ea.dk.displayName;var ep=a(7082),ef=a(7908),ex=a(2020),eh=a(5249);let ev=(0,ex.Ue)()((0,eh.mW)((0,eh.tJ)(e=>({documents:["idCard","medicalCertificate","raidRules","studentCard"].reduce((e,t)=>(e[t]={id:void 0,file:void 0},e),{}),setDocument:(t,a,l)=>{e(e=>({documents:{...e.documents,[t]:{id:a,file:l}}}))},setId:(t,a)=>{e(e=>({documents:{...e.documents,[t]:{...e.documents[t],id:a}}}))}}),{name:"raid-documents-storage"}))),ej=()=>{let e=(0,ep.NL)(),{token:t,userId:a}=(0,G.u)(),{documents:l,setDocument:s,setId:i}=ev(),[r,n]=(0,J.useState)(""),{mutate:o}=P(),{data:d,refetch:c,isPending:u}=E({headers:{Authorization:"Bearer ".concat(t)},pathParams:{documentId:r}},{enabled:""!==r});return{assignDocument:(l,s)=>{o({headers:{Authorization:"Bearer ".concat(t)},pathParams:{participantId:a},body:l},{onSuccess:()=>{e.invalidateQueries({predicate:e=>"getTeamByParticipantId"===e.queryHash}),s()}})},uploadDocument:(a,l,i,r)=>{let n=new FormData;n.append("image",a),ef.Z.post("".concat("https://hyperion-3.dev.eclair.ec-lyon.fr","/raid/document/").concat(i),n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}}).then(()=>{e.invalidateQueries({predicate:e=>"getDocument"===e.queryHash}),s(l,i,a),r()})},getDocument:e=>{var t;if(""!==e&&void 0!==e)return null===(t=l[e])||void 0===t?void 0:t.file},data:d,refetch:c,isLoading:u,setDocumentId:n,isIdSet:""!==r}};var eg=a(703);let ey=e=>{let{documentKey:t,id:a,file:l}=e,{data:s,setDocumentId:r,isIdSet:n}=ej(),{setDocument:o}=ev(),[d,c]=(0,J.useState)(!1);return(null==l?void 0:l.size)!==void 0||n||d||(null==s?void 0:s.size)!==void 0||(c(!0),r(a)),(null==s?void 0:s.size)!==void 0&&d&&(o(t,a,s),r("")),(0,i.jsx)(i.Fragment,{children:(null==l?void 0:l.size)?(0,i.jsx)(eg.default,{src:URL.createObjectURL(l),alt:t,width:300,height:200,className:"rounded-lg w-auto max-h-[400px]"}):(0,i.jsx)(et,{className:"w-full h-80"})})},eb=e=>{let{file:t}=e;return(0,i.jsxs)("div",{className:"flex flex-col justify-between h-full w-full",children:[(0,i.jsx)(eN,{label:"Allergies",value:t.allergy}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eN,{label:"Asthme",value:t.asthma}),t.asthma&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eN,{label:"Passage en soins intensifs",value:t.intensive_care_unit}),t.intensive_care_unit&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eN,{label:"Date de passage en soins intensifs",value:t.intensive_care_unit_when})})]})]}),(0,i.jsx)(eN,{label:"Traitement en cours",value:t.ongoing_treatment}),(0,i.jsx)(eN,{label:"Maladies",value:t.sicknesses}),(0,i.jsx)(eN,{label:"Hospitalisation",value:t.hospitalization}),(0,i.jsx)(eN,{label:"Op\xe9ration chirurgicale",value:t.surgical_operation}),(0,i.jsx)(eN,{label:"Traumatisme",value:t.trauma}),(0,i.jsx)(eN,{label:"Ant\xe9c\xe9dents familiaux",value:t.family})]})},eN=e=>{let{label:t,value:a}=e,{getDocument:l}=ej(),s=e=>"XS"===e||"S"===e||"M"===e||"L"===e||"XL"===e,r=e=>"boolean"==typeof e,n=e=>null===e,o=e=>"string"==typeof(null==e?void 0:e.type),c=e=>"boolean"==typeof(null==e?void 0:e.asthma),u=e=>"string"==typeof e;return(0,i.jsxs)("div",{className:"grid p-2 grid-cols-6 items-center w-full",children:[(0,i.jsx)("span",{className:"font-semibold text-left my-auto col-span-2",children:t}),(e=>{var a;switch(!0){case r(e):return(0,i.jsx)(ee,{checked:e,className:"col-span-4 ml-auto"});case s(e):return(0,i.jsx)("div",{className:" col-start-6 col-span-1",children:(0,i.jsx)("div",{className:"bg-zinc-200 px-2 rounded-md w-8 flex justify-center ml-auto dark:bg-zinc-700",children:(0,i.jsx)("span",{children:e})})});case o(e):let m=e.type,p=l(m);return(0,i.jsxs)("div",{className:"flex flex-row w-full justify-end items-center h-6 col-span-4",children:[(0,i.jsxs)(es,{children:[(0,i.jsx)(ei,{asChild:!0,children:(0,i.jsx)(d.z,{variant:null,className:"pl-auto max-w-full bg-zinc-200",children:(0,i.jsx)("div",{className:"flex flex-row items-start max-w-full",children:(0,i.jsx)("span",{className:"text-gray-500 overflow-hidden",children:null!==(a=e.name)&&void 0!==a?a:"Aucun fichier s\xe9l\xe9ctionn\xe9"})})})}),(0,i.jsxs)(eo,{className:"md:max-w-2xl top-1/2",children:[(0,i.jsx)(ed,{children:(0,i.jsx)(eu,{className:"text-red sm:text-lg",children:t})}),(0,i.jsx)("div",{className:"flex flex-col items-center gap-4",children:(0,i.jsx)("span",{className:"text-gray-500 overflow-hidden m-auto",children:(0,i.jsx)(ey,{documentKey:m,id:e.id,file:p})})})]})]}),(0,i.jsx)(ee,{checked:e.validated,className:"ml-8"})]});case c(e):return(0,i.jsxs)("div",{className:"flex flex-row w-full justify-end items-center h-6 col-span-4",children:[(0,i.jsxs)(es,{children:[(0,i.jsx)(ei,{asChild:!0,children:(0,i.jsx)(d.z,{variant:null,className:"col-span-4 px-4 bg-zinc-200 ",children:(0,i.jsx)("div",{className:"flex flex-row items-start w-full",children:(0,i.jsx)("span",{className:"text-gray-500 overflow-hidden",children:"Fiche s\xe9curit\xe9"})})})}),(0,i.jsxs)(eo,{className:"md:max-w-2xl top-1/2",children:[(0,i.jsx)(ed,{children:(0,i.jsx)(eu,{className:"text-red sm:text-lg",children:t})}),(0,i.jsx)("div",{className:"flex flex-col items-center",children:(0,i.jsx)(eb,{file:e})})]})]}),(0,i.jsx)(ee,{checked:!0,className:"ml-8"})]});case u(e):return(0,i.jsx)("span",{className:"col-span-4 text-right",children:e});case n(e):return(0,i.jsx)("span",{className:"text-zinc-400 col-span-4 text-right",children:"Non renseign\xe9"});default:return(0,i.jsx)(et,{className:"w-24 h-6 col-span-4 text-right"})}})(a)]})};var ew=a(7827);let ez=J.forwardRef((e,t)=>{let{className:a,value:l,...s}=e;return(0,i.jsx)(ew.fC,{ref:t,className:(0,$.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...s,children:(0,i.jsx)(ew.z$,{className:"h-full w-full flex-1 bg-[#304D30] transition-all",style:{transform:"translateX(-".concat(100-(l||0),"%)")}})})});ez.displayName=ew.fC.displayName;var e_=a(1270),eC=a(2670),eS=a(248),ek=a(5400);let eI=()=>{let{token:e,userId:t}=(0,G.u)(),a=(0,ep.NL)(),{data:l,isLoading:s,refetch:i}=R({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:t}},{enabled:null!==t,retry:0,queryHash:"getTeamByParticipantId"}),{mutate:r,isSuccess:n,isPending:o}=I({}),{mutate:d,isSuccess:c,isPending:u}=D({});return{team:l,isLoading:s,createTeam:(t,l)=>{r({body:t,headers:{Authorization:"Bearer ".concat(e)}},{onSuccess(e,t,s){a.invalidateQueries({predicate:e=>"getTeamByParticipantId"===e.queryHash}),l()}})},isCreationLoading:o,isCreationSuccess:n,refetchTeam:i,updateTeam:(t,a,l)=>{d({body:l,headers:{Authorization:"Bearer ".concat(e)},pathParams:{teamId:t}},{onSettled:()=>{i(),a()}})},isUpdateLoading:u,isUpdateSuccess:c}},eF=()=>{let{token:e,userId:t}=(0,G.u)(),a=(0,ep.NL)(),{participant:l,setParticipant:s}=(0,ek.p)(),{refetchTeam:i}=eI(),{data:r,isLoading:n,isFetched:o,refetch:d}=w({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:t}},{enabled:null!==t&&void 0===l,retry:0,queryHash:"getParticipantById"}),{mutate:c,isSuccess:u,isPending:m}=S({}),{mutate:p,isSuccess:f,isPending:x}=_({});return void 0!==r&&l!==r&&null!==e&&s(r),{me:l,isLoading:n,isFetched:o,createParticipant:(t,l)=>{c({body:t,headers:{Authorization:"Bearer ".concat(e)}},{onSuccess:()=>{a.invalidateQueries({predicate:e=>"getParticipantById"===e.queryHash||"getTeamByParticipantId"===e.queryHash}),l()}})},isCreationSuccess:u,isCreationLoading:m,updateParticipant:(a,l)=>{p({body:a,headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:t}},{onSettled:()=>{d(),i(),l()}})},isUpdateSuccess:f,isUpdateLoading:x}};var eR=a(2782),eT=a(553),eD=a(7427);let eA=eD.fC,eP=eD.xz,eO=J.forwardRef((e,t)=>{let{className:a,align:l="center",sideOffset:s=4,...r}=e;return(0,i.jsx)(eD.h_,{children:(0,i.jsx)(eD.VY,{ref:t,align:l,sideOffset:s,className:(0,$.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});eO.displayName=eD.VY.displayName;var eE=a(3124),eV=a(8670);let eL=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(eE.mY,{ref:t,className:(0,$.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a),...l})});eL.displayName=eE.mY.displayName;let eB=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,i.jsx)(eV.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,i.jsx)(eE.mY.Input,{ref:t,className:(0,$.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",a),...l})]})});eB.displayName=eE.mY.Input.displayName,J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(eE.mY.List,{ref:t,className:(0,$.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...l})}).displayName=eE.mY.List.displayName;let eU=J.forwardRef((e,t)=>(0,i.jsx)(eE.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));eU.displayName=eE.mY.Empty.displayName;let eq=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(eE.mY.Group,{ref:t,className:(0,$.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",a),...l})});eq.displayName=eE.mY.Group.displayName,J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(eE.mY.Separator,{ref:t,className:(0,$.cn)("-mx-1 h-px bg-border",a),...l})}).displayName=eE.mY.Separator.displayName;let eM=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(eE.mY.Item,{ref:t,className:(0,$.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l})});function eY(e){var t;let{values:a,value:l,onChange:s,placeholder:r,isSearchable:n}=e,[o,c]=(0,J.useState)(!1);return(0,i.jsxs)(eA,{open:o,onOpenChange:c,children:[(0,i.jsx)(eP,{asChild:!0,children:(0,i.jsxs)(d.z,{variant:"outline",role:"combobox","aria-expanded":o,className:(0,$.cn)("w-full justify-between",!l&&"text-muted-foreground"),children:[(0,i.jsx)("span",{children:l?null===(t=a.find(e=>e.value===l))||void 0===t?void 0:t.label:r}),(0,i.jsx)(eT.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,i.jsx)(eO,{className:"w-full p-0",children:(0,i.jsxs)(eL,{children:[n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eB,{placeholder:r}),(0,i.jsx)(eU,{children:"No framework found."})]}),(0,i.jsx)(eq,{children:a.map(e=>(0,i.jsxs)(eM,{value:e.value,onSelect:e=>{s(e),c(!1)},className:"w-full text-left",children:[(0,i.jsx)(K.Z,{className:(0,$.cn)("mr-2 h-4 w-4",l===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})})]})}eM.displayName=eE.mY.Item.displayName;var eZ=a(9143),eG=a(2647);let eW=eC.RV,eH=J.createContext({}),eQ=e=>{let{...t}=e;return(0,i.jsx)(eH.Provider,{value:{name:t.name},children:(0,i.jsx)(eC.Qr,{...t})})},eJ=()=>{let e=J.useContext(eH),t=J.useContext(eX),{getFieldState:a,formState:l}=(0,eC.Gc)(),s=a(e.name,l);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...s}},eX=J.createContext({}),eK=J.forwardRef((e,t)=>{let{className:a,...l}=e,s=J.useId();return(0,i.jsx)(eX.Provider,{value:{id:s},children:(0,i.jsx)("div",{ref:t,className:(0,$.cn)("space-y-2",a),...l})})});eK.displayName="FormItem";let e$=J.forwardRef((e,t)=>{let{className:a,...l}=e,{error:s,formItemId:r}=eJ();return(0,i.jsx)(eG._,{ref:t,className:(0,$.cn)(s&&"text-destructive",a),htmlFor:r,...l})});e$.displayName="FormLabel";let e0=J.forwardRef((e,t)=>{let{...a}=e,{error:l,formItemId:s,formDescriptionId:r,formMessageId:n}=eJ();return(0,i.jsx)(eZ.g7,{ref:t,id:s,"aria-describedby":l?"".concat(r," ").concat(n):"".concat(r),"aria-invalid":!!l,...a})});e0.displayName="FormControl",J.forwardRef((e,t)=>{let{className:a,...l}=e,{formDescriptionId:s}=eJ();return(0,i.jsx)("p",{ref:t,id:s,className:(0,$.cn)("text-sm text-muted-foreground",a),...l})}).displayName="FormDescription";let e1=J.forwardRef((e,t)=>{let{className:a,children:l,...s}=e,{error:r,formMessageId:n}=eJ(),o=r?String(null==r?void 0:r.message):l;return o?(0,i.jsx)("p",{ref:t,id:n,className:(0,$.cn)("text-sm font-medium text-destructive",a),...s,children:o}):null});e1.displayName="FormMessage";var e2=a(4739);let e4=e=>{let{setIsOpen:t,onDropAccepted:a,multiple:l=!1,maxSize:s=10485760,accept:r={"image/*":[".jpg",".jpeg",".png"]}}=e,[n,o]=(0,J.useState)(!1),[d,c]=(0,J.useState)(""),u=s/1e6,m=Object.values(r).map(e=>e.map(e=>e.replaceAll(".","")).join(", ")).join(", ");return(0,i.jsx)(e2.ZP,{accept:r,onDropAccepted:(e,l)=>{o(!1),t(!1),a(e,l)},onDropRejected:(e,t)=>{e[0].file.size>s?c("Fichier trop lourd (max: ".concat(u,"Mo)")):c("Type de fichier non support\xe9 (support\xe9: ".concat(m,")")),o(!0)},multiple:l,maxSize:s,children:e=>{let{getRootProps:t,getInputProps:a}=e;return(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)("span",{className:"text-red-600 font-medium",children:d}),(0,i.jsx)("div",{...t({className:(0,$.cn)("container flex flex-col items-center justify-center w-full h-48 border-2 ".concat(n?"border-red-600":"border-gray-300"," border-dashed rounded-lg cursor-pointer"))}),children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-x-3 mt-2 mb-2",children:[(0,i.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:(0,i.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,i.jsxs)("span",{className:"font-medium text-gray-600",children:["Glissez et d\xe9posez votre fichier ici ou"," ",(0,i.jsx)("span",{className:"text-blue-600 underline",children:"s\xe9lectionnez un fichier"})]})]}),(0,i.jsx)("input",{...a()})]})})]})}})},e5=e=>{var t;let{setIsUploading:a,setIsOpen:l,field:s,id:r,documentId:n}=e,{uploadDocument:o,getDocument:c,data:u,setDocumentId:m,isIdSet:p}=ej(),{setDocument:f}=ev(),[x,h]=(0,J.useState)(!1),v=c(null===(t=s.value)||void 0===t?void 0:t.id),[j,g]=(0,J.useState)(v);return(null==v?void 0:v.size)!==void 0||p||x||(null==u?void 0:u.size)!==void 0||(h(!0),m(s.value.id)),(null==u?void 0:u.size)!==void 0&&x&&(f(r,s.value.id,u),g(u),m("")),(0,i.jsx)(i.Fragment,{children:(null==j?void 0:j.size)!==void 0?(0,i.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,i.jsx)("span",{className:"text-gray-500 overflow-hidden m-auto",children:(0,i.jsx)(eg.default,{src:URL.createObjectURL(j),alt:s.name,width:300,height:200,className:"rounded-lg w-auto max-h-[400px]"})}),(0,i.jsx)(d.z,{className:"w-full",onClick:()=>{s.onChange(null),g(void 0)},children:"Modifier"})]}):(0,i.jsx)(i.Fragment,{children:n?(0,i.jsx)(et,{className:"w-full h-80"}):(0,i.jsx)(e4,{setIsOpen:l,onDropAccepted:(e,t)=>{let l=e[0],i=crypto.randomUUID();a(!0),o(l,r,i,()=>{s.onChange({name:l.name,id:i,type:r,updated:!0}),a(!1)})}})})})},e6=()=>{let{token:e,userId:t}=(0,G.u)(),a=(0,ep.NL)(),{mutate:l,isPending:s,isSuccess:i}=L({}),{mutate:r}=U({});return{assignSecurityFile:(t,l,s)=>{r({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:t},queryParams:{security_file_id:l}},{onSuccess(e,t,l){a.invalidateQueries({predicate:e=>"getTeamByParticipantId"===e.queryHash}),s()}})},setSecurityFile:(t,a)=>{l({body:t,headers:{Authorization:"Bearer ".concat(e)}},{onSuccess(e,t,l){a()}})},isCreationLoading:s,isCreationSuccess:i}},e3=e=>{let{setIsOpen:t,form:a}=e,{setSecurityFile:l}=e6();return(0,i.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,i.jsx)(tl,{label:"Allergies",id:"securityFile.allergy",form:a,type:s.STRING}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tl,{label:"Asthme",id:"securityFile.asthma",form:a,type:s.BOOLEAN}),a.watch("securityFile.asthma")&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tl,{label:"Passage en soins intensifs",id:"securityFile.intensive_care_unit",form:a,type:s.BOOLEAN}),a.watch("securityFile.intensive_care_unit")&&(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(tl,{label:"Date de passage en soins intensifs",id:"securityFile.intensive_care_unit_when",form:a,type:s.STRING})})]})]}),(0,i.jsx)(tl,{label:"Traitement en cours",id:"securityFile.ongoing_treatment",form:a,type:s.STRING}),(0,i.jsx)(tl,{label:"Maladies",id:"securityFile.sicknesses",form:a,type:s.STRING}),(0,i.jsx)(tl,{label:"Hospitalisation",id:"securityFile.hospitalization",form:a,type:s.STRING}),(0,i.jsx)(tl,{label:"Op\xe9ration chirurgicale",id:"securityFile.surgical_operation",form:a,type:s.STRING}),(0,i.jsx)(tl,{label:"Traumatisme",id:"securityFile.trauma",form:a,type:s.STRING}),(0,i.jsx)(tl,{label:"Ant\xe9c\xe9dents familiaux",id:"securityFile.family",form:a,type:s.STRING}),(0,i.jsx)(d.z,{className:"mt-6",type:"button",onClick:function(e){a.setValue("securityFile.updated",!0),void 0===a.getValues("securityFile.id")&&a.setValue("securityFile.id",crypto.randomUUID());let s={...a.getValues("securityFile")};console.log(s),l(s,()=>{}),t(!1)},children:"Valider"})]})},e7=[{value:"centrale",label:"Centrale"},{value:"otherschool",label:"Autre \xe9cole"},{value:"corporatepartner",label:"Partenaire entreprise"},{value:"other",label:"Autre"}],e8=[{value:"discovery",label:"D\xe9couverte"},{value:"sports",label:"Sportif"},{value:"expert",label:"Expert"}],e9=[{value:"centrale",label:"Centrale"},{value:"bellecour",label:"Bellecour"},{value:"anyway",label:"Peu importe"}],te=[{value:"xs",label:"XS"},{value:"s",label:"S"},{value:"m",label:"M"},{value:"l",label:"L"},{value:"xl",label:"XL"}];function tt(e,t){var a;let l=e.find(e=>e.value===t);return null!==(a=null==l?void 0:l.label)&&void 0!==a?a:"Non renseign\xe9"}let ta=e=>{let{label:t,field:a,needDialog:l}=e,[s,r]=(0,J.useState)(!1);return(0,i.jsxs)(es,{open:s,onOpenChange:r,children:[(0,i.jsxs)("div",{className:"w-full col-span-4 text-right",children:[(0,i.jsx)(e1,{}),(0,i.jsx)(e0,{children:(0,i.jsx)(ee,{checked:a.value,onCheckedChange:e=>{l?r(!s&&!a.value):a.onChange(!a.value)}})})]}),(0,i.jsxs)(eo,{className:"md:max-w-3xl top-1/2",children:[(0,i.jsx)(ed,{children:(0,i.jsx)(eu,{children:t})}),(0,i.jsx)(em,{children:"En cochant cette case, vous certifiez sur l'honneur que les informations que vous avez renseign\xe9es sont exactes, que vous avez bien lu et compris le r\xe8glement de la comp\xe9tition, et que vous vous engagez \xe0 le respecter."}),(0,i.jsxs)("div",{className:"flex justify-end mt-2 space-x-4",children:[(0,i.jsx)(d.z,{variant:"outline",onClick:()=>r(!1),children:"Annuler"}),(0,i.jsx)(d.z,{onClick:function(e){e.preventDefault(),a.onChange(!a.value),r(!1)},children:"Valider"})]})]})]})};function tl(e){let{label:t,id:a,placeholder:l,form:s,layer:r,type:o,needDialog:c}=e,[u,m]=(0,J.useState)(!1),p=(e,r,n)=>{var p,f,x,h;switch(o){case"boolean":return(0,i.jsx)(ta,{label:t,field:e,needDialog:null!=c&&c});case"size":return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"col-span-3"}),(0,i.jsxs)("div",{className:"col-span-1",children:[(0,i.jsx)(e1,{}),(0,i.jsx)(e0,{children:(0,i.jsx)(eY,{values:te,placeholder:l,...e})})]})]});case"document":return(0,i.jsxs)(es,{open:r,onOpenChange:n,children:[(0,i.jsx)(e1,{}),(0,i.jsx)(ei,{asChild:!0,children:(0,i.jsx)(d.z,{variant:"outline",className:"col-span-4",disabled:u,children:(0,i.jsx)("div",{className:"flex flex-row items-start w-full",children:u?(0,i.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"}):(0,i.jsx)(i.Fragment,{children:(null===(p=e.value)||void 0===p?void 0:p.name)?(0,i.jsx)("span",{className:"text-gray-500 overflow-hidden",children:null!==(x=e.value.name)&&void 0!==x?x:"Aucun fichier s\xe9l\xe9ctionn\xe9"}):(0,i.jsx)("span",{className:"font-semibold  mr-6",children:"Choisir un fichier"})})})})}),(0,i.jsxs)(eo,{className:"md:max-w-2xl top-1/2",children:[(0,i.jsx)(ed,{children:(0,i.jsx)(eu,{className:"text-red sm:text-lg",children:t})}),(0,i.jsx)(e5,{setIsOpen:n,setIsUploading:m,field:e,id:a,documentId:null===(f=e.value)||void 0===f?void 0:f.id})]})]});case"securityFile":return(0,i.jsxs)(es,{open:r,onOpenChange:n,children:[(0,i.jsx)(ei,{asChild:!0,children:(0,i.jsx)(d.z,{variant:"outline",className:"col-span-4",children:(0,i.jsx)("div",{className:"flex flex-row items-start w-full",children:(null===(h=e.value)||void 0===h?void 0:h.id)?(0,i.jsx)("span",{className:"text-gray-500 overflow-hidden",children:"Fiche de s\xe9curit\xe9"}):(0,i.jsx)("span",{className:"font-semibold mr-6",children:"Remplir la fiche de s\xe9curit\xe9"})})})}),(0,i.jsxs)(eo,{className:"md:max-w-3xl top-1/2",children:[(0,i.jsx)(ed,{children:(0,i.jsx)(eu,{className:"text-red sm:text-lg",children:t})}),(0,i.jsx)(e3,{setIsOpen:n,form:s})]})]});case"string":return(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(e1,{}),(0,i.jsx)(e0,{children:(0,i.jsx)(eR.I,{placeholder:l,...e})})]});case"situation":return(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(e1,{}),(0,i.jsx)(e0,{children:(0,i.jsx)(eY,{values:e7,placeholder:l,...e})})]});case"difficulty":return(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(e1,{}),(0,i.jsx)(e0,{children:(0,i.jsx)(eY,{values:e8,placeholder:l,...e})})]});case"meetingPlace":return(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(e1,{}),(0,i.jsx)(e0,{children:(0,i.jsx)(eY,{values:e9,placeholder:l,...e})})]});default:return(0,i.jsx)(et,{className:"w-24 h-6"})}},[f,x]=(0,J.useState)(!1);return(0,i.jsx)(eQ,{control:s.control,name:a,render:e=>{let{field:a}=e;return(0,i.jsx)(eK,{children:(0,i.jsxs)("div",{className:"grid p-2 grid-cols-6",children:[(0,i.jsxs)(e$,{className:"font-semibold text-left my-auto text-md col-span-2",children:[r&&(0,i.jsx)(n.WFu,{className:"inline mr-4"}),t]}),p(a,f,x)]})})}})}function ts(e){return null==e?void 0:e.split(" : ")[0]}function ti(e){let t=null==e?void 0:e.split(" : ");return(null==t?void 0:t.length)===2?t[1]:"Centrale"}function tr(e){var t,a,l,s,i,r,n,o,d,c,u,m=0;return(null==e?void 0:e.address)&&m++,(null==e?void 0:e.bike_size)&&m++,(null==e?void 0:e.t_shirt_size)&&m++,(null==e?void 0:e.situation)&&m++,["centrale","otherschool"].includes(null!==(u=ts(null!==(c=null==e?void 0:e.situation)&&void 0!==c?c:void 0))&&void 0!==u?u:"")&&(null==e?void 0:null===(t=e.student_card)||void 0===t?void 0:t.id)&&(null==e?void 0:null===(a=e.student_card)||void 0===a?void 0:a.validated)&&m++,(null==e?void 0:null===(l=e.id_card)||void 0===l?void 0:l.id)&&(null==e?void 0:null===(s=e.id_card)||void 0===s?void 0:s.validated)&&m++,(null==e?void 0:null===(i=e.medical_certificate)||void 0===i?void 0:i.id)&&(null==e?void 0:null===(r=e.medical_certificate)||void 0===r?void 0:r.validated)&&m++,(null==e?void 0:null===(n=e.security_file)||void 0===n?void 0:n.id)&&m++,(null==e?void 0:null===(o=e.raid_rules)||void 0===o?void 0:o.id)&&(null==e?void 0:null===(d=e.raid_rules)||void 0===d?void 0:d.validated)&&m++,(null==e?void 0:e.payment)&&m++,m/10*100}(l=s||(s={})).STRING="string",l.SIZE="size",l.BOOLEAN="boolean",l.DOCUMENT="document",l.SECURITYFILE="securityFile",l.SITUATION="situation",l.DIFFICULTY="difficulty",l.MEETINGPLACE="meetingPlace";let tn=e=>{var t,a,l,c,u,m,p,f,x,h,v,j,g,y,b,N,w,z,_,C,S,k,I,F,R,T,D,A,P,O,E,V,L,B,U,q,M,Y,Z,G,W,Q,X,K,$,ee,et,ea,el,es,ei,er,en,eo;let{me:ed,isEdit:ec,setIsEdit:eu}=e,{updateParticipant:em,isUpdateLoading:ep}=eF(),{refetchTeam:ef}=eI(),{assignDocument:ex}=ej(),{assignSecurityFile:eh}=e6(),ev=eS.z.object({address:eS.z.string().min(1,{message:"Veuillez renseigner votre adresse"}).optional(),bikeSize:eS.z.string().refine(e=>["xs","s","m","l","xl"].includes(e),{message:"Veuillez renseigner une taille de v\xe9lo valide"}).optional(),tShirtSize:eS.z.string().refine(e=>["xs","s","m","l","xl"].includes(e),{message:"Veuillez renseigner une taille de t-shirt valide"}).optional(),situation:eS.z.string().optional(),otherSchool:eS.z.string().optional(),company:eS.z.string().optional(),other:eS.z.string().optional(),diet:eS.z.string().optional(),idCard:eS.z.object({name:eS.z.string(),id:eS.z.string().uuid(),updated:eS.z.boolean(),type:eS.z.literal("idCard")}).partial(),medicalCertificate:eS.z.object({name:eS.z.string(),id:eS.z.string().uuid(),updated:eS.z.boolean(),type:eS.z.literal("medicalCertificate")}).partial(),studentCard:eS.z.object({name:eS.z.string(),id:eS.z.string().uuid(),updated:eS.z.boolean(),type:eS.z.literal("studentCard")}).partial(),raidRules:eS.z.object({name:eS.z.string(),id:eS.z.string().uuid(),updated:eS.z.boolean(),type:eS.z.literal("raidRules")}).partial(),securityFile:eS.z.object({allergy:eS.z.string().optional(),asthma:eS.z.boolean(),intensive_care_unit:eS.z.boolean().optional(),intensive_care_unit_when:eS.z.string().optional(),ongoing_treatment:eS.z.string().optional(),sicknesses:eS.z.string().optional(),hospitalization:eS.z.string().optional(),surgical_operation:eS.z.string().optional(),trauma:eS.z.string().optional(),family:eS.z.string().optional(),id:eS.z.string().uuid(),updated:eS.z.boolean()}).partial(),attestationHonour:eS.z.boolean().optional()}),eg=(0,eC.cI)({resolver:(0,e_.F)(ev),mode:"onBlur",defaultValues:{address:null!==(k=ed.address)&&void 0!==k?k:void 0,bikeSize:null!==(I=null===(t=ed.bike_size)||void 0===t?void 0:t.toLowerCase())&&void 0!==I?I:void 0,tShirtSize:null!==(F=null===(a=ed.t_shirt_size)||void 0===a?void 0:a.toLowerCase())&&void 0!==F?F:void 0,situation:ts(null!==(R=ed.situation)&&void 0!==R?R:void 0),other:"other"===ts(null!==(T=ed.situation)&&void 0!==T?T:void 0)?ti(null!==(D=ed.situation)&&void 0!==D?D:void 0):void 0,otherSchool:"otherschool"===ts(null!==(A=ed.situation)&&void 0!==A?A:void 0)?ti(null!==(P=ed.situation)&&void 0!==P?P:void 0):void 0,company:"corporatepartner"===ts(null!==(O=ed.situation)&&void 0!==O?O:void 0)?ti(null!==(E=ed.situation)&&void 0!==E?E:void 0):void 0,diet:null!==(V=ed.diet)&&void 0!==V?V:void 0,idCard:{name:null!==(L=null===(l=ed.id_card)||void 0===l?void 0:l.name)&&void 0!==L?L:void 0,id:null!==(B=null===(c=ed.id_card)||void 0===c?void 0:c.id)&&void 0!==B?B:void 0,type:"idCard"},medicalCertificate:{name:null!==(U=null===(u=ed.medical_certificate)||void 0===u?void 0:u.name)&&void 0!==U?U:void 0,id:null!==(q=null===(m=ed.medical_certificate)||void 0===m?void 0:m.id)&&void 0!==q?q:void 0,type:"medicalCertificate"},studentCard:{name:null!==(M=null===(p=ed.student_card)||void 0===p?void 0:p.name)&&void 0!==M?M:void 0,id:null!==(Y=null===(f=ed.student_card)||void 0===f?void 0:f.id)&&void 0!==Y?Y:void 0,type:"studentCard"},raidRules:{name:null!==(Z=null===(x=ed.raid_rules)||void 0===x?void 0:x.name)&&void 0!==Z?Z:void 0,id:null!==(G=null===(h=ed.raid_rules)||void 0===h?void 0:h.id)&&void 0!==G?G:void 0,type:"raidRules"},securityFile:{allergy:null!==(W=null==ed?void 0:null===(v=ed.security_file)||void 0===v?void 0:v.allergy)&&void 0!==W?W:void 0,asthma:null!==(Q=null==ed?void 0:null===(j=ed.security_file)||void 0===j?void 0:j.asthma)&&void 0!==Q&&Q,intensive_care_unit:null!==(X=null==ed?void 0:null===(g=ed.security_file)||void 0===g?void 0:g.intensive_care_unit)&&void 0!==X&&X,intensive_care_unit_when:null!==(K=null==ed?void 0:null===(y=ed.security_file)||void 0===y?void 0:y.intensive_care_unit_when)&&void 0!==K?K:void 0,ongoing_treatment:null!==($=null==ed?void 0:null===(b=ed.security_file)||void 0===b?void 0:b.ongoing_treatment)&&void 0!==$?$:void 0,sicknesses:null!==(ee=null==ed?void 0:null===(N=ed.security_file)||void 0===N?void 0:N.sicknesses)&&void 0!==ee?ee:void 0,hospitalization:null!==(et=null==ed?void 0:null===(w=ed.security_file)||void 0===w?void 0:w.hospitalization)&&void 0!==et?et:void 0,surgical_operation:null!==(ea=null==ed?void 0:null===(z=ed.security_file)||void 0===z?void 0:z.surgical_operation)&&void 0!==ea?ea:void 0,trauma:null!==(el=null==ed?void 0:null===(_=ed.security_file)||void 0===_?void 0:_.trauma)&&void 0!==el?el:void 0,family:null!==(es=null==ed?void 0:null===(C=ed.security_file)||void 0===C?void 0:C.family)&&void 0!==es?es:void 0,id:null!==(ei=null==ed?void 0:null===(S=ed.security_file)||void 0===S?void 0:S.id)&&void 0!==ei?ei:void 0},attestationHonour:ed.attestation_on_honour}});return(0,i.jsx)(r.aY,{children:(0,J.createElement)(eC.RV,{...eg,key:"Participant"},(0,i.jsxs)("form",{onSubmit:eg.handleSubmit(function(e){var t,a,l,s,i,r;if(!eg.formState.isDirty){eu(!ec);return}let n=[e.idCard,e.medicalCertificate,e.studentCard,e.raidRules].filter(e=>e.updated);for(let t of(e.securityFile.updated&&eh(ed.id,e.securityFile.id,()=>{console.log("Security file updated")}),n))t&&ex({id:t.id,name:t.name,type:t.type},()=>{console.log("Document updated: ",t.name)});em({bike_size:null!==(l=null===(t=e.bikeSize)||void 0===t?void 0:t.toUpperCase())&&void 0!==l?l:null,t_shirt_size:null!==(s=null===(a=e.tShirtSize)||void 0===a?void 0:a.toUpperCase())&&void 0!==s?s:null,situation:function(e){switch(e.situation){case"otherschool":return"otherschool : ".concat(e.otherSchool);case"corporatepartner":return"corporatepartner : ".concat(e.company);case"other":return"other : ".concat(e.other);default:return"centrale"}}(e),address:null!==(i=e.address)&&void 0!==i?i:null,diet:null!==(r=e.diet)&&void 0!==r?r:null,attestation_on_honour:e.attestationHonour},()=>{(0,o.Am)({title:"Profil mis \xe0 jour",description:"Vos informations ont \xe9t\xe9 mises \xe0 jour avec succ\xe8s"}),ef(),eu(!ec)})}),className:"flex flex-col justify-between h-full ".concat(ec?"":"space-y-4"),children:[ec?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tl,{label:"Addresse",id:"address",form:eg,type:s.STRING}),(0,i.jsx)(tl,{label:"Taille de v\xe9lo",placeholder:"Taille",id:"bikeSize",form:eg,type:s.SIZE}),(0,i.jsx)(tl,{label:"Taille de t-shirt",id:"tShirtSize",placeholder:"Taille",form:eg,type:s.SIZE}),(0,i.jsx)(tl,{label:"R\xe9gime alimentaire",id:"diet",form:eg,type:s.STRING}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(tl,{label:"Situation",id:"situation",form:eg,type:s.SITUATION}),"otherschool"===eg.watch("situation")&&(0,i.jsx)(tl,{label:"Nom de l'\xe9cole",id:"otherSchool",form:eg,type:s.STRING,layer:1}),"corporatepartner"===eg.watch("situation")&&(0,i.jsx)(tl,{label:"Nom de l'entreprise",id:"company",form:eg,type:s.STRING,layer:1}),"other"===eg.watch("situation")&&(0,i.jsx)(tl,{label:"Autre situation",id:"other",form:eg,type:s.STRING,layer:1})]}),["centrale","otherschool"].includes(null!==(er=eg.watch("situation"))&&void 0!==er?er:"")&&(0,i.jsx)(tl,{label:"Carte \xe9tudiante",id:"studentCard",form:eg,type:s.DOCUMENT,layer:1}),(0,i.jsx)(tl,{label:"Carte d'identit\xe9",id:"idCard",form:eg,type:s.DOCUMENT}),(0,i.jsx)(tl,{label:"Certificat m\xe9dical",id:"medicalCertificate",form:eg,type:s.DOCUMENT}),(0,i.jsx)(tl,{label:"Fiche de s\xe9curit\xe9",id:"securityFile",form:eg,type:s.SECURITYFILE}),(0,i.jsx)(tl,{label:"R\xe8glement du raid",id:"raidRules",form:eg,type:s.DOCUMENT}),(0,i.jsx)(tl,{label:"Attestation sur l'honneur",id:"attestationHonour",form:eg,type:s.BOOLEAN,needDialog:!0})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eN,{label:"Addresse",value:ed.address}),(0,i.jsx)(eN,{label:"Taille de v\xe9lo",value:ed.bike_size}),(0,i.jsx)(eN,{label:"Taille de t-shirt",value:ed.t_shirt_size}),(0,i.jsx)(eN,{label:"R\xe9gime alimentaire",value:ed.diet}),function(){var e,t;let a=null===(e=ed.situation)||void 0===e?void 0:e.split(" : ")[0],l=null===(t=ed.situation)||void 0===t?void 0:t.split(" : ")[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eN,{label:"Situation",value:tt(e7,a)}),"otherschool"===a&&(0,i.jsx)(eN,{label:"Nom de l'\xe9cole",value:l}),"corporatepartner"===a&&(0,i.jsx)(eN,{label:"Nom de l'entreprise",value:l}),"other"===a&&(0,i.jsx)(eN,{label:"Autre situation",value:l})]})}(),["centrale","otherschool"].includes(null!==(eo=ts(null!==(en=ed.situation)&&void 0!==en?en:void 0))&&void 0!==eo?eo:"")&&(0,i.jsx)(eN,{label:"Carte \xe9tudiante",value:ed.student_card}),(0,i.jsx)(eN,{label:"Carte d'identit\xe9",value:ed.id_card}),(0,i.jsx)(eN,{label:"Certificat m\xe9dical",value:ed.medical_certificate}),(0,i.jsx)(eN,{label:"Fiche de s\xe9curit\xe9",value:ed.security_file}),(0,i.jsx)(eN,{label:"R\xe8glement du raid",value:ed.raid_rules}),(0,i.jsx)(eN,{label:"Attestation sur l'honneur",value:ed.attestation_on_honour})]}),ec&&(0,i.jsx)(i.Fragment,{children:ep?(0,i.jsx)(d.z,{variant:"default",disabled:!0,className:"w-full mt-6",children:(0,i.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,i.jsxs)(d.z,{className:"w-full mt-6",type:"submit",disabled:!eg.formState.isDirty,children:[(0,i.jsx)(n.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})})]}))})},to=()=>(0,i.jsx)(r.aY,{children:[...Array(10)].map((e,t)=>(0,i.jsxs)("div",{className:"grid p-2 grid-cols-6 items-center w-full h-[65px]",children:[(0,i.jsx)("span",{className:"font-semibold text-left my-auto col-span-2",children:(0,i.jsx)(et,{className:"w-32 h-7"})}),(0,i.jsx)(et,{className:"w-64 h-6 col-span-4 ml-auto"})]},t))}),td=e=>{let{participant:t,isCaptain:a}=e,[l,s]=(0,J.useState)(!1);function o(){s(!l)}return(0,i.jsxs)(r.Zb,{className:"w-full flex flex-col justify-between",children:[(0,i.jsx)(r.Ol,{children:(0,i.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(r.ll,{children:(null==t?void 0:t.firstname)&&(null==t?void 0:t.firstname)?(null==t?void 0:t.firstname)+" "+(null==t?void 0:t.name):(0,i.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,i.jsx)(et,{className:"w-32 h-8"}),(0,i.jsx)(et,{className:"w-32 h-8"})]})}),(0,i.jsx)(r.SZ,{children:t?(0,i.jsx)(i.Fragment,{children:a?"Capitaine":"\xa0"}):(0,i.jsx)(et,{className:"w-24 h-5 mt-1"})})]}),l&&t?(0,i.jsxs)(d.z,{variant:"destructive",onClick:o,className:"w-[110px]",children:[(0,i.jsx)(n.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]}):(0,i.jsxs)(d.z,{variant:"outline",onClick:o,className:"w-[110px]",children:[(0,i.jsx)(n.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})]})}),t?(0,i.jsx)(tn,{me:t,isEdit:l,setIsEdit:s}):(0,i.jsx)(to,{}),!l&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.eW,{className:"w-full",children:t?(0,i.jsx)(eN,{label:"Paiement",value:null==t?void 0:t.payment}):(0,i.jsxs)("div",{className:"grid p-2 grid-cols-6 items-center w-full h-[65px]",children:[(0,i.jsx)("span",{className:"font-semibold text-left my-auto col-span-2",children:(0,i.jsx)(et,{className:"w-32 h-7"})}),(0,i.jsx)(et,{className:"w-64 h-6 col-span-4 ml-auto"})]})}),(0,i.jsx)(ez,{value:tr(t)})]})]})},tc=e=>{var t,a,l;let{team:c,setIsEdit:u}=e,{isUpdateLoading:m,updateTeam:p}=eI(),f=eS.z.object({name:eS.z.string().optional(),difficulty:eS.z.enum(["discovery","sports","expert"]).optional(),meeting_place:eS.z.enum(["centrale","bellecour","anyway"]).optional()}),x=(0,eC.cI)({resolver:(0,e_.F)(f),mode:"onBlur",defaultValues:{name:null!==(t=null==c?void 0:c.name)&&void 0!==t?t:void 0,difficulty:null!==(a=null==c?void 0:c.difficulty)&&void 0!==a?a:void 0,meeting_place:null!==(l=null==c?void 0:c.meeting_place)&&void 0!==l?l:void 0}});return(0,J.createElement)(eC.RV,{...x,key:"Participant"},(0,i.jsx)("form",{onSubmit:x.handleSubmit(function(e){var t;if(!x.formState.isDirty){u(!1);return}p(null!==(t=null==c?void 0:c.id)&&void 0!==t?t:"",()=>{u(!1),(0,o.Am)({title:"\xc9quipe mise \xe0 jour"})},e)}),className:"flex flex-col justify-between h-full",children:(0,i.jsxs)(r.aY,{children:[(0,i.jsx)(tl,{label:"Nom d'\xe9quipe",id:"name",form:x,type:s.STRING}),(0,i.jsx)(tl,{label:"Lieu de rendez-vous",id:"meeting_place",placeholder:"Selectionner un lieu de rendez-vous",form:x,type:s.MEETINGPLACE}),(0,i.jsx)(tl,{label:"Parcours",id:"difficulty",placeholder:"Selectionner un parcours",form:x,type:s.DIFFICULTY}),m?(0,i.jsx)(d.z,{variant:"default",disabled:!0,className:"w-full mt-6",children:(0,i.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,i.jsxs)(d.z,{className:"w-full mt-6",type:"submit",disabled:!x.formState.isDirty,children:[(0,i.jsx)(n.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})]})}))},tu=e=>{let{info:t,isLoaded:a}=e;return(0,i.jsx)(r.Zb,{className:"w-[220px]",children:(0,i.jsxs)(r.aY,{className:"mt-4",children:[(0,i.jsxs)(r.SZ,{className:"flex flex-row justify-between",children:[a?(0,i.jsx)("span",{className:"text-l font-bold",children:t.title}):(0,i.jsx)(et,{className:"w-24 h-5"}),t.unit&&(a?t.unit:(0,i.jsx)(et,{className:"w-4 h-4"}))]}),(0,i.jsx)("div",{className:"h-3"}),(0,i.jsx)(r.ll,{children:a?t.value:(0,i.jsx)(et,{className:"w-[150px] h-6"})}),(0,i.jsx)(r.SZ,{children:a?t.description:(0,i.jsx)(et,{className:"w-[120px] h-4 mt-1"})})]})},t.title)},tm=e=>{var t,a;let{team:l}=e,[s,o]=(0,J.useState)(!1);function c(){o(!s)}let u=[{title:"Date",value:"06-07 octobre",description:"week-end complet",unit:(0,i.jsx)(n.Bge,{className:"h-4 w-4"})},{title:"Lieu de rendez-vous",value:tt(e9,null!==(t=null==l?void 0:l.meeting_place)&&void 0!==t?t:void 0),description:"lieu de d\xe9part et d'arriv\xe9e",unit:(0,i.jsx)(n.k9l,{className:"h-4 w-4"})},{title:"Parcours",value:tt(e8,null!==(a=null==l?void 0:l.difficulty)&&void 0!==a?a:void 0),description:"parcours exigeant",unit:void 0},{title:"Distance",value:"150 km",description:"r\xe9partis sur les deux jours",unit:(0,i.jsx)("span",{children:"km"})},{title:"D\xe9nivel\xe9",value:"2500 m",description:"r\xe9partis sur les deux jours",unit:(0,i.jsx)("span",{children:"m"})},{title:"Inscription",value:"".concat((l?(tr(l.captain)+(l.second?tr(l.second):0))/2:0).toFixed(0),"%"),description:"10 jours restants",unit:(0,i.jsx)("span",{children:"%"})}];return(0,i.jsx)(r.Zb,{className:"w-full mt-5",children:(0,i.jsx)("div",{className:"flex flex-col",children:(0,i.jsxs)(r.Ol,{children:[(0,i.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,i.jsx)(r.ll,{children:s?(0,i.jsx)("div",{children:"\xc9diter l'\xe9quipe"}):(0,i.jsx)(i.Fragment,{children:(null==l?void 0:l.name)?(0,i.jsx)("div",{children:null==l?void 0:l.name}):(0,i.jsx)(et,{className:"w-24 h-8"})})}),s&&l?(0,i.jsxs)(d.z,{variant:"destructive",onClick:c,className:"w-[110px]",children:[(0,i.jsx)(n.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]}):(0,i.jsxs)(d.z,{variant:"outline",onClick:c,className:"w-[110px]",children:[(0,i.jsx)(n.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})]}),(0,i.jsx)("div",{className:"h-4"}),s&&l?(0,i.jsx)(tc,{team:l,setIsEdit:o}):(0,i.jsx)("div",{className:"flex flex-wrap gap-4",children:u.map(e=>(0,i.jsx)(tu,{info:e,isLoaded:void 0!==l},e.title))})]})})})};var tp=a(7742);let tf=ea.fC,tx=ea.xz,th=ea.x8,tv=ea.h_,tj=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(ea.aV,{className:(0,$.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:t})});tj.displayName=ea.aV.displayName;let tg=(0,tp.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ty=J.forwardRef((e,t)=>{let{side:a="right",className:l,children:s,...r}=e;return(0,i.jsxs)(tv,{children:[(0,i.jsx)(tj,{}),(0,i.jsxs)(ea.VY,{ref:t,className:(0,$.cn)(tg({side:a}),l),...r,children:[s,(0,i.jsxs)(ea.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,i.jsx)(el.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ty.displayName=ea.VY.displayName;let tb=e=>{let{className:t,...a}=e;return(0,i.jsx)("div",{className:(0,$.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};tb.displayName="SheetHeader";let tN=e=>{let{className:t,...a}=e;return(0,i.jsx)("div",{className:(0,$.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};tN.displayName="SheetFooter";let tw=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(ea.Dx,{ref:t,className:(0,$.cn)("text-lg font-semibold text-foreground",a),...l})});tw.displayName=ea.Dx.displayName;let tz=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(ea.dk,{ref:t,className:(0,$.cn)("text-sm text-muted-foreground",a),...l})});tz.displayName=ea.dk.displayName;let t_=e=>{let{form:t,label:a,id:l,placeholder:s}=e;return(0,i.jsx)(eQ,{control:t.control,name:l,render:e=>{let{field:t}=e;return(0,i.jsx)(eK,{children:(0,i.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,i.jsxs)(e$,{className:"text-left font-bold",children:[a," :"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(e1,{}),(0,i.jsx)(e0,{children:(0,i.jsx)(eR.I,{placeholder:s,...t})})]})]})})}})};var tC=a(2328),tS=a(230),tk=a(5890),tI=a(1205),tF=a(167),tR=a.n(tF),tT=a(7307),tD=a(9108),tA=a(7805),tP=a(1485),tO=a(8178),tE=a(3441),tV=a(5159);let tL=tO.fC;tO.ZA,tO.B4;let tB=J.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,i.jsxs)(tO.xz,{ref:t,className:(0,$.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...s,children:[l,(0,i.jsx)(tO.JO,{asChild:!0,children:(0,i.jsx)(tE.Z,{className:"h-4 w-4 opacity-50"})})]})});tB.displayName=tO.xz.displayName;let tU=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(tO.u_,{ref:t,className:(0,$.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,i.jsx)(tV.Z,{className:"h-4 w-4"})})});tU.displayName=tO.u_.displayName;let tq=J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(tO.$G,{ref:t,className:(0,$.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,i.jsx)(tE.Z,{className:"h-4 w-4"})})});tq.displayName=tO.$G.displayName;let tM=J.forwardRef((e,t)=>{let{className:a,children:l,position:s="popper",...r}=e;return(0,i.jsx)(tO.h_,{children:(0,i.jsxs)(tO.VY,{ref:t,className:(0,$.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:s,...r,children:[(0,i.jsx)(tU,{}),(0,i.jsx)(tO.l_,{className:(0,$.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,i.jsx)(tq,{})]})})});tM.displayName=tO.VY.displayName,J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(tO.__,{ref:t,className:(0,$.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=tO.__.displayName;let tY=J.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,i.jsxs)(tO.ck,{ref:t,className:(0,$.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(tO.wU,{children:(0,i.jsx)(K.Z,{className:"h-4 w-4"})})}),(0,i.jsx)(tO.eT,{children:l})]})});function tZ(e){let{className:t,classNames:a,showOutsideDays:l=!0,...s}=e;return(0,i.jsx)(tP._W,{showOutsideDays:l,className:(0,$.cn)("p-3",t),locale:tI.fr,classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium hidden",nav:"space-x-1 flex items-center",nav_button:(0,$.cn)((0,d.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,$.cn)((0,d.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",caption_dropdowns:"flex gap-1 items-center",...a},components:{IconLeft:e=>{let{...t}=e;return(0,i.jsx)(tD.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,i.jsx)(tA.Z,{className:"h-4 w-4"})},Dropdown:e=>{var t,a;let{fromDate:l,fromMonth:s,fromYear:r,toDate:n,toMonth:o,toYear:d}=(0,tP.kD)(),{goToMonth:c,currentMonth:u}=(0,tP.HJ)();if("months"===e.name){let a=Array.from({length:12},(e,t)=>{let a=new Date(0,t);return{value:t.toString(),label:a.toLocaleString("default",{month:"long"})}});return(0,i.jsxs)(tL,{value:null===(t=e.value)||void 0===t?void 0:t.toString(),onValueChange:e=>{let t=new Date(u);t.setMonth(parseInt(e)),c(t)},children:[(0,i.jsx)(tB,{children:(0,tk.WU)(u,"MMM",{locale:tI.fr})}),(0,i.jsx)(tM,{children:a.map(e=>(0,i.jsx)(tY,{value:e.value,children:e.label},e.value))})]})}{let t=r||(null==s?void 0:s.getFullYear())||(null==l?void 0:l.getFullYear()),m=d||(null==o?void 0:o.getFullYear())||(null==n?void 0:n.getFullYear());if(!t||!m)return(0,i.jsx)(i.Fragment,{});{let l=Array.from({length:m-t+1},(e,a)=>{let l=t+a;return{value:l.toString(),label:l.toString()}});return(0,i.jsxs)(tL,{value:null===(a=e.value)||void 0===a?void 0:a.toString(),onValueChange:e=>{let t=new Date(u);t.setFullYear(parseInt(e)),c(t)},children:[(0,i.jsx)(tB,{children:u.getFullYear()}),(0,i.jsx)(tM,{children:l.map(e=>(0,i.jsx)(tY,{value:e.value,children:e.label},e.value))})]})}}}},...s})}function tG(e){let{date:t,setDate:a,defaultDate:l}=e;return(0,i.jsxs)(eA,{children:[(0,i.jsx)(eP,{asChild:!0,children:(0,i.jsxs)(d.z,{variant:"outline",className:(0,$.cn)("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),type:"button",children:[(0,i.jsx)(tT.Z,{className:"mr-2 h-4 w-4"}),t?(0,tk.WU)(t,"PPP",{locale:tI.fr}):(0,i.jsx)("span",{children:"S\xe9lectionner une date"})]})}),(0,i.jsx)(eO,{className:"w-auto p-0",children:(0,i.jsx)(tZ,{mode:"single",selected:t,onSelect:a,locale:tI.fr,captionLayout:"dropdown-buttons",fromYear:1900,toDate:new Date,defaultMonth:l,initialFocus:!0})})]})}tY.displayName=tO.ck.displayName,J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(tO.Z0,{ref:t,className:(0,$.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=tO.Z0.displayName,tZ.displayName="Calendar";let tW=e=>{let{label:t,value:a}=e;return(0,i.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,i.jsxs)(eG._,{htmlFor:t,className:"font-bold",children:[t," :"]}),t?(0,i.jsx)("span",{id:t,children:a}):(0,i.jsx)(et,{className:"w-24 h-6"})]})};var tH=a(7269),tQ=a(1328);let tJ=()=>{let{logout:e}=(0,tH.a)(),{setUser:t}=(0,tQ.L)(),{setParticipant:a}=(0,ek.p)();return(0,i.jsxs)(d.z,{variant:"destructive",onClick:function(){t(void 0),a(void 0),e()},className:"w-full",children:[(0,i.jsx)(n.ApJ,{className:"mr-2 h-4 w-4"}),"Se d\xe9connecter"]})},tX=e=>{var t,a;let{me:l,isEdit:s,setIsEdit:r,setIsOpen:c}=e,{updateParticipant:u,isUpdateLoading:m}=eF(),p=eS.z.object({firstname:eS.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:eS.z.string().min(1,{message:"Veuillez renseigner votre nom"}),email:eS.z.string().email({message:"Veuillez renseigner une adresse email valide"}),phone:eS.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).min(11,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}).max(14,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}),birthday:eS.z.date({required_error:"Veuillez renseigner votre date de naissance",invalid_type_error:"Veuillez renseigner une date de naissance valide"})}),f=(0,eC.cI)({resolver:(0,e_.F)(p),defaultValues:{firstname:null==l?void 0:l.firstname,name:null==l?void 0:l.name,email:null==l?void 0:l.email,phone:(a=null!==(t=null==l?void 0:l.phone)&&void 0!==t?t:"")?a.startsWith("0")?"+33 ".concat(a.slice(1)):a:"",birthday:(null==l?void 0:l.birthday)?(0,tC.Q)(null==l?void 0:l.birthday):void 0}});return(0,i.jsx)("div",{className:"h-full",children:(0,i.jsx)(eC.RV,{...f,children:(0,i.jsxs)("form",{onSubmit:f.handleSubmit(function(e){if(!f.formState.isDirty){r(!s);return}let t=e.birthday.toISOString().split("T")[0];u({...e,birthday:t},()=>{(0,o.Am)({title:"Profil mis \xe0 jour",description:"Vos informations ont \xe9t\xe9 mises \xe0 jour avec succ\xe8s"}),r(!s),c(!1)})}),className:"flex flex-col justify-between h-full",children:[(0,i.jsx)("div",{}),s?(0,i.jsxs)("div",{className:"grid w-full items-center gap-6",children:[(0,i.jsx)(t_,{form:f,label:"Pr\xe9nom",id:"firstname",placeholder:"Pr\xe9nom"}),(0,i.jsx)(t_,{form:f,label:"Nom",id:"name",placeholder:"Nom"}),(0,i.jsx)(t_,{form:f,label:"Email",id:"email",placeholder:"inscription@raid.fr"}),(0,i.jsx)(eQ,{control:f.control,name:"phone",render:()=>(0,i.jsx)(eK,{children:(0,i.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,i.jsx)(e$,{className:"text-left font-bold",children:"T\xe9l\xe9phone :"}),(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(e1,{}),(0,i.jsx)(eC.Qr,{name:"phone",control:f.control,render:e=>{let{field:{onChange:t,value:a}}=e;return(0,i.jsx)(tR(),{value:a,onChange:t,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})}),(0,i.jsx)(eQ,{control:f.control,name:"birthday",render:e=>{let{field:t}=e;return(0,i.jsx)(eK,{children:(0,i.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,i.jsx)(e$,{className:"text-left font-bold",children:"Date de naissance :"}),(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(e1,{}),(0,i.jsx)(eC.Qr,{name:"birthday",control:f.control,render:e=>{let{field:{onChange:a,value:l}}=e;return(0,i.jsx)(tG,{date:l,setDate:a,defaultDate:l||(0,tS.B)(new Date,-21),...t})}})]})]})})}})]}):(0,i.jsxs)("div",{className:"grid w-full items-center gap-10",children:[(0,i.jsx)(tW,{label:"Pr\xe9nom",value:null==l?void 0:l.firstname}),(0,i.jsx)(tW,{label:"Nom",value:null==l?void 0:l.name}),(0,i.jsx)(tW,{label:"Email",value:null==l?void 0:l.email}),(0,i.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,i.jsx)(eG._,{htmlFor:"phone",className:"font-bold",children:"T\xe9l\xe9phone :"}),(0,i.jsx)(tR(),{value:null==l?void 0:l.phone,country:"fr",specialLabel:"",inputClass:"bg-transparent",disabled:!0})]}),(0,i.jsx)(tW,{label:"Date de naissance",value:(null==l?void 0:l.birthday)?(0,tk.p6)((0,tC.Q)(l.birthday),"PPP",{locale:tI.fr}):"Non renseign\xe9"})]}),(0,i.jsx)(tN,{className:"mt-8",children:(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center w-full gap-6",children:[s?(0,i.jsx)(i.Fragment,{children:m?(0,i.jsx)(d.z,{variant:"default",disabled:!0,className:"w-full",children:(0,i.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,i.jsxs)(d.z,{className:"w-full",type:"submit",disabled:!f.formState.isDirty,children:[(0,i.jsx)(n.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})}):(0,i.jsx)(i.Fragment,{children:l&&(0,i.jsxs)(d.z,{variant:"outline",onClick:function(){(s&&f.formState.isDirty||!s)&&r(!s)},className:"w-full",children:[(0,i.jsx)(n.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})}),s?(0,i.jsxs)(d.z,{variant:"destructive",onClick:()=>f.reset(),className:"w-full",children:[(0,i.jsx)(n.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]}):(0,i.jsx)(th,{asChild:!0,children:(0,i.jsx)(tJ,{})})]})})]})})})},tK=()=>{let{me:e}=eF(),[t,a]=(0,J.useState)(!1),[l,s]=(0,J.useState)(!1);function r(){t&&s(!1),a(!t)}return(0,i.jsxs)(tf,{open:t,onOpenChange:r,children:[(0,i.jsx)(tx,{asChild:!0,children:(0,i.jsx)(d.z,{variant:"ghost",children:(null==e?void 0:e.firstname)===void 0||(null==e?void 0:e.name)===void 0?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(et,{className:"w-24 h-6"})}):(0,i.jsx)(i.Fragment,{children:e.firstname+" "+e.name})})}),(0,i.jsxs)(ty,{className:"flex flex-col justify-between",children:[(0,i.jsxs)(tb,{children:[(0,i.jsx)(tw,{children:"Param\xe8tres"}),(0,i.jsx)(tz,{children:"Information du compte"})]}),e?(0,i.jsx)(tX,{me:e,isEdit:l,setIsEdit:s,setIsOpen:r}):(0,i.jsx)(tN,{children:(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center w-full gap-6",children:[(0,i.jsx)("div",{className:"w-full"}),(0,i.jsx)(th,{asChild:!0,children:(0,i.jsx)(tJ,{})})]})})]})]})};var t$=a(1047),t0=a(2891),t1=a(4848),t2=a(3685),t4=a(7501);let t5=t2.fC,t6=t2.xz;t2.ZA,t2.Uv,t2.Tr,t2.Ee,J.forwardRef((e,t)=>{let{className:a,inset:l,children:s,...r}=e;return(0,i.jsxs)(t2.fF,{ref:t,className:(0,$.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",l&&"pl-8",a),...r,children:[s,(0,i.jsx)(tA.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=t2.fF.displayName,J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(t2.tu,{ref:t,className:(0,$.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})}).displayName=t2.tu.displayName;let t3=J.forwardRef((e,t)=>{let{className:a,sideOffset:l=4,...s}=e;return(0,i.jsx)(t2.Uv,{children:(0,i.jsx)(t2.VY,{ref:t,sideOffset:l,className:(0,$.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})})});t3.displayName=t2.VY.displayName;let t7=J.forwardRef((e,t)=>{let{className:a,inset:l,...s}=e;return(0,i.jsx)(t2.ck,{ref:t,className:(0,$.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l&&"pl-8",a),...s})});function t8(){let{setTheme:e}=(0,t1.F)();return(0,i.jsxs)(t5,{children:[(0,i.jsx)(t6,{asChild:!0,children:(0,i.jsxs)(d.z,{variant:"outline",size:"icon",children:[(0,i.jsx)(t$.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,i.jsx)(t0.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,i.jsx)("span",{className:"sr-only",children:"Changer le th\xe8me"})]})}),(0,i.jsxs)(t3,{align:"end",children:[(0,i.jsx)(t7,{onClick:()=>e("light"),children:"Clair"}),(0,i.jsx)(t7,{onClick:()=>e("dark"),children:"Sombre"}),(0,i.jsx)(t7,{onClick:()=>e("system"),children:"Syst\xe8me"})]})]})}t7.displayName=t2.ck.displayName,J.forwardRef((e,t)=>{let{className:a,children:l,checked:s,...r}=e;return(0,i.jsxs)(t2.oC,{ref:t,className:(0,$.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:s,...r,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(t2.wU,{children:(0,i.jsx)(K.Z,{className:"h-4 w-4"})})}),l]})}).displayName=t2.oC.displayName,J.forwardRef((e,t)=>{let{className:a,children:l,...s}=e;return(0,i.jsxs)(t2.Rk,{ref:t,className:(0,$.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,i.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,i.jsx)(t2.wU,{children:(0,i.jsx)(t4.Z,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=t2.Rk.displayName,J.forwardRef((e,t)=>{let{className:a,inset:l,...s}=e;return(0,i.jsx)(t2.__,{ref:t,className:(0,$.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",a),...s})}).displayName=t2.__.displayName,J.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,i.jsx)(t2.Z0,{ref:t,className:(0,$.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=t2.Z0.displayName;let t9=()=>{let[e,t]=(0,J.useState)(!1);return(0,i.jsx)("div",{className:"px-4 py-5 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8",children:(0,i.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,i.jsxs)("a",{href:"/","aria-label":"Company",title:"Company",className:"inline-flex items-center",children:[(0,i.jsxs)("svg",{className:"w-8 text-deep-purple-accent-400",viewBox:"0 0 24 24",strokeLinejoin:"round",strokeWidth:"2",strokeLinecap:"round",strokeMiterlimit:"10",stroke:"currentColor",fill:"none",children:[(0,i.jsx)("rect",{x:"3",y:"1",width:"7",height:"12"}),(0,i.jsx)("rect",{x:"3",y:"17",width:"7",height:"6"}),(0,i.jsx)("rect",{x:"14",y:"1",width:"7",height:"6"}),(0,i.jsx)("rect",{x:"14",y:"11",width:"7",height:"12"})]}),(0,i.jsx)("span",{className:"ml-2 text-xl font-bold tracking-wide uppercase",children:"Inscription Raid 2024"})]}),(0,i.jsxs)("div",{className:"items-center hidden space-x-8 lg:flex",children:[(0,i.jsx)(tK,{}),(0,i.jsx)(t8,{})]}),(0,i.jsxs)("div",{className:"lg:hidden",children:[(0,i.jsx)("button",{"aria-label":"Open Menu",title:"Open Menu",className:"p-2 -mr-1 transition duration-200 rounded focus:outline-none focus:shadow-outline hover:bg-deep-purple-50 focus:bg-deep-purple-50",onClick:()=>t(!0),children:(0,i.jsxs)("svg",{className:"w-5 text-zinc-600",viewBox:"0 0 24 24",children:[(0,i.jsx)("path",{fill:"currentColor",d:"M23,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h22c0.6,0,1,0.4,1,1S23.6,13,23,13z"}),(0,i.jsx)("path",{fill:"currentColor",d:"M23,6H1C0.4,6,0,5.6,0,5s0.4-1,1-1h22c0.6,0,1,0.4,1,1S23.6,6,23,6z"}),(0,i.jsx)("path",{fill:"currentColor",d:"M23,20H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h22c0.6,0,1,0.4,1,1S23.6,20,23,20z"})]})}),e&&(0,i.jsx)("div",{className:"absolute top-0 left-0 w-full",children:(0,i.jsxs)("div",{className:"p-5 bg-white border rounded shadow-sm",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("a",{href:"/","aria-label":"Company",title:"Company",className:"inline-flex items-center",children:[(0,i.jsxs)("svg",{className:"w-8 text-deep-purple-accent-400",viewBox:"0 0 24 24",strokeLinejoin:"round",strokeWidth:"2",strokeLinecap:"round",strokeMiterlimit:"10",stroke:"currentColor",fill:"none",children:[(0,i.jsx)("rect",{x:"3",y:"1",width:"7",height:"12"}),(0,i.jsx)("rect",{x:"3",y:"17",width:"7",height:"6"}),(0,i.jsx)("rect",{x:"14",y:"1",width:"7",height:"6"}),(0,i.jsx)("rect",{x:"14",y:"11",width:"7",height:"12"})]}),(0,i.jsx)("span",{className:"ml-2 text-xl font-bold tracking-wide text-zinc-800 uppercase",children:"Inscription Raid 2024"})]})}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{"aria-label":"Close Menu",title:"Close Menu",className:"p-2 -mt-2 -mr-2 transition duration-200 rounded hover:bg-zinc-200 focus:bg-zinc-200 focus:outline-none focus:shadow-outline",onClick:()=>t(!1),children:(0,i.jsx)("svg",{className:"w-5 text-zinc-600",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{fill:"currentColor",d:"M19.7,4.3c-0.4-0.4-1-0.4-1.4,0L12,10.6L5.7,4.3c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l6.3,6.3l-6.3,6.3 c-0.4,0.4-0.4,1,0,1.4C4.5,19.9,4.7,20,5,20s0.5-0.1,0.7-0.3l6.3-6.3l6.3,6.3c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3 c0.4-0.4,0.4-1,0-1.4L13.4,12l6.3-6.3C20.1,5.3,20.1,4.7,19.7,4.3z"})})})})]}),(0,i.jsx)(tK,{})]})})]})]})})};var ae=a(7907);let at=e=>{let{form:t,label:a,id:l,placeholder:s}=e;return(0,i.jsx)(eQ,{control:t.control,name:l,render:e=>{let{field:t}=e;return(0,i.jsx)(eK,{children:(0,i.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,i.jsx)(e$,{className:"text-right",children:a}),(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(e1,{}),(0,i.jsx)(e0,{children:(0,i.jsx)(eR.I,{placeholder:s,...t})})]})]})})}})};var aa=a(7456);let al=e=>{var t,a;let{user:l,isOpened:s,setIsOpened:r}=e,{createParticipant:n}=eF(),{createTeam:c,refetchTeam:u}=eI(),{inviteToken:m}=(0,aa.u)(),{joinTeam:p,isJoinLoading:f}=W(),[x,h]=(0,J.useState)(!1),v=eS.z.object({firstname:eS.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:eS.z.string().min(1,{message:"Veuillez renseigner votre nom"}),email:eS.z.string().email({message:"Veuillez renseigner une adresse email valide"}),phone:eS.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).min(11,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}).max(14,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}),birthday:eS.z.date({required_error:"Veuillez renseigner votre date de naissance",invalid_type_error:"Veuillez renseigner une date de naissance valide"})}),j=(0,eC.cI)({resolver:(0,e_.F)(v),defaultValues:{firstname:l.firstname,name:l.name,email:l.email,phone:(a=null!==(t=null==l?void 0:l.phone)&&void 0!==t?t:"")?a.startsWith("0")?"+33 ".concat(a.slice(1)):a:"",birthday:l.birthday?(0,tC.Q)(l.birthday):void 0}});return(0,i.jsx)(es,{open:s,onOpenChange:r,children:(0,i.jsx)(eo,{className:"sm:max-w-[600px]",hideClose:!0,children:(0,i.jsx)(eW,{...j,children:(0,i.jsxs)("form",{onSubmit:j.handleSubmit(function(e){let t=e.birthday.toISOString().split("T")[0];h(!0),n({...e,birthday:t},()=>{void 0===m?c({name:"\xc9quipe de ".concat(e.firstname," ").concat(e.name)},()=>{u(),r(!1),h(!1),(0,o.Am)({title:"Votre profil a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s"})}):p(m,()=>{u(),r(!1),h(!1),(0,o.Am)({title:"Vous avez rejoint l'\xe9quipe avec succ\xe8s"})})})}),children:[(0,i.jsxs)(ed,{children:[(0,i.jsx)(eu,{children:"Informations personnelles"}),(0,i.jsx)(em,{children:"Veuillez renseigner vos information pour pouvoir cr\xe9er une \xe9quipe"})]}),(0,i.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,i.jsx)(at,{form:j,label:"Pr\xe9nom",id:"firstname",placeholder:"Pr\xe9nom"}),(0,i.jsx)(at,{form:j,label:"Nom",id:"name",placeholder:"Nom"}),(0,i.jsx)(at,{form:j,label:"Email",id:"email",placeholder:"inscription@raid.fr"}),(0,i.jsx)(eQ,{control:j.control,name:"phone",render:()=>(0,i.jsx)(eK,{children:(0,i.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,i.jsx)(e$,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(e1,{}),(0,i.jsx)(eC.Qr,{name:"phone",control:j.control,render:e=>{let{field:{onChange:t,value:a}}=e;return(0,i.jsx)(tR(),{value:a,onChange:t,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})}),(0,i.jsx)(eQ,{control:j.control,name:"birthday",render:e=>{let{field:t}=e;return(0,i.jsx)(eK,{children:(0,i.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,i.jsx)(e$,{className:"text-right",children:"Date de naissance"}),(0,i.jsxs)("div",{className:"col-span-4",children:[(0,i.jsx)(e1,{}),(0,i.jsx)(eC.Qr,{name:"birthday",control:j.control,render:e=>{let{field:{onChange:a,value:l}}=e;return(0,i.jsx)(tG,{date:l,setDate:a,defaultDate:l||(0,tS.B)(new Date,-21),...t})}})]})]})})}})]}),(0,i.jsx)(ec,{children:(0,i.jsx)(d.z,{type:"submit",className:"w-full mt-4",children:x?(0,i.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"}):"Valider"})})]})})})})},as=()=>{let{token:e}=(0,G.u)(),{user:t,setUser:a}=(0,tQ.L)(),{data:l,isLoading:s}=b({headers:{Authorization:"Bearer ".concat(e)}},{enabled:null!==e&&void 0===t,retry:0});return void 0!==l&&void 0===t&&null!==e&&a(l),{me:t,isLoading:s}},ai=e=>{let{isOpened:t,setIsOpened:a}=e,{inviteToken:l,resetInviteToken:s}=(0,aa.u)(),{joinTeam:r,isJoinLoading:n}=W(),{refetchTeam:o}=eI();function c(){a(!1),s()}return(0,i.jsx)(es,{open:t,onOpenChange:a,children:(0,i.jsxs)(eo,{className:"sm:max-w-[600px]",children:[(0,i.jsx)(ed,{children:(0,i.jsx)(eu,{children:"Rejoindre une \xe9quipe"})}),(0,i.jsx)(ea.Be,{children:"Vous vous appr\xeatez \xe0 rejoindre une \xe9quipe et quitter votre \xe9quipe actuelle. Toutes vos informations seront transf\xe9r\xe9es \xe0 votre nouvelle \xe9quipe."}),(0,i.jsxs)("div",{className:"flex justify-end mt-2 space-x-4",children:[(0,i.jsx)(d.z,{variant:"outline",onClick:c,children:"Annuler"}),(0,i.jsx)(d.z,{onClick:function(){void 0!==l&&r(l,()=>{o(),c()})},disabled:n,className:"w-[140px]",children:n?(0,i.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"}):"Rejoindre l'\xe9quipe"})]})]})})};var ar=()=>{let{isTokenQueried:e,token:t}=(0,tH.a)(),{me:a,isFetched:l}=eF(),{me:s}=as(),{team:r}=eI(),[n,o]=(0,J.useState)(!1),d=(0,ae.useSearchParams)().get("invite"),{inviteToken:c,setInviteToken:u}=(0,aa.u)(),m=(0,ae.useRouter)();return null!==d&&c!==d&&(u(d),m.replace("/")),e&&null===t&&m.replace("/login"),l&&void 0===a&&!n&&o(!0),void 0===c||n||o(!0),(0,i.jsxs)(i.Fragment,{children:[l&&void 0===a&&n&&s&&(0,i.jsx)(al,{isOpened:n,setIsOpened:o,user:s}),void 0!==c&&(0,i.jsx)(ai,{isOpened:n,setIsOpened:o}),(0,i.jsx)(t9,{}),(0,i.jsxs)("main",{className:"flex flex-col items-center",children:[(0,i.jsx)("div",{className:"w-full px-16",children:(0,i.jsx)(tm,{team:r})}),(0,i.jsxs)("div",{className:"grid xl:grid-cols-2 gap-16 w-full p-16 grid-cols-1",children:[(0,i.jsx)(td,{participant:null==r?void 0:r.captain,isCaptain:!0}),(null==r?void 0:r.second)!==null?(0,i.jsx)(td,{participant:null==r?void 0:r.second,isCaptain:!1}):(0,i.jsx)(Q,{team:r})]})]})]})}},575:function(e,t,a){"use strict";a.d(t,{d:function(){return o},z:function(){return d}});var l=a(7437),s=a(2265),i=a(9143),r=a(7742),n=a(1657);let o=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-red-700 text-destructive-foreground hover:bg-red-700/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:r,asChild:d=!1,...c}=e,u=d?i.g7:"button";return(0,l.jsx)(u,{className:(0,n.cn)(o({variant:s,size:r,className:a})),ref:t,...c})});d.displayName="Button"},5671:function(e,t,a){"use strict";a.d(t,{Ol:function(){return n},SZ:function(){return d},Zb:function(){return r},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var l=a(7437),s=a(2265),i=a(1657);let r=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});r.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...s})});n.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},2782:function(e,t,a){"use strict";a.d(t,{I:function(){return r}});var l=a(7437),s=a(2265),i=a(1657);let r=s.forwardRef((e,t)=>{let{className:a,type:s,...r}=e;return(0,l.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});r.displayName="Input"},2647:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var l=a(7437),s=a(2265),i=a(4602),r=a(7742),n=a(1657);let o=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,l.jsx)(i.f,{ref:t,className:(0,n.cn)(o(),a),...s})});d.displayName=i.f.displayName},7147:function(e,t,a){"use strict";a.d(t,{Am:function(){return u},pm:function(){return m}});var l=a(2265);let s=0,i=new Map,r=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?r(a):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=n(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),l=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||l()}}}),{id:a,dismiss:l,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=l.useState(d);return l.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7269:function(e,t,a){"use strict";a.d(t,{a:function(){return v}});var l=a(2265),s=a(7908),i=a(3374),r=a(4642),n=a(4505),o=a(7907),d=a(1328),c=a(5400),u=a(7456),m=a(9079);let p="Titan",f=m.env.NEXT_PUBLIC_REDIRECT_URL||"https://myecl.fr/static.html",x="https://hyperion-3.dev.eclair.ec-lyon.fr",h=["API"],v=()=>{let[e,t]=(0,l.useState)(!1),{token:a,setToken:m,refreshToken:v,setRefreshToken:j}=(0,n.u)(),{resetUser:g}=(0,d.L)(),{resetParticipant:y}=(0,c.p)(),{resetInviteToken:b}=(0,u.u)(),[N,w]=(0,l.useState)(!1),z=(0,o.useRouter)();async function _(e){let t=new TextEncoder().encode(e);return await crypto.subtle.digest("SHA-256",t).then(e=>btoa(Array.from(new Uint8Array(e)).map(e=>String.fromCharCode(e)).join("")).replace(/\+/g,"-").replace(/\//g,"_"))}async function C(e){let a=(0,i.stringify)(e),l=await s.Z.post("".concat(x,"/auth/token"),a,{headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}});if(200!=l.status){t(!1);return}let r=l.data;t(!1),m(r.access_token),j(r.refresh_token)}async function S(){return(console.log("refreshing tokens"),v)?(await C({grant_type:"refresh_token",client_id:p,refresh_token:v}),v):null}function k(){return!!a&&(a?JSON.parse(atob(a.split(".")[1])).exp:0)<Math.floor(Date.now()/1e3)}async function I(e){let a=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=a.length,s=crypto.getRandomValues(new Uint8Array(e)),i=0;i<e;i++)t+=a.charAt(Math.floor(s[i]/e*l));return t}(128),l="".concat(x,"/auth/authorize?client_id=").concat(p,"&response_type=code&scope=").concat(h.join(" "),"&redirect_uri=").concat(f,"&code_challenge=").concat(await _(a),"&code_challenge_method=S256");t(!0);let s=window.outerHeight/2+window.screenY-450,i=window.outerWidth/2+window.screenX-400;e=window.open(l,"Hyperion","height=".concat(900,",width=").concat(800,",top=").concat(s,",left=").concat(i,",scrollbars=yes"));let r=setInterval(()=>{try{e&&e.closed&&(clearInterval(r),t(!1))}catch(e){console.error(e)}},1e3);window.addEventListener("message",t=>{let l=t.data;null!=l&&null!==new URL(l).searchParams.get("code")&&function(t){let l=new URL(t).searchParams.get("code");e&&(e.close(),e=null),C({grant_type:"authorization_code",client_id:p,code:l,redirect_uri:f,code_verifier:a})}(l)})}async function F(){return t(!0),null!==a?k()?S():(m(a),t(!1)):(t(!1),z.replace("/login")),w(!0),a}return(0,r.a)({queryKey:["getTokenFromStorage"],queryFn:F,retry:0}),(0,r.a)({queryKey:["refreshToken"],queryFn:S,retry:0,enabled:k()}),{getTokenFromRequest:I,isLoading:e,token:a,isTokenQueried:N,logout:function(){m(null),j(null),w(!0),z.replace("/login"),g(),y(),b()}}}},7456:function(e,t,a){"use strict";a.d(t,{u:function(){return i}});var l=a(2020),s=a(5249);let i=(0,l.Ue)()((0,s.mW)((0,s.tJ)(e=>({InviteToken:void 0,setInviteToken:t=>{e({inviteToken:t})},resetInviteToken:()=>{e({inviteToken:void 0})}}),{name:"raid-invite-token-storage"})))},5400:function(e,t,a){"use strict";a.d(t,{p:function(){return i}});var l=a(2020),s=a(5249);let i=(0,l.Ue)()((0,s.mW)((0,s.tJ)(e=>({participant:void 0,setParticipant:t=>{e({participant:t})},resetParticipant:()=>{e({participant:void 0})}}),{name:"raid-participant-storage"})))},4505:function(e,t,a){"use strict";a.d(t,{u:function(){return i}});var l=a(2020),s=a(5249);let i=(0,l.Ue)()((0,s.mW)((0,s.tJ)(e=>({token:null,refreshToken:null,userId:null,setToken:t=>{let a=t?JSON.parse(atob(t.split(".")[1])).sub:null;e({token:t,userId:a})},setRefreshToken:t=>{e({refreshToken:t})}}),{name:"token-storage"})))},1328:function(e,t,a){"use strict";a.d(t,{L:function(){return i}});var l=a(2020),s=a(5249);let i=(0,l.Ue)()((0,s.mW)((0,s.tJ)(e=>({user:void 0,setUser:t=>{e({user:t})},resetUser:()=>{e({user:void 0})}}),{name:"raid-user-storage"})))}},function(e){e.O(0,[310,422,470,904,498,482,971,69,744],function(){return e(e.s=1827)}),_N_E=e.O()}]);