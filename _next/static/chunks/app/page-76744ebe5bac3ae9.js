(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{26113:function(e,i,l){Promise.resolve().then(l.bind(l,79232))},79232:function(e,i,l){"use strict";l.r(i),l.d(i,{default:function(){return eJ}});var t,n,s=l(57437),a=l(48185),r=l(54008),o=l(78068),d=l(84980),c=l(40133);let u=()=>{let{token:e}=(0,c.a)(),{mutate:i,isPending:l,isSuccess:t}=(0,d.uBv)({}),{mutate:n,isPending:s,isSuccess:a}=(0,d.K$j)({});return{createInviteToken:(l,t)=>{i({headers:{Authorization:"Bearer ".concat(e)},pathParams:{teamId:l}},{onSuccess(e,i,l){t(e)}})},isCreationLoading:l,isCreationSuccess:t,joinTeam:(i,l)=>{n({headers:{Authorization:"Bearer ".concat(e)},pathParams:{token:i}},{onSettled:(e,i)=>{if(i){console.log(i),(0,o.Am)({title:"Erreur lors du changement d'\xe9quipe",description:"Une erreur est survenue, veuillez r\xe9essayer plus tard",variant:"destructive"});return}l()}})},isJoinLoading:s,isJoinSuccess:a}};var m=l(2265),v=l(44032);let p=e=>{let{team:i}=e,{createInviteToken:l,isCreationLoading:t}=u(),[n,d]=(0,m.useState)(null);return(0,s.jsx)(a.Zb,{className:"w-full",children:(0,s.jsx)(a.aY,{className:"w-full h-full",children:(0,s.jsx)("div",{className:"flex m-auto h-full mt-3 flex-col",children:(0,s.jsxs)("div",{className:"flex m-auto flex-col items-center",children:[(0,s.jsx)(v.f,{isLoading:t,onClick:function(){void 0!==i&&l(i.id,async e=>{let i="".concat("https://inscription-raid.myecl.fr","?invite=").concat(e.token);d(i);try{await navigator.clipboard.writeText(i),(0,o.Am)({title:"Invitation envoy\xe9e",description:"Le lien d'invitation a \xe9t\xe9 copi\xe9 dans le presse-papier."})}catch(e){(0,o.Am)({variant:"destructive",title:"Erreur",description:"Impossible de copier le lien d'invitation dans le presse-papier."})}})},label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.b9W,{className:"inline mr-4"}),(0,s.jsx)("span",{children:"Inviter un participant"})]}),className:"w-[200px]",variant:"outline"}),n&&(0,s.jsx)("span",{className:"text-sm text-muted-foreground mt-4",children:n})]})})})})};var h=l(22988),x=l(98324),f=l(18676);let j="Progress",[g,y]=(0,x.b)(j),[b,_]=g(j),N=(0,m.forwardRef)((e,i)=>{let{__scopeProgress:l,value:t,max:n,getValueLabel:s=w,...a}=e,r=I(n)?n:100,o=F(t,r)?t:null,d=S(o)?s(o,r):void 0;return(0,m.createElement)(b,{scope:l,value:o,max:r},(0,m.createElement)(f.WV.div,(0,h.Z)({"aria-valuemax":r,"aria-valuemin":0,"aria-valuenow":S(o)?o:void 0,"aria-valuetext":d,role:"progressbar","data-state":C(o,r),"data-value":null!=o?o:void 0,"data-max":r},a,{ref:i})))});N.propTypes={max(e,i,l){let t=e[i],n=String(t);return t&&!I(t)?Error(`Invalid prop \`max\` of value \`${n}\` supplied to \`${l}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`):null},value(e,i,l){let t=e[i],n=String(t),s=I(e.max)?e.max:100;return null==t||F(t,s)?null:Error(`Invalid prop \`value\` of value \`${n}\` supplied to \`${l}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` if the progress is indeterminate.

Defaulting to \`null\`.`)}};let z=(0,m.forwardRef)((e,i)=>{var l;let{__scopeProgress:t,...n}=e,s=_("ProgressIndicator",t);return(0,m.createElement)(f.WV.div,(0,h.Z)({"data-state":C(s.value,s.max),"data-value":null!==(l=s.value)&&void 0!==l?l:void 0,"data-max":s.max},n,{ref:i}))});function w(e,i){return`${Math.round(e/i*100)}%`}function C(e,i){return null==e?"indeterminate":e===i?"complete":"loading"}function S(e){return"number"==typeof e}function I(e){return S(e)&&!isNaN(e)&&e>0}function F(e,i){return S(e)&&!isNaN(e)&&e<=i&&e>=0}var k=l(37440);let O=m.forwardRef((e,i)=>{let{className:l,value:t,...n}=e;return(0,s.jsx)(N,{ref:i,className:(0,k.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",l),...n,children:(0,s.jsx)(z,{className:"h-full w-full flex-1 bg-[#304D30] transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})});O.displayName=N.displayName;var E=l(89733),A=l(2183);let T=()=>(0,s.jsx)(a.aY,{children:[...Array(10)].map((e,i)=>(0,s.jsxs)("div",{className:"grid p-2 grid-cols-6 items-center w-full h-[65px]",children:[(0,s.jsx)("span",{className:"font-semibold text-left my-auto col-span-2",children:(0,s.jsx)(A.O,{className:"w-32 h-7"})}),(0,s.jsx)(A.O,{className:"w-64 h-6 col-span-4 ml-auto"})]},i))});var V=l(44541),P=l(77504);let R=()=>{let{token:e}=(0,c.a)(),{data:i,isLoading:l,refetch:t}=(0,d.wGS)({headers:{Authorization:"Bearer ".concat(e)}},{enabled:!1,retry:0,queryHash:"getRaidUrl"});return{paymentUrl:i,isLoading:l,refetchUrl:t}};var L=l(16463),B=l(76072),q=l(93191),G=l(84475),Q=l(17042);let U=()=>{let{token:e,userId:i,isTokenExpired:l}=(0,c.a)(),{isAdmin:t}=(0,Q.a)(),n=(0,q.NL)(),{participant:s,setParticipant:a}=(0,G.p)(),{data:r,isLoading:u,isFetched:m,refetch:v}=(0,d.p5N)({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:i}},{enabled:null!==i&&void 0===s&&!t()&&!l(),retry:0,queryHash:"getParticipantById"}),{mutate:p,isSuccess:h,isPending:x}=(0,d.UIb)({}),{mutate:f,isSuccess:j,isPending:g}=(0,d.iEE)({});return void 0!==r&&s!==r&&null!==e&&a(r),{me:s,isLoading:u,isFetched:m,refetch:v,createParticipant:(i,l)=>{p({body:i,headers:{Authorization:"Bearer ".concat(e)}},{onSuccess:()=>{n.invalidateQueries({predicate:e=>"getParticipantById"===e.queryHash||"getTeamByParticipantId"===e.queryHash}),l()},onError:(e,i,l)=>{console.log(e),(0,o.Am)({title:"Erreur lors de la cr\xe9ation du participant",description:"Une erreur est survenue, veuillez r\xe9essayer plus tard",variant:"destructive"})}})},isCreationSuccess:h,isCreationLoading:x,updateParticipant:(i,l,t)=>{f({body:i,headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:l}},{onSettled:()=>{v(),t()}})},isUpdateSuccess:j,isUpdateLoading:g}};var D=l(31283),Z=l(29973),H=l(4867);let W=e=>{let{isLoading:i,onClick:l}=e;return(0,s.jsxs)(E.z,{className:"border-[#3d33a6] group-hover:border-[#3d33a6] p-0 group",variant:"outline",disabled:i,onClick:l,children:[(0,s.jsxs)("svg",{width:"46",viewBox:"20 0 40 50",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"pl-3 w-14",children:[(0,s.jsxs)("g",{"clip-path":"url(#clip0_16_2460)",children:[(0,s.jsx)("path",{d:"M28.7465 34.0888C24.2637 28.8367 27.2522 15.5602 29.1589 15.5602C25.477 15.4863 19.2669 17.9752 20.1037 26.856C20.428 29.479 21.4172 31.9676 22.9717 34.071C24.5263 36.1745 26.5912 37.8184 28.9584 38.8373C31.3257 39.8562 33.9116 40.2139 36.4558 39.8746C38.9999 39.5352 41.4123 38.5107 43.4499 36.9043C36.409 42.0947 31.6364 37.468 28.7465 34.0888Z",fill:"url(#paint0_linear_16_2460)"}),(0,s.jsx)("path",{d:"M45.1931 25.1679C41.4695 32.8474 30.0474 36.0787 28.7563 34.1011C30.9888 37.4433 36.5265 42.1101 43.5046 36.8734C45.5247 35.2573 47.0962 33.1214 48.0613 30.6806C49.0264 28.2397 49.3509 25.58 49.0022 22.9689C48.6536 20.3577 47.6441 17.8872 46.0752 15.8059C44.5063 13.7245 42.4334 12.1056 40.0649 11.1121C47.9515 14.7223 47.1536 21.1234 45.1931 25.1679Z",fill:"url(#paint1_linear_16_2460)"}),(0,s.jsx)("path",{d:"M29.1602 15.5613C37.2292 14.671 46.3531 23.1852 45.1936 25.169C47.4648 21.2015 47.9848 14.7234 40.1131 11.1132C37.7418 10.118 35.1584 9.78278 32.6218 10.1412C30.0853 10.4996 27.6847 11.5391 25.6607 13.1554C23.6368 14.7716 22.0606 16.9079 21.0902 19.35C20.1199 21.7922 19.7894 24.4543 20.1319 27.0696C19.5611 18.2381 26.1478 15.8939 29.1602 15.5613Z",fill:"url(#paint2_linear_16_2460)"})]}),(0,s.jsxs)("linearGradient",{id:"paint0_linear_16_2460",x1:"23.1041",y1:"17.5615",x2:"36.9885",y2:"40.8976",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{"stop-color":"#3B8964"}),(0,s.jsx)("stop",{offset:"0.25","stop-color":"#5ABF8C"})]}),(0,s.jsxs)("linearGradient",{id:"paint1_linear_16_2460",x1:"33.6387",y1:"38.5088",x2:"48.0033",y2:"15.916",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{"stop-color":"#803471"}),(0,s.jsx)("stop",{offset:"0.21","stop-color":"#B34F9E"})]}),(0,s.jsxs)("linearGradient",{id:"paint2_linear_16_2460",x1:"22.2234",y1:"16.1265",x2:"45.6611",y2:"24.404",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{offset:"0.6","stop-color":"#F99C2E"}),(0,s.jsx)("stop",{offset:"1","stop-color":"#C57538"})]}),(0,s.jsx)("clipPath",{id:"clip0_16_2460",children:(0,s.jsx)("rect",{width:"30",height:"30",fill:"white",transform:"translate(20 10)"})}),(0,s.jsx)("clipPath",{id:"clip1_16_2460",children:(0,s.jsx)("rect",{width:"72",height:"22",fill:"white",transform:"translate(173 14)"})})]}),(0,s.jsx)("span",{className:"text-white bg-[#4C40CF] group-hover:bg-[#3d33a6] h-full justify-center flex items-center rounded-r-sm w-[165px]",children:i?(0,s.jsx)(H.BGW,{className:"h-4 w-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:["Payer avec ",(0,s.jsx)("span",{className:"font-bold ml-1",children:"helloasso"})]})})]})};var M=l(89736);let J=()=>{var e,i,l;let{me:t}=U(),{price:n}=(0,D.k)(),{paymentUrl:a,isLoading:r,refetchUrl:o}=R(),[d,c]=(0,m.useState)(!1),[u,v]=(0,m.useState)(!1),p=(0,L.useRouter)();!r&&a&&p.push(a.url);let h=!(null==t?void 0:t.payment),x=["centrale","otherschool"].includes((0,P.l)((null==t?void 0:t.situation)||void 0)||"")&&(null==t?void 0:null===(e=t.student_card)||void 0===e?void 0:e.validation)==="accepted",f=["centrale","otherschool"].includes((0,P.l)((null==t?void 0:t.situation)||void 0)||"")&&(null==t?void 0:null===(i=t.student_card)||void 0===i?void 0:i.id)!==void 0&&(null==t?void 0:null===(l=t.student_card)||void 0===l?void 0:l.validation)!=="accepted",j=(null==t?void 0:t.t_shirt_size)&&!(null==t?void 0:t.t_shirt_payment)&&(null==t?void 0:t.t_shirt_size)!=="None";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(B.Z,{isOpened:u,setIsOpened:v,isLoading:r,title:"Payer l'inscription",description:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mt-6 mb-2 font-semibold",children:"Votre carte \xe9tudiante n'est pas encore valid\xe9e !"}),(0,s.jsx)("p",{children:"Votre carte \xe9tudiante n'est pas encore valid\xe9e, si vous proc\xe9dez au paiement maintenant, vous payerez le tarif \xe9tudiant. Cependant, si votre carte est finalement refus\xe9e, il vous faudra repayer la diff\xe9rence entre le tarif \xe9tudiant et le tarif externe."})]}),customButton:(0,s.jsx)(E.z,{className:"col-span-4 ml-auto w-[100px]",disabled:!h,onClick:e=>{c(!0),v(!1)}})}),(0,s.jsx)(B.Z,{isOpened:d,setIsOpened:c,isLoading:r,title:"Payer l'inscription",description:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"my-2 font-semibold",children:"R\xe9capitulatif"}),(0,s.jsxs)("div",{className:"space-y-2",children:[h&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Participation"}),(0,s.jsxs)("span",{children:[(x?null==n?void 0:n.student_price:null==n?void 0:n.external_price)/100," ","€"]})]}),j&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:["T-Shirt taille ",t.t_shirt_size]}),(0,s.jsxs)("span",{children:[(null==n?void 0:n.t_shirt_price)/100," €"]})]}),h&&j&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.Z,{}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{children:[((x?null==n?void 0:n.student_price:null==n?void 0:n.external_price)+(null==n?void 0:n.t_shirt_price))/100," ","€"]})]})]})]}),(0,s.jsx)("div",{className:"mt-6 mb-2 font-semibold",children:"Information sur le prestataire de paiement"}),(0,s.jsx)("p",{children:"Vous allez \xeatre redirig\xe9 vers HelloAsso pour proc\xe9der au paiement de votre inscription. Ce service ne prend aucun frais sur les paiements, il se repose uniquement sur les dons. Par d\xe9faut, HelloAsso vous propose de faire un don. Si vous choississez de le faire, seul HelloAsso en b\xe9n\xe9ficiera."})]}),customButton:(0,s.jsx)(W,{isLoading:r,onClick:()=>o()})}),(0,s.jsx)(M.pn,{children:(0,s.jsxs)(M.u,{children:[(0,s.jsx)(M.aJ,{children:(0,s.jsx)(E.z,{className:"col-span-4 ml-auto w-[100px]",disabled:!h,variant:f?"destructive":"default",onClick:e=>{f?v(!0):c(!0)},children:"Payer"})}),!h&&(0,s.jsx)(M._v,{children:(0,s.jsx)("p",{children:"Votre dossier est totalement valid\xe9 !"})})]})})]})};var Y=l(67935),$=l(31014),K=l(39343),X=l(59772);let ee=()=>{let{token:e,userId:i,isTokenExpired:l}=(0,c.a)(),{me:t}=U(),{isAdmin:n}=(0,Q.a)(),s=(0,q.NL)(),{data:a,isLoading:r,refetch:u}=(0,d.B1y)({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:i}},{enabled:null!==i&&!n()&&!l()&&void 0!==t,retry:0,queryHash:"getTeamByParticipantId"}),{mutate:m,isSuccess:v,isPending:p}=(0,d.TuY)({}),{mutate:h,isSuccess:x,isPending:f}=(0,d.fKu)({});return{team:a,isLoading:r,createTeam:(i,l)=>{m({body:i,headers:{Authorization:"Bearer ".concat(e)}},{onSuccess(e,i,t){s.invalidateQueries({predicate:e=>"getTeamByParticipantId"===e.queryHash}),l()},onError(e,i,l){console.log(e),(0,o.Am)({title:"Erreur lors de la cr\xe9ation de l'\xe9quipe",description:"Une erreur est survenue, veuillez r\xe9essayer plus tard",variant:"destructive"})}})},isCreationLoading:p,isCreationSuccess:v,refetchTeam:u,updateTeam:(i,l,t)=>{h({body:t,headers:{Authorization:"Bearer ".concat(e)},pathParams:{teamId:i}},{onSettled:()=>{u(),l()}})},isUpdateLoading:f,isUpdateSuccess:x}};var ei=l(77209);/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let el=(0,l(78030).Z)("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var et=l(22468),en=l(21413),es=l(34063);function ea(e){var i;let{values:l,value:t,onChange:n,placeholder:a,isSearchable:r}=e,[o,d]=(0,m.useState)(!1);return(0,s.jsxs)(en.J2,{open:o,onOpenChange:d,children:[(0,s.jsx)(en.xo,{asChild:!0,children:(0,s.jsxs)(E.z,{variant:"outline",role:"combobox","aria-expanded":o,className:(0,k.cn)("w-full justify-between",!t&&"text-muted-foreground"),children:[(0,s.jsx)("span",{children:t?null===(i=l.find(e=>e.value===t))||void 0===i?void 0:i.label:a}),(0,s.jsx)(el,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,s.jsx)(en.yk,{className:"w-full p-0",children:(0,s.jsxs)(es.mY,{children:[r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(es.sZ,{placeholder:a}),(0,s.jsx)(es.rb,{children:"No framework found."})]}),(0,s.jsx)(es.fu,{children:l.map(e=>(0,s.jsxs)(es.di,{value:e.value,onSelect:e=>{n(e),d(!1)},className:"w-full text-left",children:[(0,s.jsx)(et.Z,{className:(0,k.cn)("mr-2 h-4 w-4",t===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})})]})}var er=l(93363),eo=l(54662),ed=l(36136);let ec=()=>{let{token:e}=(0,c.a)(),{mutate:i,isPending:l,isSuccess:t}=(0,d.bsA)({});return{setSecurityFile:(l,t,n)=>{i({body:l,headers:{Authorization:"Bearer ".concat(e)},queryParams:{participant_id:t}},{onSuccess(e,i,l){n(e.id)},onError(e,i,l){console.log(e),(0,o.Am)({title:"Erreur lors de la cr\xe9ation de la fiche de s\xe9curit\xe9",description:"Une erreur est survenue, veuillez r\xe9essayer plus tard",variant:"destructive"})}})},isCreationLoading:l,isCreationSuccess:t}};var eu=l(35265),em=l(18189),ev=l(40933);let ep=e=>{let{setIsOpen:i,participantId:l,form:t}=e,{setSecurityFile:a}=ec(),o=t.watch("securityFile.validation"),d="accepted"===o,c="refused"===o,u="temporary"===o,m=void 0!==t.formState.errors.securityFile;return(0,s.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,s.jsxs)(eu.UQ,{type:"single",collapsible:!0,className:"w-full",children:[(0,s.jsxs)(eu.Qd,{value:"medical",children:[(0,s.jsx)(eu.o4,{children:(0,s.jsx)("div",{className:"flex flex-row mr-auto items-center",children:"Informations m\xe9dicales"})}),(0,s.jsx)(eu.vF,{children:(0,s.jsxs)("div",{children:[(0,s.jsx)(eb,{label:"Allergies",id:"securityFile.allergy",form:t,type:n.STRING,className:"py-[6px]"}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eb,{label:"Asthme",id:"securityFile.asthma",form:t,type:n.BOOLEAN}),t.watch("securityFile.asthma")&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eb,{label:"Passage en soins intensifs",id:"securityFile.intensive_care_unit",form:t,type:n.BOOLEAN}),t.watch("securityFile.intensive_care_unit")&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(eb,{label:"Date de passage en soins intensifs",id:"securityFile.intensive_care_unit_when",form:t,type:n.STRING})})]})]}),(0,s.jsx)(eb,{label:"Traitement en cours",id:"securityFile.ongoing_treatment",form:t,type:n.STRING,className:"py-[6px]"}),(0,s.jsx)(eb,{label:"Maladies",id:"securityFile.sicknesses",form:t,type:n.STRING,className:"py-[6px]"}),(0,s.jsx)(eb,{label:"Hospitalisation",id:"securityFile.hospitalization",form:t,type:n.STRING,className:"py-[6px]"}),(0,s.jsx)(eb,{label:"Op\xe9ration chirurgicale",id:"securityFile.surgical_operation",form:t,type:n.STRING,className:"py-[6px]"}),(0,s.jsx)(eb,{label:"Traumatisme",id:"securityFile.trauma",form:t,type:n.STRING,className:"py-[6px]"}),(0,s.jsx)(eb,{label:"Ant\xe9c\xe9dents familiaux",id:"securityFile.family",form:t,type:n.STRING,className:"py-[6px]"})]})})]}),(0,s.jsxs)(eu.Qd,{value:"emergencyPerson",children:[(0,s.jsx)(eu.o4,{children:(0,s.jsxs)("div",{className:"flex flex-row mr-auto items-center ".concat(m&&"text-destructive"),children:[d&&(0,s.jsx)(r.dZ6,{className:"mr-4"}),c&&(0,s.jsx)(r.apv,{className:"mr-4"}),u&&(0,s.jsx)(em.Z,{className:"mr-4 h-4 w-4"}),!d&&!c&&!u&&(0,s.jsx)(ev.Z,{className:"mr-4 h-4 w-4"}),"Personne \xe0 pr\xe9venir en cas d'urgence"]})}),(0,s.jsxs)(eu.vF,{children:[(0,s.jsx)(eb,{label:"Pr\xe9nom",id:"securityFile.emergency_person_firstname",form:t,type:n.STRING}),(0,s.jsx)(eb,{label:"Nom",id:"securityFile.emergency_person_name",form:t,type:n.STRING}),(0,s.jsx)(eb,{label:"T\xe9l\xe9phone",id:"securityFile.emergency_person_phone",form:t,type:n.PHONE})]})]})]}),(0,s.jsx)(E.z,{className:"mt-6",type:"button",onClick:function(e){t.setValue("securityFile.updated",!0),a({...t.getValues("securityFile")},l,e=>{}),i(!1)},children:"Valider"})]})};var eh=l(63967);let ex=e=>{let{label:i,field:l,needDialog:t}=e,[n,a]=(0,m.useState)(!1);return(0,s.jsxs)(eo.Vq,{open:n,onOpenChange:a,children:[(0,s.jsxs)("div",{className:"w-full col-span-4 text-right",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(er.NI,{children:(0,s.jsx)(V.X,{checked:l.value,onCheckedChange:e=>{t?a(!n&&!l.value):l.onChange(!l.value)}})})]}),(0,s.jsxs)(eo.cZ,{className:"md:max-w-3xl top-1/2",children:[(0,s.jsx)(eo.fK,{children:(0,s.jsx)(eo.$N,{children:i})}),(0,s.jsx)(eo.Be,{children:"En cochant cette case, vous certifiez sur l'honneur que les informations que vous avez renseign\xe9es sont exactes, que vous avez bien lu et compris le r\xe8glement de la comp\xe9tition, et que vous vous engagez \xe0 le respecter."}),(0,s.jsxs)("div",{className:"flex justify-end mt-2 space-x-4",children:[(0,s.jsx)(E.z,{variant:"outline",onClick:()=>a(!1),children:"Annuler"}),(0,s.jsx)(E.z,{onClick:function(e){e.preventDefault(),l.onChange(!l.value),a(!1)},children:"Valider"})]})]})]})};var ef=l(39589),ej=l.n(ef),eg=l(59805),ey=l(90174);function eb(e){let{label:i,id:l,placeholder:t,form:n,layer:a,type:d,needDialog:c,participantId:u,className:p}=e,[h,x]=(0,m.useState)(!1),[f,j]=(0,m.useState)(!1),{information:g}=(0,eg.u)(),{refetch:y,setDocumentId:b}=(0,ey.k)(),_=(e,a,m)=>{var p,_,N,z,w;switch(d){case"boolean":return(0,s.jsx)(ex,{label:i,field:e,needDialog:null!=c&&c});case"tShirtSize":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"col-span-2"}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(er.NI,{children:(0,s.jsx)(ea,{values:eh.Tx,placeholder:t,...e})})]})]});case"bikeSize":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"col-span-2"}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(er.NI,{children:(0,s.jsx)(ea,{values:eh.FS,placeholder:t,...e})})]})]});case"document":return(0,s.jsxs)("div",{className:"col-span-4 gap-2 grid grid-cols-3",children:[(0,s.jsxs)(eo.Vq,{open:a,onOpenChange:m,children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(eo.hg,{asChild:!0,children:(0,s.jsx)(E.z,{variant:"outline",className:"raidRules"===l&&(null==g?void 0:g.raid_rules_id)?"col-span-2":"col-span-3",disabled:f,children:(0,s.jsx)("div",{className:"flex flex-row items-start w-full",children:(0,s.jsx)(s.Fragment,{children:(null===(p=e.value)||void 0===p?void 0:p.name)?(0,s.jsx)("span",{className:"text-gray-500 overflow-hidden",children:null!==(N=e.value.name)&&void 0!==N?N:"Aucun fichier s\xe9l\xe9ctionn\xe9"}):(0,s.jsx)("span",{className:"font-semibold  mr-6",children:"Choisir un fichier"})})})})}),(0,s.jsxs)(eo.cZ,{className:"md:max-w-2xl top-1/2",children:[(0,s.jsx)(eo.fK,{children:(0,s.jsx)(eo.$N,{className:"text-red sm:text-lg",children:i})}),(0,s.jsx)(ed.e,{setIsOpen:m,setIsUploading:j,field:e,fileType:l,documentId:null===(_=e.value)||void 0===_?void 0:_.id,participantId:u})]})]}),"raidRules"===l&&!!(null==g?void 0:g.raid_rules_id)&&(0,s.jsx)(v.f,{variant:"outline",className:"col-span-1",type:"button",onClick:e=>{var i;return i=g.raid_rules_id,void(x(!0),b(i),y().then(e=>{let i=e.data;if(!i){(0,o.Am)({title:"Erreur",description:"Impossible de t\xe9l\xe9charger le fichier",variant:"destructive"}),x(!1);return}let l=i.type.split("/")[1],t=window.URL.createObjectURL(new Blob([i])),n=document.createElement("a");n.href=t,n.setAttribute("download","R\xe9glement_du_raid.".concat(l)),document.body.appendChild(n),x(!1),n.click()}))},isLoading:h,label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.H_7,{className:"mr-2"}),"T\xe9l\xe9charger"]})})]});case"securityFile":return(0,s.jsxs)(eo.Vq,{open:a,onOpenChange:m,children:[(0,s.jsx)(eo.hg,{asChild:!0,children:(0,s.jsx)(E.z,{variant:"outline",className:"col-span-4",disabled:f,children:(0,s.jsx)("div",{className:"flex flex-row items-start w-full",children:f?(0,s.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(s.Fragment,{children:(null===(z=e.value)||void 0===z?void 0:z.updated)||(null===(w=e.value)||void 0===w?void 0:w.id)?(0,s.jsx)("span",{className:"text-gray-500 overflow-hidden",children:"Fiche de s\xe9curit\xe9"}):(0,s.jsx)("span",{className:"font-semibold mr-6",children:"Remplir la fiche de s\xe9curit\xe9"})})})})}),(0,s.jsxs)(eo.cZ,{className:"md:max-w-3xl top-1/2",children:[(0,s.jsx)(eo.fK,{children:(0,s.jsx)(eo.$N,{className:"text-red sm:text-lg",children:i})}),(0,s.jsx)(ep,{setIsOpen:m,participantId:u,form:n})]})]});case"string":return(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(er.NI,{children:(0,s.jsx)(ei.I,{placeholder:t,...e})})]});case"situation":return(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(er.NI,{children:(0,s.jsx)(ea,{values:eh.LN,placeholder:t,...e})})]});case"difficulty":return(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(er.NI,{children:(0,s.jsx)(ea,{values:eh.n9,placeholder:t,...e})})]});case"meetingPlace":return(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(er.NI,{children:(0,s.jsx)(ea,{values:eh.xQ,placeholder:t,...e})})]});case"phone":return(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(er.NI,{children:(0,s.jsx)(ej(),{country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",...e})})]});default:return(0,s.jsx)(A.O,{className:"w-24 h-6"})}},[N,z]=(0,m.useState)(!1);return(0,s.jsx)(er.Wi,{control:n.control,name:l,render:e=>{let{field:l}=e;return(0,s.jsx)(er.xJ,{children:(0,s.jsxs)("div",{className:"grid p-2 grid-cols-6 ".concat(p),children:[(0,s.jsxs)(er.lX,{className:"font-semibold text-left my-auto text-md col-span-2",children:[a&&(0,s.jsx)(r.WFu,{className:"inline mr-4"}),i]}),_(l,N,z)]})})}})}(t=n||(n={})).STRING="string",t.PHONE="phone",t.TSHIRTSIZE="tShirtSize",t.BIKESIZE="bikeSize",t.BOOLEAN="boolean",t.DOCUMENT="document",t.SECURITYFILE="securityFile",t.SITUATION="situation",t.DIFFICULTY="difficulty",t.MEETINGPLACE="meetingPlace";let e_=e=>{var i,l,t,d,c,u,v,p,h,x,f,j,g,y,b,_,N,z,w,C,S,I,F,k,O,A,T,V,R,L,B,q,G,Q,D,Z,W,M,J,ei,el,et,en,es,ea,er,eo,ed,ec,eu,em,ev,ep,ex,ef,ej,eg,ey,e_,eN,ez,ew,eC,eS,eI,eF;let{participant:ek,isEdit:eO,setIsEdit:eE}=e,{updateParticipant:eA,isUpdateLoading:eT}=U(),{refetchTeam:eV}=ee(),eP=X.z.object({address:X.z.string().min(1,{message:"Veuillez renseigner votre adresse"}).optional(),bikeSize:X.z.string().refine(e=>["xs","s","m","l","xl"].includes(e),{message:"Veuillez renseigner une taille de v\xe9lo valide"}).optional(),tShirtSize:X.z.string().refine(e=>["xs","s","m","l","xl","no"].includes(e),{message:"Veuillez renseigner une taille de t-shirt valide"}).optional(),situation:X.z.string().optional(),otherSchool:X.z.string().optional(),company:X.z.string().optional(),other:X.z.string().optional(),diet:X.z.string().optional(),idCard:X.z.object({name:X.z.string(),id:X.z.string().uuid(),updated:X.z.boolean(),type:X.z.literal("idCard")}).partial(),medicalCertificate:X.z.object({name:X.z.string(),id:X.z.string().uuid(),updated:X.z.boolean(),type:X.z.literal("medicalCertificate")}).partial(),studentCard:X.z.object({name:X.z.string(),id:X.z.string().uuid(),updated:X.z.boolean(),type:X.z.literal("studentCard")}).partial(),raidRules:X.z.object({name:X.z.string(),id:X.z.string().uuid(),updated:X.z.boolean(),type:X.z.literal("raidRules")}).partial(),parentAuthorization:X.z.object({name:X.z.string(),id:X.z.string().uuid(),updated:X.z.boolean(),type:X.z.literal("parentAuthorization")}).partial(),securityFile:X.z.object({allergy:X.z.string().optional(),asthma:X.z.boolean(),intensive_care_unit:X.z.boolean().optional(),intensive_care_unit_when:X.z.string().optional(),ongoing_treatment:X.z.string().optional(),sicknesses:X.z.string().optional(),hospitalization:X.z.string().optional(),surgical_operation:X.z.string().optional(),trauma:X.z.string().optional(),family:X.z.string().optional(),id:X.z.string().uuid(),updated:X.z.boolean(),emergency_person_name:X.z.string().min(1,{message:"Veuillez renseigner le nom de la personne \xe0 contacter"}),emergency_person_firstname:X.z.string().min(1,{message:"Veuillez renseigner le pr\xe9nom de la personne \xe0 contacter"}),emergency_person_phone:X.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).min(10,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}).max(14,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}),validation:X.z.enum(["pending","accepted","refused","temporary"])}).partial(),attestationHonour:X.z.boolean().optional()}).refine(e=>!("no"===e.tShirtSize&&ek.t_shirt_payment),{message:"Vous avez d\xe9j\xe0 payer pour un t-shirt, veuillez choisir un",path:["tShirtSize"]}),eR=(0,K.cI)({resolver:(0,$.F)(eP),mode:"onBlur",defaultValues:{address:null!==(V=ek.address)&&void 0!==V?V:void 0,bikeSize:null!==(R=null===(i=ek.bike_size)||void 0===i?void 0:i.toLowerCase())&&void 0!==R?R:void 0,tShirtSize:null!==(L=null===(l=ek.t_shirt_size)||void 0===l?void 0:l.toLowerCase())&&void 0!==L?L:void 0,situation:(0,P.l)(null!==(B=ek.situation)&&void 0!==B?B:void 0),other:"other"===(0,P.l)(null!==(q=ek.situation)&&void 0!==q?q:void 0)?(0,P.Q)(null!==(G=ek.situation)&&void 0!==G?G:void 0):void 0,otherSchool:"otherschool"===(0,P.l)(null!==(Q=ek.situation)&&void 0!==Q?Q:void 0)?(0,P.Q)(null!==(D=ek.situation)&&void 0!==D?D:void 0):void 0,company:"corporatepartner"===(0,P.l)(null!==(Z=ek.situation)&&void 0!==Z?Z:void 0)?(0,P.Q)(null!==(W=ek.situation)&&void 0!==W?W:void 0):void 0,diet:null!==(M=ek.diet)&&void 0!==M?M:void 0,idCard:{name:null!==(J=null===(t=ek.id_card)||void 0===t?void 0:t.name)&&void 0!==J?J:void 0,id:null!==(ei=null===(d=ek.id_card)||void 0===d?void 0:d.id)&&void 0!==ei?ei:void 0,type:"idCard"},medicalCertificate:{name:null!==(el=null===(c=ek.medical_certificate)||void 0===c?void 0:c.name)&&void 0!==el?el:void 0,id:null!==(et=null===(u=ek.medical_certificate)||void 0===u?void 0:u.id)&&void 0!==et?et:void 0,type:"medicalCertificate"},studentCard:{name:null!==(en=null===(v=ek.student_card)||void 0===v?void 0:v.name)&&void 0!==en?en:void 0,id:null!==(es=null===(p=ek.student_card)||void 0===p?void 0:p.id)&&void 0!==es?es:void 0,type:"studentCard"},raidRules:{name:null!==(ea=null===(h=ek.raid_rules)||void 0===h?void 0:h.name)&&void 0!==ea?ea:void 0,id:null!==(er=null===(x=ek.raid_rules)||void 0===x?void 0:x.id)&&void 0!==er?er:void 0,type:"raidRules"},parentAuthorization:{name:null!==(eo=null===(f=ek.parent_authorization)||void 0===f?void 0:f.name)&&void 0!==eo?eo:void 0,id:null!==(ed=null===(j=ek.parent_authorization)||void 0===j?void 0:j.id)&&void 0!==ed?ed:void 0,type:"parentAuthorization"},securityFile:{allergy:null!==(ec=null==ek?void 0:null===(g=ek.security_file)||void 0===g?void 0:g.allergy)&&void 0!==ec?ec:void 0,asthma:null!==(eu=null==ek?void 0:null===(y=ek.security_file)||void 0===y?void 0:y.asthma)&&void 0!==eu&&eu,intensive_care_unit:null!==(em=null==ek?void 0:null===(b=ek.security_file)||void 0===b?void 0:b.intensive_care_unit)&&void 0!==em&&em,intensive_care_unit_when:null!==(ev=null==ek?void 0:null===(_=ek.security_file)||void 0===_?void 0:_.intensive_care_unit_when)&&void 0!==ev?ev:void 0,ongoing_treatment:null!==(ep=null==ek?void 0:null===(N=ek.security_file)||void 0===N?void 0:N.ongoing_treatment)&&void 0!==ep?ep:void 0,sicknesses:null!==(ex=null==ek?void 0:null===(z=ek.security_file)||void 0===z?void 0:z.sicknesses)&&void 0!==ex?ex:void 0,hospitalization:null!==(ef=null==ek?void 0:null===(w=ek.security_file)||void 0===w?void 0:w.hospitalization)&&void 0!==ef?ef:void 0,surgical_operation:null!==(ej=null==ek?void 0:null===(C=ek.security_file)||void 0===C?void 0:C.surgical_operation)&&void 0!==ej?ej:void 0,trauma:null!==(eg=null==ek?void 0:null===(S=ek.security_file)||void 0===S?void 0:S.trauma)&&void 0!==eg?eg:void 0,family:null!==(ey=null==ek?void 0:null===(I=ek.security_file)||void 0===I?void 0:I.family)&&void 0!==ey?ey:void 0,id:null!==(e_=null==ek?void 0:null===(F=ek.security_file)||void 0===F?void 0:F.id)&&void 0!==e_?e_:void 0,emergency_person_name:null!==(eN=null==ek?void 0:null===(k=ek.security_file)||void 0===k?void 0:k.emergency_person_name)&&void 0!==eN?eN:void 0,emergency_person_firstname:null!==(ez=null==ek?void 0:null===(O=ek.security_file)||void 0===O?void 0:O.emergency_person_firstname)&&void 0!==ez?ez:void 0,emergency_person_phone:null!==(ew=null==ek?void 0:null===(A=ek.security_file)||void 0===A?void 0:A.emergency_person_phone)&&void 0!==ew?ew:void 0,validation:null!==(eC=null==ek?void 0:null===(T=ek.security_file)||void 0===T?void 0:T.validation)&&void 0!==eC?eC:void 0},attestationHonour:ek.attestation_on_honour}});async function eL(e){var i,l,t,n,s,a;if(!eR.formState.isDirty){eE(!eO);return}let r=[e.idCard,e.medicalCertificate,e.studentCard,e.raidRules,e.parentAuthorization].filter(e=>e.updated),d={bike_size:null!==(t=null===(i=e.bikeSize)||void 0===i?void 0:i.toUpperCase())&&void 0!==t?t:null,t_shirt_size:null!==(n="no"===e.tShirtSize?"None":null===(l=e.tShirtSize)||void 0===l?void 0:l.toUpperCase())&&void 0!==n?n:null,situation:function(e){switch(e.situation){case"otherschool":return"otherschool : ".concat(e.otherSchool);case"corporatepartner":return"corporatepartner : ".concat(e.company);case"other":return"other : ".concat(e.other);default:return"centrale"}}(e),address:null!==(s=e.address)&&void 0!==s?s:null,diet:null!==(a=e.diet)&&void 0!==a?a:null,attestation_on_honour:e.attestationHonour};for(let e of r)switch(e.type){case"idCard":d.id_card_id=e.id;case"medicalCertificate":d.medical_certificate_id=e.id;case"studentCard":d.student_card_id=e.id;case"raidRules":d.raid_rules_id=e.id;case"parentAuthorization":d.parent_authorization_id=e.id}eA(d,ek.id,()=>{var i,l,t,n,s,a,r,d,c,u,m,v,p,h,x,f,j,g,y,b,_,N,z,w,C,S,I,F,k,O,E,A,T,V,R,L,B,q,G,Q,U,D,Z,H,W,M,J,Y,$,K,X,ee,ei,el,et,en,es,ea,er,eo,ed,ec,eu,em,ev;(0,o.Am)({title:"Profil mis \xe0 jour",description:"Vos informations ont \xe9t\xe9 mises \xe0 jour avec succ\xe8s"}),eV(),eE(!eO),eR.reset({address:null!==(k=e.address)&&void 0!==k?k:void 0,bikeSize:null!==(O=null===(i=e.bikeSize)||void 0===i?void 0:i.toLowerCase())&&void 0!==O?O:void 0,tShirtSize:null!==(E=null===(l=e.tShirtSize)||void 0===l?void 0:l.toLowerCase())&&void 0!==E?E:void 0,situation:(0,P.l)(null!==(A=e.situation)&&void 0!==A?A:void 0),other:"other"===(0,P.l)(null!==(T=e.situation)&&void 0!==T?T:void 0)?(0,P.Q)(null!==(V=e.situation)&&void 0!==V?V:void 0):void 0,otherSchool:"otherschool"===(0,P.l)(null!==(R=e.situation)&&void 0!==R?R:void 0)?(0,P.Q)(null!==(L=e.situation)&&void 0!==L?L:void 0):void 0,company:"corporatepartner"===(0,P.l)(null!==(B=e.situation)&&void 0!==B?B:void 0)?(0,P.Q)(null!==(q=e.situation)&&void 0!==q?q:void 0):void 0,diet:null!==(G=e.diet)&&void 0!==G?G:void 0,idCard:{name:null!==(Q=null===(t=e.idCard)||void 0===t?void 0:t.name)&&void 0!==Q?Q:void 0,id:null!==(U=null===(n=e.idCard)||void 0===n?void 0:n.id)&&void 0!==U?U:void 0,type:"idCard"},medicalCertificate:{name:null!==(D=null===(s=e.medicalCertificate)||void 0===s?void 0:s.name)&&void 0!==D?D:void 0,id:null!==(Z=null===(a=e.medicalCertificate)||void 0===a?void 0:a.id)&&void 0!==Z?Z:void 0,type:"medicalCertificate"},studentCard:{name:null!==(H=null===(r=e.studentCard)||void 0===r?void 0:r.name)&&void 0!==H?H:void 0,id:null!==(W=null===(d=e.studentCard)||void 0===d?void 0:d.id)&&void 0!==W?W:void 0,type:"studentCard"},raidRules:{name:null!==(M=null===(c=e.raidRules)||void 0===c?void 0:c.name)&&void 0!==M?M:void 0,id:null!==(J=null===(u=e.raidRules)||void 0===u?void 0:u.id)&&void 0!==J?J:void 0,type:"raidRules"},parentAuthorization:{name:null!==(Y=null===(m=e.parentAuthorization)||void 0===m?void 0:m.name)&&void 0!==Y?Y:void 0,id:null!==($=null===(v=e.parentAuthorization)||void 0===v?void 0:v.id)&&void 0!==$?$:void 0,type:"parentAuthorization"},securityFile:{allergy:null!==(K=null==e?void 0:null===(p=e.securityFile)||void 0===p?void 0:p.allergy)&&void 0!==K?K:void 0,asthma:null!==(X=null==e?void 0:null===(h=e.securityFile)||void 0===h?void 0:h.asthma)&&void 0!==X&&X,intensive_care_unit:null!==(ee=null==e?void 0:null===(x=e.securityFile)||void 0===x?void 0:x.intensive_care_unit)&&void 0!==ee&&ee,intensive_care_unit_when:null!==(ei=null==e?void 0:null===(f=e.securityFile)||void 0===f?void 0:f.intensive_care_unit_when)&&void 0!==ei?ei:void 0,ongoing_treatment:null!==(el=null==e?void 0:null===(j=e.securityFile)||void 0===j?void 0:j.ongoing_treatment)&&void 0!==el?el:void 0,sicknesses:null!==(et=null==e?void 0:null===(g=e.securityFile)||void 0===g?void 0:g.sicknesses)&&void 0!==et?et:void 0,hospitalization:null!==(en=null==e?void 0:null===(y=e.securityFile)||void 0===y?void 0:y.hospitalization)&&void 0!==en?en:void 0,surgical_operation:null!==(es=null==e?void 0:null===(b=e.securityFile)||void 0===b?void 0:b.surgical_operation)&&void 0!==es?es:void 0,trauma:null!==(ea=null==e?void 0:null===(_=e.securityFile)||void 0===_?void 0:_.trauma)&&void 0!==ea?ea:void 0,family:null!==(er=null==e?void 0:null===(N=e.securityFile)||void 0===N?void 0:N.family)&&void 0!==er?er:void 0,id:null!==(ed=null!==(eo=null==e?void 0:null===(z=e.securityFile)||void 0===z?void 0:z.id)&&void 0!==eo?eo:null==ek?void 0:null===(w=ek.security_file)||void 0===w?void 0:w.id)&&void 0!==ed?ed:"",emergency_person_name:null!==(ec=null==e?void 0:null===(C=e.securityFile)||void 0===C?void 0:C.emergency_person_name)&&void 0!==ec?ec:void 0,emergency_person_firstname:null!==(eu=null==e?void 0:null===(S=e.securityFile)||void 0===S?void 0:S.emergency_person_firstname)&&void 0!==eu?eu:void 0,emergency_person_phone:null!==(em=null==e?void 0:null===(I=e.securityFile)||void 0===I?void 0:I.emergency_person_phone)&&void 0!==em?em:void 0,validation:null!==(ev=null==e?void 0:null===(F=e.securityFile)||void 0===F?void 0:F.validation)&&void 0!==ev?ev:void 0},attestationHonour:e.attestationHonour})})}return(0,s.jsx)(a.aY,{children:(0,m.createElement)(K.RV,{...eR,key:"Participant"},(0,s.jsxs)("form",{onSubmit:eR.handleSubmit(eL),className:"flex flex-col justify-between h-full ".concat(eO?"":"space-y-4"),children:[eO?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eb,{label:"Adresse",id:"address",form:eR,type:n.STRING}),(0,s.jsx)(eb,{label:"Taille de v\xe9lo",placeholder:"Taille",id:"bikeSize",form:eR,type:n.BIKESIZE}),(0,s.jsx)(eb,{label:"Taille de t-shirt",id:"tShirtSize",placeholder:"Taille",form:eR,type:n.TSHIRTSIZE}),(0,s.jsx)(eb,{label:"R\xe9gime alimentaire",id:"diet",form:eR,type:n.STRING}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eb,{label:"Situation",id:"situation",form:eR,type:n.SITUATION}),"otherschool"===eR.watch("situation")&&(0,s.jsx)(eb,{label:"Nom de l'\xe9cole",id:"otherSchool",form:eR,type:n.STRING,layer:1}),"corporatepartner"===eR.watch("situation")&&(0,s.jsx)(eb,{label:"Nom de l'entreprise",id:"company",form:eR,type:n.STRING,layer:1}),"other"===eR.watch("situation")&&(0,s.jsx)(eb,{label:"Autre situation",id:"other",form:eR,type:n.STRING,layer:1})]}),["centrale","otherschool"].includes(null!==(eS=eR.watch("situation"))&&void 0!==eS?eS:"")&&(0,s.jsx)(eb,{label:"Carte \xe9tudiante",id:"studentCard",form:eR,type:n.DOCUMENT,layer:1,participantId:ek.id}),(0,s.jsx)(eb,{label:"Carte d'identit\xe9",id:"idCard",form:eR,type:n.DOCUMENT,participantId:ek.id}),(0,s.jsx)(eb,{label:"Certificat m\xe9dical",id:"medicalCertificate",form:eR,type:n.DOCUMENT,participantId:ek.id}),(0,s.jsx)(eb,{label:"Fiche de s\xe9curit\xe9",id:"securityFile",form:eR,type:n.SECURITYFILE,participantId:ek.id}),ek.is_minor&&(0,s.jsx)(eb,{label:"Autorisation parentale",id:"parentAuthorization",form:eR,type:n.DOCUMENT,participantId:ek.id}),(0,s.jsx)(eb,{label:"R\xe8glement du raid",id:"raidRules",form:eR,type:n.DOCUMENT,participantId:ek.id}),(0,s.jsx)(eb,{label:"Attestation sur l'honneur",id:"attestationHonour",form:eR,type:n.BOOLEAN,needDialog:!0})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Y.Q,{label:"Adresse",value:ek.address}),(0,s.jsx)(Y.Q,{label:"Taille de v\xe9lo",value:ek.bike_size}),(0,s.jsx)(Y.Q,{label:"Taille de t-shirt",value:ek.t_shirt_size,placeholder:"Pas de Tshirt"}),(0,s.jsx)(Y.Q,{label:"R\xe9gime alimentaire",value:ek.diet}),function(){var e,i;let l=(0,P.l)(null!==(e=ek.situation)&&void 0!==e?e:void 0),t=(0,P.Q)(null!==(i=ek.situation)&&void 0!==i?i:void 0);return"undefined"===t&&(t=null),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Y.Q,{label:"Situation",value:(0,eh.Jg)(eh.LN,l)}),"otherschool"===l&&(0,s.jsx)(Y.Q,{label:"Nom de l'\xe9cole",value:t}),"corporatepartner"===l&&(0,s.jsx)(Y.Q,{label:"Nom de l'entreprise",value:t}),"other"===l&&(0,s.jsx)(Y.Q,{label:"Autre situation",value:t})]})}(),["centrale","otherschool"].includes(null!==(eF=(0,P.l)(null!==(eI=ek.situation)&&void 0!==eI?eI:void 0))&&void 0!==eF?eF:"")&&(0,s.jsx)(Y.Q,{label:"Carte \xe9tudiante",value:ek.student_card,participantId:ek.id}),(0,s.jsx)(Y.Q,{label:"Carte d'identit\xe9",value:ek.id_card,participantId:ek.id}),(0,s.jsx)(Y.Q,{label:"Certificat m\xe9dical",value:ek.medical_certificate,participantId:ek.id}),(0,s.jsx)(Y.Q,{label:"Fiche de s\xe9curit\xe9",value:ek.security_file}),ek.is_minor&&(0,s.jsx)(Y.Q,{label:"Autorisation parentale",value:ek.parent_authorization,participantId:ek.id}),(0,s.jsx)(Y.Q,{label:"R\xe8glement du raid",value:ek.raid_rules,participantId:ek.id}),(0,s.jsx)(Y.Q,{label:"Attestation sur l'honneur",value:ek.attestation_on_honour})]}),eO&&(0,s.jsx)(s.Fragment,{children:eT?(0,s.jsx)(E.z,{variant:"default",disabled:!0,className:"w-full mt-6",children:(0,s.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,s.jsxs)(E.z,{className:"w-full mt-6",type:"submit",disabled:!eR.formState.isDirty,children:[(0,s.jsx)(r.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})})]}))})},eN=e=>{var i,l;let{participant:t,isCaptain:n}=e,{price:o}=(0,D.k)(),[d,c]=(0,m.useState)(!1);function u(){c(!d)}return(0,s.jsxs)(a.Zb,{className:"w-full flex flex-col justify-between",children:[(0,s.jsx)(a.Ol,{children:(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(a.ll,{children:(null==t?void 0:t.firstname)&&(null==t?void 0:t.firstname)?(null==t?void 0:t.firstname)+" "+(null==t?void 0:t.name):(0,s.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,s.jsx)(A.O,{className:"w-32 h-8"}),(0,s.jsx)(A.O,{className:"w-32 h-8"})]})}),(0,s.jsx)(a.SZ,{children:t?(0,s.jsx)(s.Fragment,{children:n?"Capitaine":"\xa0"}):(0,s.jsx)(A.O,{className:"w-24 h-5 mt-1"})})]}),d&&t?(0,s.jsxs)(E.z,{variant:"destructive",onClick:u,className:"w-[110px]",children:[(0,s.jsx)(r.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]}):(0,s.jsxs)(E.z,{variant:"outline",onClick:u,className:"w-[110px]",children:[(0,s.jsx)(r.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})]})}),t?(0,s.jsx)(e_,{participant:t,isEdit:d,setIsEdit:c}):(0,s.jsx)(T,{}),!d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.eW,{className:"w-full",children:t?(0,s.jsxs)("div",{className:"grid p-2 grid-cols-6 items-center w-full",children:[(0,s.jsx)("span",{className:"font-semibold text-left my-auto col-span-2",children:"Paiement"}),(null==t?void 0:t.payment)||"corporatepartner"===(0,P.l)(null!==(i=null==t?void 0:t.situation)&&void 0!==i?i:void 0)?(0,s.jsx)(V.X,{checked:null==t?void 0:t.payment,disabled:!0,className:"col-span-4 ml-auto disabled:opacity-100"}):(0,s.jsx)(s.Fragment,{children:(!(null==t?void 0:t.payment)||t.t_shirt_size&&!t.t_shirt_payment)&&"corporatepartner"!==(0,P.l)(null!==(l=null==t?void 0:t.situation)&&void 0!==l?l:void 0)&&(null==o?void 0:o.student_price)&&(null==o?void 0:o.external_price)&&(null==o?void 0:o.t_shirt_price)?(0,s.jsx)(J,{}):(0,s.jsx)("span",{children:"Aucun lien"})})]}):(0,s.jsxs)("div",{className:"grid p-2 grid-cols-6 items-center w-full h-[65px]",children:[(0,s.jsx)("span",{className:"font-semibold text-left my-auto col-span-2",children:(0,s.jsx)(A.O,{className:"w-32 h-7"})}),(0,s.jsx)(A.O,{className:"w-64 h-6 col-span-4 ml-auto"})]})}),(0,s.jsx)(O,{value:null==t?void 0:t.validation_progress})]})]})},ez=e=>{var i,l,t;let{team:d,setIsEdit:c}=e,{isUpdateLoading:u,updateTeam:v}=ee(),p=X.z.object({name:X.z.string().optional(),difficulty:X.z.enum(["discovery","sports","expert"]).optional(),meeting_place:X.z.enum(["centrale","bellecour","anyway"]).optional()}),h=(0,K.cI)({resolver:(0,$.F)(p),mode:"onBlur",defaultValues:{name:null!==(i=null==d?void 0:d.name)&&void 0!==i?i:void 0,difficulty:null!==(l=null==d?void 0:d.difficulty)&&void 0!==l?l:void 0,meeting_place:null!==(t=null==d?void 0:d.meeting_place)&&void 0!==t?t:void 0}});return(0,m.createElement)(K.RV,{...h,key:"Participant"},(0,s.jsx)("form",{onSubmit:h.handleSubmit(function(e){var i;if(!h.formState.isDirty){c(!1);return}v(null!==(i=null==d?void 0:d.id)&&void 0!==i?i:"",()=>{c(!1),(0,o.Am)({title:"\xc9quipe mise \xe0 jour"})},e)}),className:"flex flex-col justify-between h-full",children:(0,s.jsxs)(a.aY,{children:[(0,s.jsx)(eb,{label:"Nom d'\xe9quipe",id:"name",form:h,type:n.STRING}),(0,s.jsx)(eb,{label:"Lieu de rendez-vous",id:"meeting_place",placeholder:"Selectionner un lieu de rendez-vous",form:h,type:n.MEETINGPLACE}),(0,s.jsx)(eb,{label:"Parcours",id:"difficulty",placeholder:"Selectionner un parcours",form:h,type:n.DIFFICULTY}),u?(0,s.jsx)(E.z,{variant:"default",disabled:!0,className:"w-full mt-6",children:(0,s.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,s.jsxs)(E.z,{className:"w-full mt-6",type:"submit",disabled:!h.formState.isDirty,children:[(0,s.jsx)(r.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})]})}))};var ew=l(26477),eC=l(39202);let eS=e=>{var i,l,t;let{team:n}=e,[o,d]=(0,m.useState)(!1),{information:c}=(0,eg.u)(),u=null!=c&&!!c.raid_registering_end_date&&(0,eC.pc)(null==c?void 0:c.raid_registering_end_date)>=0;function v(){d(!o)}let p=[{title:"Lieu de rendez-vous",value:(0,eh.Jg)(eh.xQ,null!==(i=null==n?void 0:n.meeting_place)&&void 0!==i?i:void 0),description:"lieu de d\xe9part et d'arriv\xe9e",unit:(0,s.jsx)(r.k9l,{className:"h-4 w-4"})},{title:"Dates",value:(null==c?void 0:c.raid_start_date)&&(null==c?void 0:c.raid_end_date)?(0,eC._Q)(c.raid_start_date,c.raid_end_date):"Dates non renseign\xe9es",description:"week-end complet",unit:(0,s.jsx)(r.Bge,{className:"h-4 w-4"})},{title:"Inscription",value:"".concat(null==n?void 0:n.validation_progress.toFixed(0),"%"),description:(null==c?void 0:c.raid_registering_end_date)?u?"".concat((0,eC.pc)(null==c?void 0:c.raid_registering_end_date)," jours restants"):"Inscriptions ferm\xe9es":"Date de fin non renseign\xe9e",unit:(0,s.jsx)("span",{children:"%"})},{title:"Parcours",value:(0,eh.Jg)(eh.n9,null!==(l=null==n?void 0:n.difficulty)&&void 0!==l?l:void 0),description:(0,eh.Jg)(eh.J1,null!==(t=null==n?void 0:n.difficulty)&&void 0!==t?t:void 0),unit:void 0}];return(0,s.jsx)(a.Zb,{className:"w-full mt-5",children:(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsxs)(a.Ol,{children:[(0,s.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,s.jsx)(a.ll,{children:o?(0,s.jsx)("div",{children:"\xc9diter l'\xe9quipe"}):(0,s.jsx)(s.Fragment,{children:(null==n?void 0:n.name)?(0,s.jsx)("div",{children:null==n?void 0:n.name}):(0,s.jsx)(A.O,{className:"w-24 h-8"})})}),o&&n?(0,s.jsxs)(E.z,{variant:"destructive",onClick:v,className:"w-[110px]",children:[(0,s.jsx)(r.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]}):(0,s.jsxs)(E.z,{variant:"outline",onClick:v,className:"w-[110px]",children:[(0,s.jsx)(r.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})]}),(0,s.jsx)("div",{className:"h-4"}),o&&n?(0,s.jsx)(ez,{team:n,setIsEdit:d}):(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 md:gap-8 lg:grid-cols-4",children:p.map(e=>(0,s.jsx)(ew.L,{info:e,isLoaded:void 0!==n},e.title))})]})})})};var eI=l(55936);let eF=e=>{let{form:i,label:l,id:t,placeholder:n}=e;return(0,s.jsx)(er.Wi,{control:i.control,name:t,render:e=>{let{field:i}=e;return(0,s.jsx)(er.xJ,{children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,s.jsxs)(er.lX,{className:"text-left font-bold",children:[l," :"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(er.NI,{children:(0,s.jsx)(ei.I,{placeholder:n,...i})})]})]})})}})};var ek=l(74546),eO=l(86465),eE=l(70402),eA=l(88835);let eT=e=>{let{label:i,value:l}=e;return(0,s.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,s.jsxs)(eE._,{htmlFor:i,className:"font-bold",children:[i," :"]}),i?(0,s.jsx)("span",{id:i,children:l}):(0,s.jsx)(A.O,{className:"w-24 h-6"})]})},eV=e=>{var i;let{me:l,isEdit:t,setIsEdit:n,setIsOpen:a}=e,{refetchTeam:d}=ee(),{updateParticipant:c,isUpdateLoading:u}=U(),m=X.z.object({firstname:X.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:X.z.string().min(1,{message:"Veuillez renseigner votre nom"}),email:X.z.string().email({message:"Veuillez renseigner une adresse email valide"}),phone:X.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).min(10,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}).max(14,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}),birthday:X.z.date({required_error:"Veuillez renseigner votre date de naissance",invalid_type_error:"Veuillez renseigner une date de naissance valide"})});function v(e){return e?e.startsWith("0")?"+33 ".concat(e.slice(1)):e:""}let p=(0,K.cI)({resolver:(0,$.F)(m),defaultValues:{firstname:null==l?void 0:l.firstname,name:null==l?void 0:l.name,email:null==l?void 0:l.email,phone:v(null!==(i=null==l?void 0:l.phone)&&void 0!==i?i:""),birthday:(null==l?void 0:l.birthday)?(0,ek.Q)(null==l?void 0:l.birthday):void 0}});return(0,s.jsx)("div",{className:"h-full",children:(0,s.jsx)(K.RV,{...p,children:(0,s.jsxs)("form",{onSubmit:p.handleSubmit(function(e){if(!p.formState.isDirty){n(!t);return}let i=(0,eC.uv)(e.birthday);c({...e,birthday:i},l.id,()=>{var i;(0,o.Am)({title:"Profil mis \xe0 jour",description:"Vos informations ont \xe9t\xe9 mises \xe0 jour avec succ\xe8s"}),d(),n(!t),a(!1),p.reset({firstname:null==e?void 0:e.firstname,name:null==e?void 0:e.name,email:null==e?void 0:e.email,phone:v(null!==(i=null==e?void 0:e.phone)&&void 0!==i?i:""),birthday:(null==e?void 0:e.birthday)?(0,ek.Q)(null==e?void 0:e.birthday):void 0})})}),className:"flex flex-col justify-between h-full",children:[(0,s.jsx)("div",{}),t?(0,s.jsxs)("div",{className:"grid w-full items-center gap-6",children:[(0,s.jsx)(eF,{form:p,label:"Pr\xe9nom",id:"firstname",placeholder:"Pr\xe9nom"}),(0,s.jsx)(eF,{form:p,label:"Nom",id:"name",placeholder:"Nom"}),(0,s.jsx)(eF,{form:p,label:"Email",id:"email",placeholder:"inscription@raid.fr"}),(0,s.jsx)(er.Wi,{control:p.control,name:"phone",render:()=>(0,s.jsx)(er.xJ,{children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,s.jsx)(er.lX,{className:"text-left font-bold",children:"T\xe9l\xe9phone :"}),(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(K.Qr,{name:"phone",control:p.control,render:e=>{let{field:{onChange:i,value:l}}=e;return(0,s.jsx)(ej(),{value:l,onChange:i,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})}),(0,s.jsx)(er.Wi,{control:p.control,name:"birthday",render:e=>{let{field:i}=e;return(0,s.jsx)(er.xJ,{children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,s.jsx)(er.lX,{className:"text-left font-bold",children:"Date de naissance :"}),(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(K.Qr,{name:"birthday",control:p.control,render:e=>{let{field:{onChange:l,value:t}}=e;return(0,s.jsx)(eA.M,{date:t,setDate:l,defaultDate:t||(0,eO.B)(new Date,-21),...i})}})]})]})})}})]}):(0,s.jsxs)("div",{className:"grid w-full items-center gap-10",children:[(0,s.jsx)(eT,{label:"Pr\xe9nom",value:null==l?void 0:l.firstname}),(0,s.jsx)(eT,{label:"Nom",value:null==l?void 0:l.name}),(0,s.jsx)(eT,{label:"Email",value:null==l?void 0:l.email}),(0,s.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,s.jsx)(eE._,{htmlFor:"phone",className:"font-bold",children:"T\xe9l\xe9phone :"}),(0,s.jsx)(ej(),{value:null==l?void 0:l.phone,country:"fr",specialLabel:"",inputClass:"bg-transparent",disabled:!0})]}),(0,s.jsx)(eT,{label:"Date de naissance",value:(null==l?void 0:l.birthday)?(0,eC.p6)(l.birthday):"Non renseign\xe9"})]}),(0,s.jsx)(eI.FF,{className:"mt-8",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between items-center w-full gap-6",children:[t?(0,s.jsx)(s.Fragment,{children:u?(0,s.jsx)(E.z,{variant:"default",disabled:!0,className:"w-full",children:(0,s.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,s.jsxs)(E.z,{className:"w-full",type:"submit",disabled:!p.formState.isDirty,children:[(0,s.jsx)(r.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})}):(0,s.jsx)(s.Fragment,{children:l&&(0,s.jsxs)(E.z,{variant:"outline",onClick:function(){(t&&p.formState.isDirty||!t)&&n(!t)},className:"w-full",children:[(0,s.jsx)(r.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})}),t&&(0,s.jsxs)(E.z,{variant:"destructive",onClick:()=>p.reset(),className:"w-full",children:[(0,s.jsx)(r.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]})]})})]})})})};var eP=l(24729),eR=l(19706),eL=l(60603);let eB=()=>{let{me:e}=U(),{information:i}=(0,eg.u)(),[l,t]=(0,m.useState)(!1),[n,a]=(0,m.useState)(!1);function r(){l&&a(!1),t(!l)}return(0,s.jsx)(eR.nm,{children:(0,s.jsxs)(eR.QP,{children:[(0,s.jsx)(eR.rQ,{children:(null==e?void 0:e.firstname)===void 0||(null==e?void 0:e.name)===void 0?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(A.O,{className:"w-24 h-6"})}):(0,s.jsx)(s.Fragment,{children:e.firstname+" "+e.name})}),(0,s.jsxs)(eR.uE,{children:[(0,s.jsx)(eL.U,{}),(0,s.jsx)(eR.yE,{}),(0,s.jsxs)(eI.yo,{open:l,onOpenChange:r,children:[(0,s.jsx)(eI.aM,{asChild:!0,children:(0,s.jsx)(E.z,{variant:"ghost",className:"px-2 py-1.5 text-sm font-[400] w-full justify-start hover:bg-background",children:"Informations du compte"})}),(0,s.jsxs)(eI.ue,{className:"flex flex-col justify-between",children:[(0,s.jsxs)(eI.Tu,{children:[(0,s.jsx)(eI.bC,{children:"Param\xe8tres"}),(0,s.jsx)(eI.Ei,{children:"Information du compte"})]}),e&&(0,s.jsx)(eV,{me:e,isEdit:n,setIsEdit:a,setIsOpen:r})]})]}),(0,s.jsx)(eR.yE,{}),(0,s.jsx)(eR.N,{onClick:function(){window.open("mailto:".concat(null==i?void 0:i.contact))},children:"Nous contacter"}),(0,s.jsx)(eR.yE,{}),(0,s.jsx)(eP.s,{})]})]})})};var eq=l(87138);let eG=()=>(0,s.jsx)("header",{className:"max-md:sticky top-0 flex h-16 items-center gap-4 border-b bg-background px-4 md:px-6 z-10",children:(0,s.jsxs)("nav",{className:"flex flex-row w-full mx-10 max-md:mx-0 items-center",children:[(0,s.jsx)(eq.default,{href:"#",className:"flex items-center gap-2 font-semibold md:text-base",children:(0,s.jsxs)("span",{className:" text-2xl",children:["Inscription Raid ",new Date().getFullYear()]})}),(0,s.jsx)("div",{className:"flex flex-row ml-auto",children:(0,s.jsx)(eB,{})})]})});var eQ=l(52934),eU=l(40832);let eD=e=>{var i,l;let{user:t,isOpened:n,setIsOpened:a}=e,{createParticipant:r}=U(),{createTeam:d,refetchTeam:c}=ee(),{inviteToken:p}=(0,eU.u)(),{joinTeam:h}=u(),[x,f]=(0,m.useState)(!1),j=X.z.object({firstname:X.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:X.z.string().min(1,{message:"Veuillez renseigner votre nom"}),email:X.z.string().email({message:"Veuillez renseigner une adresse email valide"}),phone:X.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).min(10,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}).max(14,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}),birthday:X.z.date({required_error:"Veuillez renseigner votre date de naissance",invalid_type_error:"Veuillez renseigner une date de naissance valide"})}),g=(0,K.cI)({resolver:(0,$.F)(j),defaultValues:{firstname:t.firstname,name:t.name,email:t.email,phone:(l=null!==(i=null==t?void 0:t.phone)&&void 0!==i?i:"")?l.startsWith("0")?"+33 ".concat(l.slice(1)):l:"",birthday:t.birthday?(0,ek.Q)(t.birthday):void 0}});return(0,s.jsx)(eo.Vq,{open:n,onOpenChange:a,children:(0,s.jsx)(eo.cZ,{className:"sm:max-w-[600px]",hideClose:!0,children:(0,s.jsx)(er.l0,{...g,children:(0,s.jsxs)("form",{onSubmit:g.handleSubmit(function(e){let i=(0,eC.uv)(e.birthday);f(!0),r({...e,birthday:i},()=>{void 0===p?d({name:"\xc9quipe de ".concat(e.firstname," ").concat(e.name)},()=>{c(),a(!1),f(!1),(0,o.Am)({title:"Votre profil a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s"})}):h(p,()=>{c(),a(!1),f(!1),(0,o.Am)({title:"Vous avez rejoint l'\xe9quipe avec succ\xe8s"})})})}),children:[(0,s.jsxs)(eo.fK,{children:[(0,s.jsx)(eo.$N,{children:"Vos informations"}),(0,s.jsx)(eo.Be,{children:"Veuillez renseigner vos information pour pouvoir cr\xe9er une \xe9quipe"})]}),(0,s.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,s.jsx)(eQ.l,{form:g,label:"Pr\xe9nom",id:"firstname",placeholder:"Pr\xe9nom"}),(0,s.jsx)(eQ.l,{form:g,label:"Nom",id:"name",placeholder:"Nom"}),(0,s.jsx)(eQ.l,{form:g,label:"Email",id:"email",placeholder:"inscription@raid.fr"}),(0,s.jsx)(er.Wi,{control:g.control,name:"phone",render:()=>(0,s.jsx)(er.xJ,{children:(0,s.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,s.jsx)(er.lX,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(K.Qr,{name:"phone",control:g.control,render:e=>{let{field:{onChange:i,value:l}}=e;return(0,s.jsx)(ej(),{value:l,onChange:i,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})}),(0,s.jsx)(er.Wi,{control:g.control,name:"birthday",render:e=>{let{field:i}=e;return(0,s.jsx)(er.xJ,{children:(0,s.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,s.jsx)(er.lX,{className:"text-right",children:"Date de naissance"}),(0,s.jsxs)("div",{className:"col-span-4",children:[(0,s.jsx)(er.zG,{}),(0,s.jsx)(K.Qr,{name:"birthday",control:g.control,render:e=>{let{field:{onChange:l,value:t}}=e;return(0,s.jsx)(eA.M,{date:t,setDate:l,defaultDate:t||(0,eO.B)(new Date,-21),...i})}})]})]})})}})]}),(0,s.jsx)(eo.cN,{children:(0,s.jsx)(v.f,{isLoading:x,label:"Valider",type:"submit",className:"w-full mt-4"})})]})})})})};var eZ=l(68275);let eH=e=>{let{isOpened:i,setIsOpened:l}=e,{inviteToken:t,resetInviteToken:n}=(0,eU.u)(),{joinTeam:a,isJoinLoading:r}=u(),{refetchTeam:o}=ee();function d(){l(!1),n()}return(0,s.jsx)(eo.Vq,{open:i,onOpenChange:l,children:(0,s.jsxs)(eo.cZ,{className:"sm:max-w-[600px]",children:[(0,s.jsx)(eo.fK,{children:(0,s.jsx)(eo.$N,{children:"Rejoindre une \xe9quipe"})}),(0,s.jsx)(eZ.Be,{children:"Vous vous appr\xeatez \xe0 rejoindre une \xe9quipe et quitter votre \xe9quipe actuelle. Toutes vos informations seront transf\xe9r\xe9es \xe0 votre nouvelle \xe9quipe."}),(0,s.jsxs)("div",{className:"flex justify-end mt-2 space-x-4",children:[(0,s.jsx)(E.z,{variant:"outline",onClick:d,disabled:r,children:"Annuler"}),(0,s.jsx)(v.f,{isLoading:r,onClick:function(){void 0!==t&&a(t,()=>{o(),d()})},label:"Rejoindre l'\xe9quipe",className:"w-[140px]"})]})]})})},eW=e=>{let{isOpened:i,setIsOpened:l,title:t,description:n,status:a,callback:o,width:d="w-[100px]"}=e;return(0,s.jsx)(eo.Vq,{open:i,onOpenChange:l,children:(0,s.jsxs)(eo.cZ,{className:"sm:max-w-[600px]",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(eo.fK,{children:(0,s.jsxs)(eo.$N,{className:"h-20",children:[(0,s.jsx)("div",{className:"mt-16",children:t}),(0,s.jsx)("div",{className:"".concat("SUCCESS"===a?"bg-green-600":"bg-red-600"," w-52 h-52 rounded-full relative -top-52 mx-auto"),children:"SUCCESS"===a?(0,s.jsx)(r.dZ6,{className:"text-white w-32 h-32 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"}):(0,s.jsx)(r.apv,{className:"text-white w-32 h-32 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})]})}),(0,s.jsx)(eZ.Be,{children:n}),(0,s.jsx)("div",{className:"flex justify-end mt-2 space-x-4",children:(0,s.jsx)(E.z,{variant:"outline",onClick:function(e){e.stopPropagation(),o(),l(!1)},className:d,children:"Continuer"})})]})})},eM=e=>{let{isOpened:i,setIsOpened:l}=e,[t,n]=(0,m.useState)(!1),{information:a}=(0,eg.u)(),{refetch:r,setDocumentId:d}=(0,ey.k)(),c=(0,L.useRouter)();return a&&(0,s.jsx)(eW,{isOpened:i,setIsOpened:l,title:"Inscription compl\xe8te",description:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{children:"Votre inscription est compl\xe8te."}),(0,s.jsx)("div",{children:"Vous trouverez toutes les informations n\xe9cessaires dans le document \xe0 t\xe9l\xe9charger ci-dessous."}),(0,s.jsx)("div",{children:"Bonne pr\xe9paration et \xe0 tr\xe8s bient\xf4t !"}),(0,s.jsx)(v.f,{className:"w-full mt-6",variant:"outline",onClick:e=>{var i;return i=a.raid_information_id,void(n(!0),d(i),r().then(e=>{let i=e.data;if(!i){(0,o.Am)({title:"Erreur",description:"Impossible de t\xe9l\xe9charger le fichier",variant:"destructive"}),n(!1);return}let l=i.type.split("/")[1],t=window.URL.createObjectURL(new Blob([i])),s=document.createElement("a");s.href=t,s.setAttribute("download","R\xe9glement_du_raid.".concat(l)),document.body.appendChild(s),n(!1),s.click()}))},isLoading:t,label:"T\xe9l\xe9charger le document"})]}),status:"SUCCESS",callback:()=>{l(!1),c.replace("/")}})};var eJ=()=>{let{isTokenQueried:e,token:i}=(0,c.a)(),{me:l,isFetched:t,refetch:n}=U(),{me:a,isAdmin:r}=(0,Q.a)(),{team:d,createTeam:u,refetchTeam:v,isLoading:h}=ee(),[x,f]=(0,m.useState)(!1),[j,g]=(0,m.useState)(!0),y=(0,L.useSearchParams)(),b=y.get("invite");y.get("checkoutIntentId");let _=y.get("code");y.get("orderId");let{inviteToken:N,setInviteToken:z}=(0,eU.u)(),w=(0,L.useRouter)(),{information:C}=(0,eg.u)(),[S,I]=(0,m.useState)(!1);if(null!==b&&N!==b&&(z(b),w.replace("/")),e&&null===i&&w.replace("/login"),r()){let e=y.get("redirect");null!==e?w.replace(e):w.replace("/admin")}return t&&void 0===l&&!x&&f(!0),void 0===N||x||f(!0),void 0===l||void 0!==d||x||f(!0),(0,s.jsxs)(s.Fragment,{children:["succeeded"===_&&(0,s.jsx)(eW,{isOpened:j,setIsOpened:g,title:"Paiement effectu\xe9",description:"Votre paiement a \xe9t\xe9 effectu\xe9 avec succ\xe8s. Vous pouvez terminer votre inscription, si ce n'est pas encore le cas.",status:"SUCCESS",callback:()=>{n(),g(!1),w.replace("/")}}),"refused"===_&&(0,s.jsx)(eW,{isOpened:j,setIsOpened:g,title:"Paiement refus\xe9",description:"Votre paiement a \xe9t\xe9 refus\xe9. Vous pouvez r\xe9essayer de payer, si le probl\xe8me persiste, veuillez nous contacter.",status:"ERROR",callback:()=>{g(!1),w.replace("/")}}),(null==d?void 0:d.validation_progress)===100&&(0,s.jsx)(eM,{isOpened:j,setIsOpened:g}),t&&void 0===l&&x&&a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eD,{isOpened:x,setIsOpened:f,user:a}),(0,s.jsx)(s.Fragment,{children:null!=C&&!!C.raid_registering_end_date&&0>(0,eC.pc)(null==C?void 0:C.raid_registering_end_date)&&(0,s.jsx)(B.Z,{isOpened:j,setIsOpened:g,isLoading:!1,title:"Inscriptions termin\xe9es",description:"Les inscriptions sont termin\xe9es. Si vous ne l'avez pas encore fait, nous vous invitons \xe0 prendre contact avec l'organisation pour conna\xeetre les \xe9tapes \xe0 suivre.",validateLabel:"Continuer",callback:()=>g(!1)})})]}),t&&l&&void 0===d&&!h&&(0,s.jsx)(B.Z,{isOpened:j,setIsOpened:g,isLoading:S,title:"Aucune \xe9quipe trouv\xe9e",description:"Vous n'\xeates pas encore inscrit dans une \xe9quipe. Vous pouvez en cr\xe9er une. Si vous avez re\xe7u un lien d'invitation, vous pouvez l'utiliser pour rejoindre une \xe9quipe.",validateLabel:"Cr\xe9er une \xe9quipe",width:"w-[140px]",callback:()=>{I(!0),u({name:"\xc9quipe de ".concat(l.firstname," ").concat(l.name)},()=>{v(),g(!1),I(!1),(0,o.Am)({title:"Votre \xe9quipe a \xe9t\xe9 cr\xe9\xe9e avec succ\xe8s"})})}}),void 0!==N&&(0,s.jsx)(eH,{isOpened:x,setIsOpened:f}),(0,s.jsx)(eG,{}),(0,s.jsxs)("main",{className:"flex flex-col items-center mt-4",children:[(0,s.jsx)("div",{className:"w-full px-10 max-md:px-8",children:(0,s.jsx)(eS,{team:d})}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-10 w-full p-10 grid-cols-1 max-lg:p-8 max-lg:gap-8",children:[(0,s.jsx)(eN,{participant:null==d?void 0:d.captain,isCaptain:!0}),(null==d?void 0:d.second)!==null?(0,s.jsx)(eN,{participant:null==d?void 0:d.second,isCaptain:!1}):(0,s.jsx)(p,{team:d})]})]})]})}},26477:function(e,i,l){"use strict";l.d(i,{L:function(){return a}});var t=l(57437),n=l(48185),s=l(2183);let a=e=>{let{info:i,isLoaded:l}=e;return(0,t.jsxs)(n.Zb,{children:[(0,t.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(n.ll,{className:"text-sm font-medium",children:l?(0,t.jsx)("span",{children:i.title}):(0,t.jsx)(s.O,{className:"w-24 h-5"})}),i.unit&&(l?i.unit:(0,t.jsx)(s.O,{className:"w-4 h-4 text-muted-foreground"}))]}),(0,t.jsxs)(n.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:l?i.value:(0,t.jsx)(s.O,{className:"w-[150px] h-6"})}),l?(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:i.description}):(0,t.jsx)(s.O,{className:"w-[120px] h-4 mt-1"})]})]},i.title)}}},function(e){e.O(0,[74,310,422,651,186,396,758,819,274,443,268,90,317,870,59,971,23,744],function(){return e(e.s=26113)}),_N_E=e.O()}]);