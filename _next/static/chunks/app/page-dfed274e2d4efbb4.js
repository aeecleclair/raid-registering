(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{26113:function(e,i,l){Promise.resolve().then(l.bind(l,53762))},53762:function(e,i,l){"use strict";l.r(i),l.d(i,{default:function(){return eD}});var n,a,t=l(57437),s=l(48185),r=l(54008),o=l(78068),d=l(84980),c=l(40133);let u=()=>{let{token:e}=(0,c.a)(),{mutate:i,isPending:l,isSuccess:n}=(0,d.uBv)({}),{mutate:a,isPending:t,isSuccess:s}=(0,d.K$j)({});return{createInviteToken:(l,n)=>{i({headers:{Authorization:"Bearer ".concat(e)},pathParams:{teamId:l}},{onSuccess(e,i,l){n(e)}})},isCreationLoading:l,isCreationSuccess:n,joinTeam:(i,l)=>{a({headers:{Authorization:"Bearer ".concat(e)},pathParams:{token:i}},{onSettled:(e,i)=>{if(i){console.log(i),(0,o.Am)({title:"Erreur lors du changement d'\xe9quipe",description:"Une erreur est survenue, veuillez r\xe9essayer plus tard",variant:"destructive"});return}l()}})},isJoinLoading:t,isJoinSuccess:s}};var m=l(2265),v=l(44032);let p=e=>{let{team:i}=e,{createInviteToken:l,isCreationLoading:n}=u(),[a,d]=(0,m.useState)(null);return(0,t.jsx)(s.Zb,{className:"w-full",children:(0,t.jsx)(s.aY,{className:"w-full h-full",children:(0,t.jsx)("div",{className:"flex m-auto h-full mt-3 flex-col",children:(0,t.jsxs)("div",{className:"flex m-auto flex-col items-center",children:[(0,t.jsx)(v.f,{isLoading:n,onClick:function(){void 0!==i&&l(i.id,async e=>{let i="".concat("https://inscription-raid.myecl.fr","?invite=").concat(e.token);d(i);try{await navigator.clipboard.writeText(i),(0,o.Am)({title:"Invitation envoy\xe9e",description:"Le lien d'invitation a \xe9t\xe9 copi\xe9 dans le presse-papier."})}catch(e){(0,o.Am)({variant:"destructive",title:"Erreur",description:"Impossible de copier le lien d'invitation dans le presse-papier."})}})},label:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.b9W,{className:"inline mr-4"}),(0,t.jsx)("span",{children:"Inviter un participant"})]}),className:"w-[200px]",variant:"outline"}),a&&(0,t.jsx)("span",{className:"text-sm text-muted-foreground mt-4",children:a})]})})})})};var h=l(22988),x=l(98324),f=l(25171);let j="Progress",[g,y]=(0,x.b)(j),[b,N]=g(j),z=(0,m.forwardRef)((e,i)=>{let{__scopeProgress:l,value:n,max:a,getValueLabel:t=w,...s}=e,r=I(a)?a:100,o=F(n,r)?n:null,d=C(o)?t(o,r):void 0;return(0,m.createElement)(b,{scope:l,value:o,max:r},(0,m.createElement)(f.WV.div,(0,h.Z)({"aria-valuemax":r,"aria-valuemin":0,"aria-valuenow":C(o)?o:void 0,"aria-valuetext":d,role:"progressbar","data-state":S(o,r),"data-value":null!=o?o:void 0,"data-max":r},s,{ref:i})))});z.propTypes={max(e,i,l){let n=e[i],a=String(n);return n&&!I(n)?Error(`Invalid prop \`max\` of value \`${a}\` supplied to \`${l}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`):null},value(e,i,l){let n=e[i],a=String(n),t=I(e.max)?e.max:100;return null==n||F(n,t)?null:Error(`Invalid prop \`value\` of value \`${a}\` supplied to \`${l}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` if the progress is indeterminate.

Defaulting to \`null\`.`)}};let _=(0,m.forwardRef)((e,i)=>{var l;let{__scopeProgress:n,...a}=e,t=N("ProgressIndicator",n);return(0,m.createElement)(f.WV.div,(0,h.Z)({"data-state":S(t.value,t.max),"data-value":null!==(l=t.value)&&void 0!==l?l:void 0,"data-max":t.max},a,{ref:i}))});function w(e,i){return`${Math.round(e/i*100)}%`}function S(e,i){return null==e?"indeterminate":e===i?"complete":"loading"}function C(e){return"number"==typeof e}function I(e){return C(e)&&!isNaN(e)&&e>0}function F(e,i){return C(e)&&!isNaN(e)&&e<=i&&e>=0}var k=l(37440);let E=m.forwardRef((e,i)=>{let{className:l,value:n,...a}=e;return(0,t.jsx)(z,{ref:i,className:(0,k.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",l),...a,children:(0,t.jsx)(_,{className:"h-full w-full flex-1 bg-[#304D30] transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});E.displayName=z.displayName;var O=l(89733),T=l(2183);let A=()=>(0,t.jsx)(s.aY,{children:[...Array(10)].map((e,i)=>(0,t.jsxs)("div",{className:"grid p-2 grid-cols-6 items-center w-full h-[65px]",children:[(0,t.jsx)("span",{className:"font-semibold text-left my-auto col-span-2",children:(0,t.jsx)(T.O,{className:"w-32 h-7"})}),(0,t.jsx)(T.O,{className:"w-64 h-6 col-span-4 ml-auto"})]},i))});var V=l(44541),R=l(77504),P=l(90836),L=l(31014),Q=l(39343),q=l(59772),B=l(93191),G=l(84475),D=l(17042);let U=()=>{let{token:e,userId:i,isTokenExpired:l}=(0,c.a)(),{isAdmin:n}=(0,D.a)(),a=(0,B.NL)(),{participant:t,setParticipant:s}=(0,G.p)(),{data:r,isLoading:u,isFetched:m,refetch:v}=(0,d.p5N)({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:i}},{enabled:null!==i&&void 0===t&&!n()&&!l(),retry:0,queryHash:"getParticipantById"}),{mutate:p,isSuccess:h,isPending:x}=(0,d.UIb)({}),{mutate:f,isSuccess:j,isPending:g}=(0,d.iEE)({});return void 0!==r&&t!==r&&null!==e&&s(r),{me:t,isLoading:u,isFetched:m,refetch:v,createParticipant:(i,l)=>{p({body:i,headers:{Authorization:"Bearer ".concat(e)}},{onSuccess:()=>{a.invalidateQueries({predicate:e=>"getParticipantById"===e.queryHash||"getTeamByParticipantId"===e.queryHash}),l()},onError:(e,i,l)=>{console.log(e),(0,o.Am)({title:"Erreur lors de la cr\xe9ation du participant",description:"Une erreur est survenue, veuillez r\xe9essayer plus tard",variant:"destructive"})}})},isCreationSuccess:h,isCreationLoading:x,updateParticipant:(i,l,n)=>{f({body:i,headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:l}},{onSettled:()=>{v(),n()}})},isUpdateSuccess:j,isUpdateLoading:g}};var Z=l(4867);let H=()=>{let{token:e,userId:i,isTokenExpired:l}=(0,c.a)(),{me:n}=U(),{isAdmin:a}=(0,D.a)(),t=(0,B.NL)(),{data:s,isLoading:r,refetch:u}=(0,d.B1y)({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:i}},{enabled:null!==i&&!a()&&!l()&&void 0!==n,retry:0,queryHash:"getTeamByParticipantId"}),{mutate:m,isSuccess:v,isPending:p}=(0,d.TuY)({}),{mutate:h,isSuccess:x,isPending:f}=(0,d.fKu)({});return{team:s,isLoading:r,createTeam:(i,l)=>{m({body:i,headers:{Authorization:"Bearer ".concat(e)}},{onSuccess(e,i,n){t.invalidateQueries({predicate:e=>"getTeamByParticipantId"===e.queryHash}),l()},onError(e,i,l){console.log(e),(0,o.Am)({title:"Erreur lors de la cr\xe9ation de l'\xe9quipe",description:"Une erreur est survenue, veuillez r\xe9essayer plus tard",variant:"destructive"})}})},isCreationLoading:p,isCreationSuccess:v,refetchTeam:u,updateTeam:(i,l,n)=>{h({body:n,headers:{Authorization:"Bearer ".concat(e)},pathParams:{teamId:i}},{onSettled:()=>{u(),l()}})},isUpdateLoading:f,isUpdateSuccess:x}};var W=l(77209);/**
 * @license lucide-react v0.376.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let M=(0,l(78030).Z)("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var J=l(22468),$=l(21413),Y=l(34063);function K(e){var i;let{values:l,value:n,onChange:a,placeholder:s,isSearchable:r}=e,[o,d]=(0,m.useState)(!1);return(0,t.jsxs)($.J2,{open:o,onOpenChange:d,children:[(0,t.jsx)($.xo,{asChild:!0,children:(0,t.jsxs)(O.z,{variant:"outline",role:"combobox","aria-expanded":o,className:(0,k.cn)("w-full justify-between",!n&&"text-muted-foreground"),children:[(0,t.jsx)("span",{children:n?null===(i=l.find(e=>e.value===n))||void 0===i?void 0:i.label:s}),(0,t.jsx)(M,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,t.jsx)($.yk,{className:"w-full p-0",children:(0,t.jsxs)(Y.mY,{children:[r&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.sZ,{placeholder:s}),(0,t.jsx)(Y.rb,{children:"No framework found."})]}),(0,t.jsx)(Y.fu,{children:l.map(e=>(0,t.jsxs)(Y.di,{value:e.value,onSelect:e=>{a(e),d(!1)},className:"w-full text-left",children:[(0,t.jsx)(J.Z,{className:(0,k.cn)("mr-2 h-4 w-4",n===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})})]})}var X=l(93363),ee=l(54662),ei=l(36136);let el=()=>{let{token:e}=(0,c.a)(),{mutate:i,isPending:l,isSuccess:n}=(0,d.bsA)({});return{setSecurityFile:(l,n,a)=>{i({body:l,headers:{Authorization:"Bearer ".concat(e)},queryParams:{participant_id:n}},{onSuccess(e,i,l){a(e.id)},onError(e,i,l){console.log(e),(0,o.Am)({title:"Erreur lors de la cr\xe9ation de la fiche de s\xe9curit\xe9",description:"Une erreur est survenue, veuillez r\xe9essayer plus tard",variant:"destructive"})}})},isCreationLoading:l,isCreationSuccess:n}};var en=l(35265),ea=l(18189),et=l(40933);let es=e=>{let{setIsOpen:i,participantId:l,form:n}=e,{setSecurityFile:s}=el(),o=n.watch("securityFile.validation"),d="accepted"===o,c="refused"===o,u="temporary"===o,m=void 0!==n.formState.errors.securityFile;return(0,t.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,t.jsxs)(en.UQ,{type:"single",collapsible:!0,className:"w-full",children:[(0,t.jsxs)(en.Qd,{value:"medical",children:[(0,t.jsx)(en.o4,{children:(0,t.jsx)("div",{className:"flex flex-row mr-auto items-center",children:"Informations m\xe9dicales"})}),(0,t.jsx)(en.vF,{children:(0,t.jsxs)("div",{children:[(0,t.jsx)(ev,{label:"Allergies",id:"securityFile.allergy",form:n,type:a.STRING,className:"py-[6px]"}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ev,{label:"Asthme",id:"securityFile.asthma",form:n,type:a.BOOLEAN}),n.watch("securityFile.asthma")&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ev,{label:"Passage en soins intensifs",id:"securityFile.intensive_care_unit",form:n,type:a.BOOLEAN}),n.watch("securityFile.intensive_care_unit")&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(ev,{label:"Date de passage en soins intensifs",id:"securityFile.intensive_care_unit_when",form:n,type:a.STRING})})]})]}),(0,t.jsx)(ev,{label:"Traitement en cours",id:"securityFile.ongoing_treatment",form:n,type:a.STRING,className:"py-[6px]"}),(0,t.jsx)(ev,{label:"Maladies",id:"securityFile.sicknesses",form:n,type:a.STRING,className:"py-[6px]"}),(0,t.jsx)(ev,{label:"Hospitalisation",id:"securityFile.hospitalization",form:n,type:a.STRING,className:"py-[6px]"}),(0,t.jsx)(ev,{label:"Op\xe9ration chirurgicale",id:"securityFile.surgical_operation",form:n,type:a.STRING,className:"py-[6px]"}),(0,t.jsx)(ev,{label:"Traumatisme",id:"securityFile.trauma",form:n,type:a.STRING,className:"py-[6px]"}),(0,t.jsx)(ev,{label:"Ant\xe9c\xe9dents familiaux",id:"securityFile.family",form:n,type:a.STRING,className:"py-[6px]"})]})})]}),(0,t.jsxs)(en.Qd,{value:"emergencyPerson",children:[(0,t.jsx)(en.o4,{children:(0,t.jsxs)("div",{className:"flex flex-row mr-auto items-center ".concat(m&&"text-destructive"),children:[d&&(0,t.jsx)(r.dZ6,{className:"mr-4"}),c&&(0,t.jsx)(r.apv,{className:"mr-4"}),u&&(0,t.jsx)(ea.Z,{className:"mr-4 h-4 w-4"}),!d&&!c&&!u&&(0,t.jsx)(et.Z,{className:"mr-4 h-4 w-4"}),"Personne \xe0 pr\xe9venir en cas d'urgence"]})}),(0,t.jsxs)(en.vF,{children:[(0,t.jsx)(ev,{label:"Pr\xe9nom",id:"securityFile.emergency_person_firstname",form:n,type:a.STRING}),(0,t.jsx)(ev,{label:"Nom",id:"securityFile.emergency_person_name",form:n,type:a.STRING}),(0,t.jsx)(ev,{label:"T\xe9l\xe9phone",id:"securityFile.emergency_person_phone",form:n,type:a.PHONE})]})]})]}),(0,t.jsx)(O.z,{className:"mt-6",type:"button",onClick:function(e){n.setValue("securityFile.updated",!0),s({...n.getValues("securityFile")},l,e=>{}),i(!1)},children:"Valider"})]})};var er=l(63967);let eo=e=>{let{label:i,field:l,needDialog:n}=e,[a,s]=(0,m.useState)(!1);return(0,t.jsxs)(ee.Vq,{open:a,onOpenChange:s,children:[(0,t.jsxs)("div",{className:"w-full col-span-4 text-right",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(X.NI,{children:(0,t.jsx)(V.X,{checked:l.value,onCheckedChange:e=>{n?s(!a&&!l.value):l.onChange(!l.value)}})})]}),(0,t.jsxs)(ee.cZ,{className:"md:max-w-3xl top-1/2",children:[(0,t.jsx)(ee.fK,{children:(0,t.jsx)(ee.$N,{children:i})}),(0,t.jsx)(ee.Be,{children:"En cochant cette case, vous certifiez sur l'honneur que les informations que vous avez renseign\xe9es sont exactes, que vous avez bien lu et compris le r\xe8glement de la comp\xe9tition, et que vous vous engagez \xe0 le respecter."}),(0,t.jsxs)("div",{className:"flex justify-end mt-2 space-x-4",children:[(0,t.jsx)(O.z,{variant:"outline",onClick:()=>s(!1),children:"Annuler"}),(0,t.jsx)(O.z,{onClick:function(e){e.preventDefault(),l.onChange(!l.value),s(!1)},children:"Valider"})]})]})]})};var ed=l(39589),ec=l.n(ed),eu=l(59805),em=l(90174);function ev(e){let{label:i,id:l,placeholder:n,form:a,layer:s,type:d,needDialog:c,participantId:u,className:p}=e,[h,x]=(0,m.useState)(!1),[f,j]=(0,m.useState)(!1),{information:g}=(0,eu.u)(),{refetch:y,setDocumentId:b}=(0,em.k)(),N=(e,s,m)=>{var p,N,z,_,w;switch(d){case"boolean":return(0,t.jsx)(eo,{label:i,field:e,needDialog:null!=c&&c});case"tShirtSize":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"col-span-2"}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(X.NI,{children:(0,t.jsx)(K,{values:er.Tx,placeholder:n,...e})})]})]});case"bikeSize":return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"col-span-2"}),(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(X.NI,{children:(0,t.jsx)(K,{values:er.FS,placeholder:n,...e})})]})]});case"document":return(0,t.jsxs)("div",{className:"col-span-4 gap-2 grid grid-cols-3",children:[(0,t.jsxs)(ee.Vq,{open:s,onOpenChange:m,children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(ee.hg,{asChild:!0,children:(0,t.jsx)(O.z,{variant:"outline",className:"raidRules"===l&&(null==g?void 0:g.raid_rules_id)?"col-span-2":"col-span-3",disabled:f,children:(0,t.jsx)("div",{className:"flex flex-row items-start w-full",children:(0,t.jsx)(t.Fragment,{children:(null===(p=e.value)||void 0===p?void 0:p.name)?(0,t.jsx)("span",{className:"text-gray-500 overflow-hidden",children:null!==(z=e.value.name)&&void 0!==z?z:"Aucun fichier s\xe9l\xe9ctionn\xe9"}):(0,t.jsx)("span",{className:"font-semibold  mr-6",children:"Choisir un fichier"})})})})}),(0,t.jsxs)(ee.cZ,{className:"md:max-w-2xl top-1/2",children:[(0,t.jsx)(ee.fK,{children:(0,t.jsx)(ee.$N,{className:"text-red sm:text-lg",children:i})}),(0,t.jsx)(ei.e,{setIsOpen:m,setIsUploading:j,field:e,fileType:l,documentId:null===(N=e.value)||void 0===N?void 0:N.id,participantId:u})]})]}),"raidRules"===l&&!!(null==g?void 0:g.raid_rules_id)&&(0,t.jsx)(v.f,{variant:"outline",className:"col-span-1",type:"button",onClick:e=>{var i;return i=g.raid_rules_id,void(x(!0),b(i),y().then(e=>{let i=e.data;if(!i){(0,o.Am)({title:"Erreur",description:"Impossible de t\xe9l\xe9charger le fichier",variant:"destructive"}),x(!1);return}let l=i.type.split("/")[1],n=window.URL.createObjectURL(new Blob([i])),a=document.createElement("a");a.href=n,a.setAttribute("download","R\xe9glement_du_raid.".concat(l)),document.body.appendChild(a),x(!1),a.click()}))},isLoading:h,label:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.H_7,{className:"mr-2"}),"T\xe9l\xe9charger"]})})]});case"securityFile":return(0,t.jsxs)(ee.Vq,{open:s,onOpenChange:m,children:[(0,t.jsx)(ee.hg,{asChild:!0,children:(0,t.jsx)(O.z,{variant:"outline",className:"col-span-4",disabled:f,children:(0,t.jsx)("div",{className:"flex flex-row items-start w-full",children:f?(0,t.jsx)(Z.BGW,{className:"mr-2 h-4 w-4 animate-spin"}):(0,t.jsx)(t.Fragment,{children:(null===(_=e.value)||void 0===_?void 0:_.updated)||(null===(w=e.value)||void 0===w?void 0:w.id)?(0,t.jsx)("span",{className:"text-gray-500 overflow-hidden",children:"Fiche de s\xe9curit\xe9"}):(0,t.jsx)("span",{className:"font-semibold mr-6",children:"Remplir la fiche de s\xe9curit\xe9"})})})})}),(0,t.jsxs)(ee.cZ,{className:"md:max-w-3xl top-1/2",children:[(0,t.jsx)(ee.fK,{children:(0,t.jsx)(ee.$N,{className:"text-red sm:text-lg",children:i})}),(0,t.jsx)(es,{setIsOpen:m,participantId:u,form:a})]})]});case"string":return(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(X.NI,{children:(0,t.jsx)(W.I,{placeholder:n,...e})})]});case"situation":return(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(X.NI,{children:(0,t.jsx)(K,{values:er.LN,placeholder:n,...e})})]});case"difficulty":return(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(X.NI,{children:(0,t.jsx)(K,{values:er.n9,placeholder:n,...e})})]});case"meetingPlace":return(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(X.NI,{children:(0,t.jsx)(K,{values:er.xQ,placeholder:n,...e})})]});case"phone":return(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(X.NI,{children:(0,t.jsx)(ec(),{country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",...e})})]});default:return(0,t.jsx)(T.O,{className:"w-24 h-6"})}},[z,_]=(0,m.useState)(!1);return(0,t.jsx)(X.Wi,{control:a.control,name:l,render:e=>{let{field:l}=e;return(0,t.jsx)(X.xJ,{children:(0,t.jsxs)("div",{className:"grid p-2 grid-cols-6 ".concat(p),children:[(0,t.jsxs)(X.lX,{className:"font-semibold text-left my-auto text-md col-span-2",children:[s&&(0,t.jsx)(r.WFu,{className:"inline mr-4"}),i]}),N(l,z,_)]})})}})}(n=a||(a={})).STRING="string",n.PHONE="phone",n.TSHIRTSIZE="tShirtSize",n.BIKESIZE="bikeSize",n.BOOLEAN="boolean",n.DOCUMENT="document",n.SECURITYFILE="securityFile",n.SITUATION="situation",n.DIFFICULTY="difficulty",n.MEETINGPLACE="meetingPlace";let ep=e=>{var i,l,n,d,c,u,v,p,h,x,f,j,g,y,b,N,z,_,w,S,C,I,F,k,E,T,A,V,B,G,D,W,M,J,$,Y,K,X,ee,ei,el,en,ea,et,es,eo,ed,ec,eu,em,ep,eh,ex,ef,ej,eg,ey,eb,eN,ez,e_,ew,eS,eC,eI,eF;let{participant:ek,isEdit:eE,setIsEdit:eO}=e,{updateParticipant:eT,isUpdateLoading:eA}=U(),{refetchTeam:eV}=H(),eR=q.z.object({address:q.z.string().min(1,{message:"Veuillez renseigner votre adresse"}).optional(),bikeSize:q.z.string().refine(e=>["xs","s","m","l","xl"].includes(e),{message:"Veuillez renseigner une taille de v\xe9lo valide"}).optional(),tShirtSize:q.z.string().refine(e=>["xs","s","m","l","xl","no"].includes(e),{message:"Veuillez renseigner une taille de t-shirt valide"}).optional(),situation:q.z.string().optional(),otherSchool:q.z.string().optional(),company:q.z.string().optional(),other:q.z.string().optional(),diet:q.z.string().optional(),idCard:q.z.object({name:q.z.string(),id:q.z.string().uuid(),updated:q.z.boolean(),type:q.z.literal("idCard")}).partial(),medicalCertificate:q.z.object({name:q.z.string(),id:q.z.string().uuid(),updated:q.z.boolean(),type:q.z.literal("medicalCertificate")}).partial(),studentCard:q.z.object({name:q.z.string(),id:q.z.string().uuid(),updated:q.z.boolean(),type:q.z.literal("studentCard")}).partial(),raidRules:q.z.object({name:q.z.string(),id:q.z.string().uuid(),updated:q.z.boolean(),type:q.z.literal("raidRules")}).partial(),parentAuthorization:q.z.object({name:q.z.string(),id:q.z.string().uuid(),updated:q.z.boolean(),type:q.z.literal("parentAuthorization")}).partial(),securityFile:q.z.object({allergy:q.z.string().optional(),asthma:q.z.boolean(),intensive_care_unit:q.z.boolean().optional(),intensive_care_unit_when:q.z.string().optional(),ongoing_treatment:q.z.string().optional(),sicknesses:q.z.string().optional(),hospitalization:q.z.string().optional(),surgical_operation:q.z.string().optional(),trauma:q.z.string().optional(),family:q.z.string().optional(),id:q.z.string().uuid(),updated:q.z.boolean(),emergency_person_name:q.z.string().min(1,{message:"Veuillez renseigner le nom de la personne \xe0 contacter"}),emergency_person_firstname:q.z.string().min(1,{message:"Veuillez renseigner le pr\xe9nom de la personne \xe0 contacter"}),emergency_person_phone:q.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).min(10,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}).max(14,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}),validation:q.z.enum(["pending","accepted","refused","temporary"])}).partial(),attestationHonour:q.z.boolean().optional()}).refine(e=>!("no"===e.tShirtSize&&ek.t_shirt_payment),{message:"Vous avez d\xe9j\xe0 payer pour un t-shirt, veuillez choisir un",path:["tShirtSize"]}),eP=(0,Q.cI)({resolver:(0,L.F)(eR),mode:"onBlur",defaultValues:{address:null!==(V=ek.address)&&void 0!==V?V:void 0,bikeSize:null!==(B=null===(i=ek.bike_size)||void 0===i?void 0:i.toLowerCase())&&void 0!==B?B:void 0,tShirtSize:null!==(G=null===(l=ek.t_shirt_size)||void 0===l?void 0:l.toLowerCase())&&void 0!==G?G:void 0,situation:(0,R.l)(null!==(D=ek.situation)&&void 0!==D?D:void 0),other:"other"===(0,R.l)(null!==(W=ek.situation)&&void 0!==W?W:void 0)?(0,R.Q)(null!==(M=ek.situation)&&void 0!==M?M:void 0):void 0,otherSchool:"otherschool"===(0,R.l)(null!==(J=ek.situation)&&void 0!==J?J:void 0)?(0,R.Q)(null!==($=ek.situation)&&void 0!==$?$:void 0):void 0,company:"corporatepartner"===(0,R.l)(null!==(Y=ek.situation)&&void 0!==Y?Y:void 0)?(0,R.Q)(null!==(K=ek.situation)&&void 0!==K?K:void 0):void 0,diet:null!==(X=ek.diet)&&void 0!==X?X:void 0,idCard:{name:null!==(ee=null===(n=ek.id_card)||void 0===n?void 0:n.name)&&void 0!==ee?ee:void 0,id:null!==(ei=null===(d=ek.id_card)||void 0===d?void 0:d.id)&&void 0!==ei?ei:void 0,type:"idCard"},medicalCertificate:{name:null!==(el=null===(c=ek.medical_certificate)||void 0===c?void 0:c.name)&&void 0!==el?el:void 0,id:null!==(en=null===(u=ek.medical_certificate)||void 0===u?void 0:u.id)&&void 0!==en?en:void 0,type:"medicalCertificate"},studentCard:{name:null!==(ea=null===(v=ek.student_card)||void 0===v?void 0:v.name)&&void 0!==ea?ea:void 0,id:null!==(et=null===(p=ek.student_card)||void 0===p?void 0:p.id)&&void 0!==et?et:void 0,type:"studentCard"},raidRules:{name:null!==(es=null===(h=ek.raid_rules)||void 0===h?void 0:h.name)&&void 0!==es?es:void 0,id:null!==(eo=null===(x=ek.raid_rules)||void 0===x?void 0:x.id)&&void 0!==eo?eo:void 0,type:"raidRules"},parentAuthorization:{name:null!==(ed=null===(f=ek.parent_authorization)||void 0===f?void 0:f.name)&&void 0!==ed?ed:void 0,id:null!==(ec=null===(j=ek.parent_authorization)||void 0===j?void 0:j.id)&&void 0!==ec?ec:void 0,type:"parentAuthorization"},securityFile:{allergy:null!==(eu=null==ek?void 0:null===(g=ek.security_file)||void 0===g?void 0:g.allergy)&&void 0!==eu?eu:void 0,asthma:null!==(em=null==ek?void 0:null===(y=ek.security_file)||void 0===y?void 0:y.asthma)&&void 0!==em&&em,intensive_care_unit:null!==(ep=null==ek?void 0:null===(b=ek.security_file)||void 0===b?void 0:b.intensive_care_unit)&&void 0!==ep&&ep,intensive_care_unit_when:null!==(eh=null==ek?void 0:null===(N=ek.security_file)||void 0===N?void 0:N.intensive_care_unit_when)&&void 0!==eh?eh:void 0,ongoing_treatment:null!==(ex=null==ek?void 0:null===(z=ek.security_file)||void 0===z?void 0:z.ongoing_treatment)&&void 0!==ex?ex:void 0,sicknesses:null!==(ef=null==ek?void 0:null===(_=ek.security_file)||void 0===_?void 0:_.sicknesses)&&void 0!==ef?ef:void 0,hospitalization:null!==(ej=null==ek?void 0:null===(w=ek.security_file)||void 0===w?void 0:w.hospitalization)&&void 0!==ej?ej:void 0,surgical_operation:null!==(eg=null==ek?void 0:null===(S=ek.security_file)||void 0===S?void 0:S.surgical_operation)&&void 0!==eg?eg:void 0,trauma:null!==(ey=null==ek?void 0:null===(C=ek.security_file)||void 0===C?void 0:C.trauma)&&void 0!==ey?ey:void 0,family:null!==(eb=null==ek?void 0:null===(I=ek.security_file)||void 0===I?void 0:I.family)&&void 0!==eb?eb:void 0,id:null!==(eN=null==ek?void 0:null===(F=ek.security_file)||void 0===F?void 0:F.id)&&void 0!==eN?eN:void 0,emergency_person_name:null!==(ez=null==ek?void 0:null===(k=ek.security_file)||void 0===k?void 0:k.emergency_person_name)&&void 0!==ez?ez:void 0,emergency_person_firstname:null!==(e_=null==ek?void 0:null===(E=ek.security_file)||void 0===E?void 0:E.emergency_person_firstname)&&void 0!==e_?e_:void 0,emergency_person_phone:null!==(ew=null==ek?void 0:null===(T=ek.security_file)||void 0===T?void 0:T.emergency_person_phone)&&void 0!==ew?ew:void 0,validation:null!==(eS=null==ek?void 0:null===(A=ek.security_file)||void 0===A?void 0:A.validation)&&void 0!==eS?eS:void 0},attestationHonour:ek.attestation_on_honour}});async function eL(e){var i,l,n,a,t,s;if(!eP.formState.isDirty){eO(!eE);return}let r=[e.idCard,e.medicalCertificate,e.studentCard,e.raidRules,e.parentAuthorization].filter(e=>e.updated),d={bike_size:null!==(n=null===(i=e.bikeSize)||void 0===i?void 0:i.toUpperCase())&&void 0!==n?n:null,t_shirt_size:null!==(a="no"===e.tShirtSize?"None":null===(l=e.tShirtSize)||void 0===l?void 0:l.toUpperCase())&&void 0!==a?a:null,situation:function(e){switch(e.situation){case"otherschool":return"otherschool : ".concat(e.otherSchool);case"corporatepartner":return"corporatepartner : ".concat(e.company);case"other":return"other : ".concat(e.other);default:return"centrale"}}(e),address:null!==(t=e.address)&&void 0!==t?t:null,diet:null!==(s=e.diet)&&void 0!==s?s:null,attestation_on_honour:e.attestationHonour};for(let e of r)switch(e.type){case"idCard":d.id_card_id=e.id;case"medicalCertificate":d.medical_certificate_id=e.id;case"studentCard":d.student_card_id=e.id;case"raidRules":d.raid_rules_id=e.id;case"parentAuthorization":d.parent_authorization_id=e.id}eT(d,ek.id,()=>{var i,l,n,a,t,s,r,d,c,u,m,v,p,h,x,f,j,g,y,b,N,z,_,w,S,C,I,F,k,E,O,T,A,V,P,L,Q,q,B,G,D,U,Z,H,W,M,J,$,Y,K,X,ee,ei,el,en,ea,et,es,er,eo,ed,ec,eu,em,ev;(0,o.Am)({title:"Profil mis \xe0 jour",description:"Vos informations ont \xe9t\xe9 mises \xe0 jour avec succ\xe8s"}),eV(),eO(!eE),eP.reset({address:null!==(k=e.address)&&void 0!==k?k:void 0,bikeSize:null!==(E=null===(i=e.bikeSize)||void 0===i?void 0:i.toLowerCase())&&void 0!==E?E:void 0,tShirtSize:null!==(O=null===(l=e.tShirtSize)||void 0===l?void 0:l.toLowerCase())&&void 0!==O?O:void 0,situation:(0,R.l)(null!==(T=e.situation)&&void 0!==T?T:void 0),other:"other"===(0,R.l)(null!==(A=e.situation)&&void 0!==A?A:void 0)?(0,R.Q)(null!==(V=e.situation)&&void 0!==V?V:void 0):void 0,otherSchool:"otherschool"===(0,R.l)(null!==(P=e.situation)&&void 0!==P?P:void 0)?(0,R.Q)(null!==(L=e.situation)&&void 0!==L?L:void 0):void 0,company:"corporatepartner"===(0,R.l)(null!==(Q=e.situation)&&void 0!==Q?Q:void 0)?(0,R.Q)(null!==(q=e.situation)&&void 0!==q?q:void 0):void 0,diet:null!==(B=e.diet)&&void 0!==B?B:void 0,idCard:{name:null!==(G=null===(n=e.idCard)||void 0===n?void 0:n.name)&&void 0!==G?G:void 0,id:null!==(D=null===(a=e.idCard)||void 0===a?void 0:a.id)&&void 0!==D?D:void 0,type:"idCard"},medicalCertificate:{name:null!==(U=null===(t=e.medicalCertificate)||void 0===t?void 0:t.name)&&void 0!==U?U:void 0,id:null!==(Z=null===(s=e.medicalCertificate)||void 0===s?void 0:s.id)&&void 0!==Z?Z:void 0,type:"medicalCertificate"},studentCard:{name:null!==(H=null===(r=e.studentCard)||void 0===r?void 0:r.name)&&void 0!==H?H:void 0,id:null!==(W=null===(d=e.studentCard)||void 0===d?void 0:d.id)&&void 0!==W?W:void 0,type:"studentCard"},raidRules:{name:null!==(M=null===(c=e.raidRules)||void 0===c?void 0:c.name)&&void 0!==M?M:void 0,id:null!==(J=null===(u=e.raidRules)||void 0===u?void 0:u.id)&&void 0!==J?J:void 0,type:"raidRules"},parentAuthorization:{name:null!==($=null===(m=e.parentAuthorization)||void 0===m?void 0:m.name)&&void 0!==$?$:void 0,id:null!==(Y=null===(v=e.parentAuthorization)||void 0===v?void 0:v.id)&&void 0!==Y?Y:void 0,type:"parentAuthorization"},securityFile:{allergy:null!==(K=null==e?void 0:null===(p=e.securityFile)||void 0===p?void 0:p.allergy)&&void 0!==K?K:void 0,asthma:null!==(X=null==e?void 0:null===(h=e.securityFile)||void 0===h?void 0:h.asthma)&&void 0!==X&&X,intensive_care_unit:null!==(ee=null==e?void 0:null===(x=e.securityFile)||void 0===x?void 0:x.intensive_care_unit)&&void 0!==ee&&ee,intensive_care_unit_when:null!==(ei=null==e?void 0:null===(f=e.securityFile)||void 0===f?void 0:f.intensive_care_unit_when)&&void 0!==ei?ei:void 0,ongoing_treatment:null!==(el=null==e?void 0:null===(j=e.securityFile)||void 0===j?void 0:j.ongoing_treatment)&&void 0!==el?el:void 0,sicknesses:null!==(en=null==e?void 0:null===(g=e.securityFile)||void 0===g?void 0:g.sicknesses)&&void 0!==en?en:void 0,hospitalization:null!==(ea=null==e?void 0:null===(y=e.securityFile)||void 0===y?void 0:y.hospitalization)&&void 0!==ea?ea:void 0,surgical_operation:null!==(et=null==e?void 0:null===(b=e.securityFile)||void 0===b?void 0:b.surgical_operation)&&void 0!==et?et:void 0,trauma:null!==(es=null==e?void 0:null===(N=e.securityFile)||void 0===N?void 0:N.trauma)&&void 0!==es?es:void 0,family:null!==(er=null==e?void 0:null===(z=e.securityFile)||void 0===z?void 0:z.family)&&void 0!==er?er:void 0,id:null!==(ed=null!==(eo=null==e?void 0:null===(_=e.securityFile)||void 0===_?void 0:_.id)&&void 0!==eo?eo:null==ek?void 0:null===(w=ek.security_file)||void 0===w?void 0:w.id)&&void 0!==ed?ed:"",emergency_person_name:null!==(ec=null==e?void 0:null===(S=e.securityFile)||void 0===S?void 0:S.emergency_person_name)&&void 0!==ec?ec:void 0,emergency_person_firstname:null!==(eu=null==e?void 0:null===(C=e.securityFile)||void 0===C?void 0:C.emergency_person_firstname)&&void 0!==eu?eu:void 0,emergency_person_phone:null!==(em=null==e?void 0:null===(I=e.securityFile)||void 0===I?void 0:I.emergency_person_phone)&&void 0!==em?em:void 0,validation:null!==(ev=null==e?void 0:null===(F=e.securityFile)||void 0===F?void 0:F.validation)&&void 0!==ev?ev:void 0},attestationHonour:e.attestationHonour})})}return(0,t.jsx)(s.aY,{children:(0,m.createElement)(Q.RV,{...eP,key:"Participant"},(0,t.jsxs)("form",{onSubmit:eP.handleSubmit(eL),className:"flex flex-col justify-between h-full ".concat(eE?"":"space-y-4"),children:[eE?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ev,{label:"Adresse",id:"address",form:eP,type:a.STRING}),(0,t.jsx)(ev,{label:"Taille de v\xe9lo",placeholder:"Taille",id:"bikeSize",form:eP,type:a.BIKESIZE}),(0,t.jsx)(ev,{label:"Taille de t-shirt",id:"tShirtSize",placeholder:"Taille",form:eP,type:a.TSHIRTSIZE}),(0,t.jsx)(ev,{label:"R\xe9gime alimentaire",id:"diet",form:eP,type:a.STRING}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ev,{label:"Situation",id:"situation",form:eP,type:a.SITUATION}),"otherschool"===eP.watch("situation")&&(0,t.jsx)(ev,{label:"Nom de l'\xe9cole",id:"otherSchool",form:eP,type:a.STRING,layer:1}),"corporatepartner"===eP.watch("situation")&&(0,t.jsx)(ev,{label:"Nom de l'entreprise",id:"company",form:eP,type:a.STRING,layer:1}),"other"===eP.watch("situation")&&(0,t.jsx)(ev,{label:"Autre situation",id:"other",form:eP,type:a.STRING,layer:1})]}),["centrale","otherschool"].includes(null!==(eC=eP.watch("situation"))&&void 0!==eC?eC:"")&&(0,t.jsx)(ev,{label:"Carte \xe9tudiante",id:"studentCard",form:eP,type:a.DOCUMENT,layer:1,participantId:ek.id}),(0,t.jsx)(ev,{label:"Carte d'identit\xe9",id:"idCard",form:eP,type:a.DOCUMENT,participantId:ek.id}),(0,t.jsx)(ev,{label:"Certificat m\xe9dical",id:"medicalCertificate",form:eP,type:a.DOCUMENT,participantId:ek.id}),(0,t.jsx)(ev,{label:"Fiche de s\xe9curit\xe9",id:"securityFile",form:eP,type:a.SECURITYFILE,participantId:ek.id}),ek.is_minor&&(0,t.jsx)(ev,{label:"Autorisation parentale",id:"parentAuthorization",form:eP,type:a.DOCUMENT,participantId:ek.id}),(0,t.jsx)(ev,{label:"R\xe8glement du raid",id:"raidRules",form:eP,type:a.DOCUMENT,participantId:ek.id}),(0,t.jsx)(ev,{label:"Attestation sur l'honneur",id:"attestationHonour",form:eP,type:a.BOOLEAN,needDialog:!0})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.Q,{label:"Adresse",value:ek.address}),(0,t.jsx)(P.Q,{label:"Taille de v\xe9lo",value:ek.bike_size}),(0,t.jsx)(P.Q,{label:"Taille de t-shirt",value:ek.t_shirt_size,placeholder:"Pas de Tshirt"}),(0,t.jsx)(P.Q,{label:"R\xe9gime alimentaire",value:ek.diet}),function(){var e,i;let l=(0,R.l)(null!==(e=ek.situation)&&void 0!==e?e:void 0),n=(0,R.Q)(null!==(i=ek.situation)&&void 0!==i?i:void 0);return"undefined"===n&&(n=null),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.Q,{label:"Situation",value:(0,er.Jg)(er.LN,l)}),"otherschool"===l&&(0,t.jsx)(P.Q,{label:"Nom de l'\xe9cole",value:n}),"corporatepartner"===l&&(0,t.jsx)(P.Q,{label:"Nom de l'entreprise",value:n}),"other"===l&&(0,t.jsx)(P.Q,{label:"Autre situation",value:n})]})}(),["centrale","otherschool"].includes(null!==(eF=(0,R.l)(null!==(eI=ek.situation)&&void 0!==eI?eI:void 0))&&void 0!==eF?eF:"")&&(0,t.jsx)(P.Q,{label:"Carte \xe9tudiante",value:ek.student_card,participantId:ek.id}),(0,t.jsx)(P.Q,{label:"Carte d'identit\xe9",value:ek.id_card,participantId:ek.id}),(0,t.jsx)(P.Q,{label:"Certificat m\xe9dical",value:ek.medical_certificate,participantId:ek.id}),(0,t.jsx)(P.Q,{label:"Fiche de s\xe9curit\xe9",value:ek.security_file}),ek.is_minor&&(0,t.jsx)(P.Q,{label:"Autorisation parentale",value:ek.parent_authorization,participantId:ek.id}),(0,t.jsx)(P.Q,{label:"R\xe8glement du raid",value:ek.raid_rules,participantId:ek.id}),(0,t.jsx)(P.Q,{label:"Attestation sur l'honneur",value:ek.attestation_on_honour})]}),eE&&(0,t.jsx)(t.Fragment,{children:eA?(0,t.jsx)(O.z,{variant:"default",disabled:!0,className:"w-full mt-6",children:(0,t.jsx)(Z.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,t.jsxs)(O.z,{className:"w-full mt-6",type:"submit",disabled:!eP.formState.isDirty,children:[(0,t.jsx)(r.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})})]}))})},eh=e=>{var i;let{participant:l,isCaptain:n}=e,{information:a}=(0,eu.u)(),[o,d]=(0,m.useState)(!1);function c(){d(!o)}return(0,t.jsxs)(s.Zb,{className:"w-full flex flex-col justify-between",children:[(0,t.jsx)(s.Ol,{children:(0,t.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(s.ll,{children:(null==l?void 0:l.firstname)&&(null==l?void 0:l.firstname)?(null==l?void 0:l.firstname)+" "+(null==l?void 0:l.name):(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(T.O,{className:"w-32 h-8"}),(0,t.jsx)(T.O,{className:"w-32 h-8"})]})}),(0,t.jsx)(s.SZ,{children:l?(0,t.jsx)(t.Fragment,{children:n?"Capitaine":"\xa0"}):(0,t.jsx)(T.O,{className:"w-24 h-5 mt-1"})})]}),o&&l?(0,t.jsxs)(O.z,{variant:"destructive",onClick:c,className:"w-[110px]",children:[(0,t.jsx)(r.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]}):(0,t.jsxs)(O.z,{variant:"outline",onClick:c,className:"w-[110px]",children:[(0,t.jsx)(r.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})]})}),l?(0,t.jsx)(ep,{participant:l,isEdit:o,setIsEdit:d}):(0,t.jsx)(A,{}),!o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.eW,{className:"w-full",children:l?(0,t.jsxs)("div",{className:"grid p-2 grid-cols-6 items-center w-full",children:[(0,t.jsx)("span",{className:"font-semibold text-left my-auto col-span-2",children:"Paiement"}),(null==l?void 0:l.payment)||"corporatepartner"===(0,R.l)(null!==(i=null==l?void 0:l.situation)&&void 0!==i?i:void 0)?(0,t.jsx)(V.X,{checked:null==l?void 0:l.payment,disabled:!0,className:"col-span-4 ml-auto disabled:opacity-100"}):(0,t.jsx)(t.Fragment,{children:(null==a?void 0:a.payment_link)?(0,t.jsx)(O.z,{className:"col-span-4 ml-auto w-[100px]",onClick:()=>{window.open(a.payment_link,"_blank")},children:"Payer"}):(0,t.jsx)("span",{children:"Aucun lien"})})]}):(0,t.jsxs)("div",{className:"grid p-2 grid-cols-6 items-center w-full h-[65px]",children:[(0,t.jsx)("span",{className:"font-semibold text-left my-auto col-span-2",children:(0,t.jsx)(T.O,{className:"w-32 h-7"})}),(0,t.jsx)(T.O,{className:"w-64 h-6 col-span-4 ml-auto"})]})}),(0,t.jsx)(E,{value:null==l?void 0:l.validation_progress})]})]})},ex=e=>{var i,l,n;let{team:d,setIsEdit:c}=e,{isUpdateLoading:u,updateTeam:v}=H(),p=q.z.object({name:q.z.string().optional(),difficulty:q.z.enum(["discovery","sports","expert"]).optional(),meeting_place:q.z.enum(["centrale","bellecour","anyway"]).optional()}),h=(0,Q.cI)({resolver:(0,L.F)(p),mode:"onBlur",defaultValues:{name:null!==(i=null==d?void 0:d.name)&&void 0!==i?i:void 0,difficulty:null!==(l=null==d?void 0:d.difficulty)&&void 0!==l?l:void 0,meeting_place:null!==(n=null==d?void 0:d.meeting_place)&&void 0!==n?n:void 0}});return(0,m.createElement)(Q.RV,{...h,key:"Participant"},(0,t.jsx)("form",{onSubmit:h.handleSubmit(function(e){var i;if(!h.formState.isDirty){c(!1);return}v(null!==(i=null==d?void 0:d.id)&&void 0!==i?i:"",()=>{c(!1),(0,o.Am)({title:"\xc9quipe mise \xe0 jour"})},e)}),className:"flex flex-col justify-between h-full",children:(0,t.jsxs)(s.aY,{children:[(0,t.jsx)(ev,{label:"Nom d'\xe9quipe",id:"name",form:h,type:a.STRING}),(0,t.jsx)(ev,{label:"Lieu de rendez-vous",id:"meeting_place",placeholder:"Selectionner un lieu de rendez-vous",form:h,type:a.MEETINGPLACE}),(0,t.jsx)(ev,{label:"Parcours",id:"difficulty",placeholder:"Selectionner un parcours",form:h,type:a.DIFFICULTY}),u?(0,t.jsx)(O.z,{variant:"default",disabled:!0,className:"w-full mt-6",children:(0,t.jsx)(Z.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,t.jsxs)(O.z,{className:"w-full mt-6",type:"submit",disabled:!h.formState.isDirty,children:[(0,t.jsx)(r.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})]})}))};var ef=l(26477),ej=l(39202);let eg=e=>{var i,l,n;let{team:a}=e,[o,d]=(0,m.useState)(!1),{information:c}=(0,eu.u)(),u=null!=c&&!!c.raid_registering_end_date&&(0,ej.pc)(null==c?void 0:c.raid_registering_end_date)>=0;function v(){d(!o)}let p=[{title:"Lieu de rendez-vous",value:(0,er.Jg)(er.xQ,null!==(i=null==a?void 0:a.meeting_place)&&void 0!==i?i:void 0),description:"lieu de d\xe9part et d'arriv\xe9e",unit:(0,t.jsx)(r.k9l,{className:"h-4 w-4"})},{title:"Dates",value:(null==c?void 0:c.raid_start_date)&&(null==c?void 0:c.raid_end_date)?(0,ej._Q)(c.raid_start_date,c.raid_end_date):"Dates non renseign\xe9es",description:"week-end complet",unit:(0,t.jsx)(r.Bge,{className:"h-4 w-4"})},{title:"Inscription",value:"".concat(null==a?void 0:a.validation_progress.toFixed(0),"%"),description:(null==c?void 0:c.raid_registering_end_date)?u?"".concat((0,ej.pc)(null==c?void 0:c.raid_registering_end_date)," jours restants"):"Inscriptions ferm\xe9es":"Date de fin non renseign\xe9e",unit:(0,t.jsx)("span",{children:"%"})},{title:"Parcours",value:(0,er.Jg)(er.n9,null!==(l=null==a?void 0:a.difficulty)&&void 0!==l?l:void 0),description:(0,er.Jg)(er.J1,null!==(n=null==a?void 0:a.difficulty)&&void 0!==n?n:void 0),unit:void 0}];return(0,t.jsx)(s.Zb,{className:"w-full mt-5",children:(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsxs)(s.Ol,{children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,t.jsx)(s.ll,{children:o?(0,t.jsx)("div",{children:"\xc9diter l'\xe9quipe"}):(0,t.jsx)(t.Fragment,{children:(null==a?void 0:a.name)?(0,t.jsx)("div",{children:null==a?void 0:a.name}):(0,t.jsx)(T.O,{className:"w-24 h-8"})})}),o&&a?(0,t.jsxs)(O.z,{variant:"destructive",onClick:v,className:"w-[110px]",children:[(0,t.jsx)(r.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]}):(0,t.jsxs)(O.z,{variant:"outline",onClick:v,className:"w-[110px]",children:[(0,t.jsx)(r.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})]}),(0,t.jsx)("div",{className:"h-4"}),o&&a?(0,t.jsx)(ex,{team:a,setIsEdit:d}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 md:gap-8 lg:grid-cols-4",children:p.map(e=>(0,t.jsx)(ef.L,{info:e,isLoaded:void 0!==a},e.title))})]})})})};var ey=l(55936);let eb=e=>{let{form:i,label:l,id:n,placeholder:a}=e;return(0,t.jsx)(X.Wi,{control:i.control,name:n,render:e=>{let{field:i}=e;return(0,t.jsx)(X.xJ,{children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,t.jsxs)(X.lX,{className:"text-left font-bold",children:[l," :"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(X.NI,{children:(0,t.jsx)(W.I,{placeholder:a,...i})})]})]})})}})};var eN=l(74546),ez=l(86465),e_=l(70402),ew=l(88835);let eS=e=>{let{label:i,value:l}=e;return(0,t.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,t.jsxs)(e_._,{htmlFor:i,className:"font-bold",children:[i," :"]}),i?(0,t.jsx)("span",{id:i,children:l}):(0,t.jsx)(T.O,{className:"w-24 h-6"})]})},eC=e=>{var i;let{me:l,isEdit:n,setIsEdit:a,setIsOpen:s}=e,{refetchTeam:d}=H(),{updateParticipant:c,isUpdateLoading:u}=U(),m=q.z.object({firstname:q.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:q.z.string().min(1,{message:"Veuillez renseigner votre nom"}),email:q.z.string().email({message:"Veuillez renseigner une adresse email valide"}),phone:q.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).min(10,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}).max(14,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}),birthday:q.z.date({required_error:"Veuillez renseigner votre date de naissance",invalid_type_error:"Veuillez renseigner une date de naissance valide"})});function v(e){return e?e.startsWith("0")?"+33 ".concat(e.slice(1)):e:""}let p=(0,Q.cI)({resolver:(0,L.F)(m),defaultValues:{firstname:null==l?void 0:l.firstname,name:null==l?void 0:l.name,email:null==l?void 0:l.email,phone:v(null!==(i=null==l?void 0:l.phone)&&void 0!==i?i:""),birthday:(null==l?void 0:l.birthday)?(0,eN.Q)(null==l?void 0:l.birthday):void 0}});return(0,t.jsx)("div",{className:"h-full",children:(0,t.jsx)(Q.RV,{...p,children:(0,t.jsxs)("form",{onSubmit:p.handleSubmit(function(e){if(!p.formState.isDirty){a(!n);return}let i=(0,ej.uv)(e.birthday);c({...e,birthday:i},l.id,()=>{var i;(0,o.Am)({title:"Profil mis \xe0 jour",description:"Vos informations ont \xe9t\xe9 mises \xe0 jour avec succ\xe8s"}),d(),a(!n),s(!1),p.reset({firstname:null==e?void 0:e.firstname,name:null==e?void 0:e.name,email:null==e?void 0:e.email,phone:v(null!==(i=null==e?void 0:e.phone)&&void 0!==i?i:""),birthday:(null==e?void 0:e.birthday)?(0,eN.Q)(null==e?void 0:e.birthday):void 0})})}),className:"flex flex-col justify-between h-full",children:[(0,t.jsx)("div",{}),n?(0,t.jsxs)("div",{className:"grid w-full items-center gap-6",children:[(0,t.jsx)(eb,{form:p,label:"Pr\xe9nom",id:"firstname",placeholder:"Pr\xe9nom"}),(0,t.jsx)(eb,{form:p,label:"Nom",id:"name",placeholder:"Nom"}),(0,t.jsx)(eb,{form:p,label:"Email",id:"email",placeholder:"inscription@raid.fr"}),(0,t.jsx)(X.Wi,{control:p.control,name:"phone",render:()=>(0,t.jsx)(X.xJ,{children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,t.jsx)(X.lX,{className:"text-left font-bold",children:"T\xe9l\xe9phone :"}),(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(Q.Qr,{name:"phone",control:p.control,render:e=>{let{field:{onChange:i,value:l}}=e;return(0,t.jsx)(ec(),{value:l,onChange:i,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})}),(0,t.jsx)(X.Wi,{control:p.control,name:"birthday",render:e=>{let{field:i}=e;return(0,t.jsx)(X.xJ,{children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,t.jsx)(X.lX,{className:"text-left font-bold",children:"Date de naissance :"}),(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(Q.Qr,{name:"birthday",control:p.control,render:e=>{let{field:{onChange:l,value:n}}=e;return(0,t.jsx)(ew.M,{date:n,setDate:l,defaultDate:n||(0,ez.B)(new Date,-21),...i})}})]})]})})}})]}):(0,t.jsxs)("div",{className:"grid w-full items-center gap-10",children:[(0,t.jsx)(eS,{label:"Pr\xe9nom",value:null==l?void 0:l.firstname}),(0,t.jsx)(eS,{label:"Nom",value:null==l?void 0:l.name}),(0,t.jsx)(eS,{label:"Email",value:null==l?void 0:l.email}),(0,t.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,t.jsx)(e_._,{htmlFor:"phone",className:"font-bold",children:"T\xe9l\xe9phone :"}),(0,t.jsx)(ec(),{value:null==l?void 0:l.phone,country:"fr",specialLabel:"",inputClass:"bg-transparent",disabled:!0})]}),(0,t.jsx)(eS,{label:"Date de naissance",value:(null==l?void 0:l.birthday)?(0,ej.p6)(l.birthday):"Non renseign\xe9"})]}),(0,t.jsx)(ey.FF,{className:"mt-8",children:(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center w-full gap-6",children:[n?(0,t.jsx)(t.Fragment,{children:u?(0,t.jsx)(O.z,{variant:"default",disabled:!0,className:"w-full",children:(0,t.jsx)(Z.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,t.jsxs)(O.z,{className:"w-full",type:"submit",disabled:!p.formState.isDirty,children:[(0,t.jsx)(r.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})}):(0,t.jsx)(t.Fragment,{children:l&&(0,t.jsxs)(O.z,{variant:"outline",onClick:function(){(n&&p.formState.isDirty||!n)&&a(!n)},className:"w-full",children:[(0,t.jsx)(r.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})}),n&&(0,t.jsxs)(O.z,{variant:"destructive",onClick:()=>p.reset(),className:"w-full",children:[(0,t.jsx)(r.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]})]})})]})})})};var eI=l(24729),eF=l(19706),ek=l(60603);let eE=()=>{let{me:e}=U(),{information:i}=(0,eu.u)(),[l,n]=(0,m.useState)(!1),[a,s]=(0,m.useState)(!1);function r(){l&&s(!1),n(!l)}return(0,t.jsx)(eF.nm,{children:(0,t.jsxs)(eF.QP,{children:[(0,t.jsx)(eF.rQ,{children:(null==e?void 0:e.firstname)===void 0||(null==e?void 0:e.name)===void 0?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(T.O,{className:"w-24 h-6"})}):(0,t.jsx)(t.Fragment,{children:e.firstname+" "+e.name})}),(0,t.jsxs)(eF.uE,{children:[(0,t.jsx)(ek.U,{}),(0,t.jsx)(eF.yE,{}),(0,t.jsxs)(ey.yo,{open:l,onOpenChange:r,children:[(0,t.jsx)(ey.aM,{asChild:!0,children:(0,t.jsx)(O.z,{variant:"ghost",className:"px-2 py-1.5 text-sm font-[400] w-full justify-start hover:bg-background",children:"Informations du compte"})}),(0,t.jsxs)(ey.ue,{className:"flex flex-col justify-between",children:[(0,t.jsxs)(ey.Tu,{children:[(0,t.jsx)(ey.bC,{children:"Param\xe8tres"}),(0,t.jsx)(ey.Ei,{children:"Information du compte"})]}),e&&(0,t.jsx)(eC,{me:e,isEdit:a,setIsEdit:s,setIsOpen:r})]})]}),(0,t.jsx)(eF.yE,{}),(0,t.jsx)(eF.N,{onClick:function(){window.open("mailto:".concat(null==i?void 0:i.contact))},children:"Nous contacter"}),(0,t.jsx)(eF.yE,{}),(0,t.jsx)(eI.s,{})]})]})})};var eO=l(87138);let eT=()=>(0,t.jsx)("header",{className:"max-md:sticky top-0 flex h-16 items-center gap-4 border-b bg-background px-4 md:px-6 z-10",children:(0,t.jsxs)("nav",{className:"flex flex-row w-full mx-10 max-md:mx-0 items-center",children:[(0,t.jsx)(eO.default,{href:"#",className:"flex items-center gap-2 font-semibold md:text-base",children:(0,t.jsx)("span",{className:" text-2xl",children:"Inscription Raid 2024"})}),(0,t.jsx)("div",{className:"flex flex-row ml-auto",children:(0,t.jsx)(eE,{})})]})});var eA=l(16463),eV=l(52934),eR=l(40832);let eP=e=>{var i,l;let{user:n,isOpened:a,setIsOpened:s}=e,{createParticipant:r}=U(),{createTeam:d,refetchTeam:c}=H(),{inviteToken:p}=(0,eR.u)(),{joinTeam:h}=u(),[x,f]=(0,m.useState)(!1),j=q.z.object({firstname:q.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:q.z.string().min(1,{message:"Veuillez renseigner votre nom"}),email:q.z.string().email({message:"Veuillez renseigner une adresse email valide"}),phone:q.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).min(10,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}).max(14,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}),birthday:q.z.date({required_error:"Veuillez renseigner votre date de naissance",invalid_type_error:"Veuillez renseigner une date de naissance valide"})}),g=(0,Q.cI)({resolver:(0,L.F)(j),defaultValues:{firstname:n.firstname,name:n.name,email:n.email,phone:(l=null!==(i=null==n?void 0:n.phone)&&void 0!==i?i:"")?l.startsWith("0")?"+33 ".concat(l.slice(1)):l:"",birthday:n.birthday?(0,eN.Q)(n.birthday):void 0}});return(0,t.jsx)(ee.Vq,{open:a,onOpenChange:s,children:(0,t.jsx)(ee.cZ,{className:"sm:max-w-[600px]",hideClose:!0,children:(0,t.jsx)(X.l0,{...g,children:(0,t.jsxs)("form",{onSubmit:g.handleSubmit(function(e){let i=(0,ej.uv)(e.birthday);f(!0),r({...e,birthday:i},()=>{void 0===p?d({name:"\xc9quipe de ".concat(e.firstname," ").concat(e.name)},()=>{c(),s(!1),f(!1),(0,o.Am)({title:"Votre profil a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s"})}):h(p,()=>{c(),s(!1),f(!1),(0,o.Am)({title:"Vous avez rejoint l'\xe9quipe avec succ\xe8s"})})})}),children:[(0,t.jsxs)(ee.fK,{children:[(0,t.jsx)(ee.$N,{children:"Vos informations"}),(0,t.jsx)(ee.Be,{children:"Veuillez renseigner vos information pour pouvoir cr\xe9er une \xe9quipe"})]}),(0,t.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,t.jsx)(eV.l,{form:g,label:"Pr\xe9nom",id:"firstname",placeholder:"Pr\xe9nom"}),(0,t.jsx)(eV.l,{form:g,label:"Nom",id:"name",placeholder:"Nom"}),(0,t.jsx)(eV.l,{form:g,label:"Email",id:"email",placeholder:"inscription@raid.fr"}),(0,t.jsx)(X.Wi,{control:g.control,name:"phone",render:()=>(0,t.jsx)(X.xJ,{children:(0,t.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,t.jsx)(X.lX,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(Q.Qr,{name:"phone",control:g.control,render:e=>{let{field:{onChange:i,value:l}}=e;return(0,t.jsx)(ec(),{value:l,onChange:i,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})}),(0,t.jsx)(X.Wi,{control:g.control,name:"birthday",render:e=>{let{field:i}=e;return(0,t.jsx)(X.xJ,{children:(0,t.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,t.jsx)(X.lX,{className:"text-right",children:"Date de naissance"}),(0,t.jsxs)("div",{className:"col-span-4",children:[(0,t.jsx)(X.zG,{}),(0,t.jsx)(Q.Qr,{name:"birthday",control:g.control,render:e=>{let{field:{onChange:l,value:n}}=e;return(0,t.jsx)(ew.M,{date:n,setDate:l,defaultDate:n||(0,ez.B)(new Date,-21),...i})}})]})]})})}})]}),(0,t.jsx)(ee.cN,{children:(0,t.jsx)(v.f,{isLoading:x,label:"Valider",type:"submit",className:"w-full mt-4"})})]})})})})};var eL=l(13304);let eQ=e=>{let{isOpened:i,setIsOpened:l}=e,{inviteToken:n,resetInviteToken:a}=(0,eR.u)(),{joinTeam:s,isJoinLoading:r}=u(),{refetchTeam:o}=H();function d(){l(!1),a()}return(0,t.jsx)(ee.Vq,{open:i,onOpenChange:l,children:(0,t.jsxs)(ee.cZ,{className:"sm:max-w-[600px]",children:[(0,t.jsx)(ee.fK,{children:(0,t.jsx)(ee.$N,{children:"Rejoindre une \xe9quipe"})}),(0,t.jsx)(eL.Be,{children:"Vous vous appr\xeatez \xe0 rejoindre une \xe9quipe et quitter votre \xe9quipe actuelle. Toutes vos informations seront transf\xe9r\xe9es \xe0 votre nouvelle \xe9quipe."}),(0,t.jsxs)("div",{className:"flex justify-end mt-2 space-x-4",children:[(0,t.jsx)(O.z,{variant:"outline",onClick:d,disabled:r,children:"Annuler"}),(0,t.jsx)(v.f,{isLoading:r,onClick:function(){void 0!==n&&s(n,()=>{o(),d()})},label:"Rejoindre l'\xe9quipe",className:"w-[140px]"})]})]})})};var eq=l(76072);let eB=e=>{let{isOpened:i,setIsOpened:l,title:n,description:a,status:s,callback:o,width:d="w-[100px]"}=e;return(0,t.jsx)(ee.Vq,{open:i,onOpenChange:l,children:(0,t.jsxs)(ee.cZ,{className:"sm:max-w-[600px]",onClick:e=>e.stopPropagation(),children:[(0,t.jsx)(ee.fK,{children:(0,t.jsxs)(ee.$N,{className:"h-20",children:[(0,t.jsx)("div",{className:"mt-16",children:n}),(0,t.jsx)("div",{className:"".concat("SUCCESS"===s?"bg-green-600":"bg-red-600"," w-52 h-52 rounded-full relative -top-52 mx-auto"),children:"SUCCESS"===s?(0,t.jsx)(r.dZ6,{className:"text-white w-32 h-32 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"}):(0,t.jsx)(r.apv,{className:"text-white w-32 h-32 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})]})}),(0,t.jsx)(eL.Be,{children:a}),(0,t.jsx)("div",{className:"flex justify-end mt-2 space-x-4",children:(0,t.jsx)(O.z,{variant:"outline",onClick:function(e){e.stopPropagation(),o(),l(!1)},className:d,children:"Continuer"})})]})})},eG=e=>{let{isOpened:i,setIsOpened:l}=e,[n,a]=(0,m.useState)(!1),{information:s}=(0,eu.u)(),{refetch:r,setDocumentId:d}=(0,em.k)(),c=(0,eA.useRouter)();return s&&(0,t.jsx)(eB,{isOpened:i,setIsOpened:l,title:"Inscription compl\xe8te",description:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{children:"Votre inscription est compl\xe8te."}),(0,t.jsx)("div",{children:"Vous trouverez toutes les informations n\xe9cessaires dans le document \xe0 t\xe9l\xe9charger ci-dessous."}),(0,t.jsx)("div",{children:"Bonne pr\xe9paration et \xe0 tr\xe8s bient\xf4t !"}),(0,t.jsx)(v.f,{className:"w-full mt-6",variant:"outline",onClick:e=>{var i;return i=s.raid_information_id,void(a(!0),d(i),r().then(e=>{let i=e.data;if(!i){(0,o.Am)({title:"Erreur",description:"Impossible de t\xe9l\xe9charger le fichier",variant:"destructive"}),a(!1);return}let l=i.type.split("/")[1],n=window.URL.createObjectURL(new Blob([i])),t=document.createElement("a");t.href=n,t.setAttribute("download","R\xe9glement_du_raid.".concat(l)),document.body.appendChild(t),a(!1),t.click()}))},isLoading:n,label:"T\xe9l\xe9charger le document"})]}),status:"SUCCESS",callback:()=>{l(!1),c.replace("/")}})};var eD=()=>{let{isTokenQueried:e,token:i}=(0,c.a)(),{me:l,isFetched:n,refetch:a}=U(),{me:s,isAdmin:r}=(0,D.a)(),{team:d,createTeam:u,refetchTeam:v,isLoading:h}=H(),[x,f]=(0,m.useState)(!1),[j,g]=(0,m.useState)(!0),y=(0,eA.useSearchParams)(),b=y.get("invite");y.get("checkoutIntentId");let N=y.get("code");y.get("orderId");let{inviteToken:z,setInviteToken:_}=(0,eR.u)(),w=(0,eA.useRouter)(),{information:S}=(0,eu.u)(),[C,I]=(0,m.useState)(!1);if(null!==b&&z!==b&&(_(b),w.replace("/")),e&&null===i&&w.replace("/login"),r()){let e=y.get("redirect");null!==e?w.replace(e):w.replace("/admin")}return n&&void 0===l&&!x&&f(!0),void 0===z||x||f(!0),void 0===l||void 0!==d||x||f(!0),(0,t.jsxs)(t.Fragment,{children:["succeeded"===N&&(0,t.jsx)(eB,{isOpened:j,setIsOpened:g,title:"Paiement effectu\xe9",description:"Votre paiement a \xe9t\xe9 effectu\xe9 avec succ\xe8s. Vous pouvez terminer votre inscription, si ce n'est pas encore le cas.",status:"SUCCESS",callback:()=>{a(),g(!1),w.replace("/")}}),"refused"===N&&(0,t.jsx)(eB,{isOpened:j,setIsOpened:g,title:"Paiement refus\xe9",description:"Votre paiement a \xe9t\xe9 refus\xe9. Vous pouvez r\xe9essayer de payer, si le probl\xe8me persiste, veuillez nous contacter.",status:"ERROR",callback:()=>{g(!1),w.replace("/")}}),(null==d?void 0:d.validation_progress)===100&&(0,t.jsx)(eG,{isOpened:j,setIsOpened:g}),n&&void 0===l&&x&&s&&(0,t.jsx)(t.Fragment,{children:null!=S&&S.raid_registering_end_date&&0>(0,ej.pc)(null==S?void 0:S.raid_registering_end_date)?(0,t.jsx)(eq.Z,{isOpened:j,setIsOpened:g,isLoading:!1,title:"Inscriptions termin\xe9es",description:"Les inscriptions sont termin\xe9es. Si vous ne l'avez pas encore fait, nous vous invitons \xe0 prendre contact avec l'organisation pour conna\xeetre les \xe9tapes \xe0 suivre.",validateLabel:"Continuer",callback:()=>g(!1)}):(0,t.jsx)(eP,{isOpened:x,setIsOpened:f,user:s})}),n&&l&&void 0===d&&!h&&(0,t.jsx)(eq.Z,{isOpened:j,setIsOpened:g,isLoading:C,title:"Aucune \xe9quipe trouv\xe9e",description:"Vous n'\xeates pas encore inscrit dans une \xe9quipe. Vous pouvez en cr\xe9er une. Si vous avez re\xe7u un lien d'invitation, vous pouvez l'utiliser pour rejoindre une \xe9quipe.",validateLabel:"Cr\xe9er une \xe9quipe",width:"w-[140px]",callback:()=>{I(!0),u({name:"\xc9quipe de ".concat(l.firstname," ").concat(l.name)},()=>{v(),g(!1),I(!1),(0,o.Am)({title:"Votre \xe9quipe a \xe9t\xe9 cr\xe9\xe9e avec succ\xe8s"})})}}),void 0!==z&&(0,t.jsx)(eQ,{isOpened:x,setIsOpened:f}),(0,t.jsx)(eT,{}),(0,t.jsxs)("main",{className:"flex flex-col items-center mt-4",children:[(0,t.jsx)("div",{className:"w-full px-10 max-md:px-8",children:(0,t.jsx)(eg,{team:d})}),(0,t.jsxs)("div",{className:"grid lg:grid-cols-2 gap-10 w-full p-10 grid-cols-1 max-lg:p-8 max-lg:gap-8",children:[(0,t.jsx)(eh,{participant:null==d?void 0:d.captain,isCaptain:!0}),(null==d?void 0:d.second)!==null?(0,t.jsx)(eh,{participant:null==d?void 0:d.second,isCaptain:!1}):(0,t.jsx)(p,{team:d})]})]})]})}},26477:function(e,i,l){"use strict";l.d(i,{L:function(){return s}});var n=l(57437),a=l(48185),t=l(2183);let s=e=>{let{info:i,isLoaded:l}=e;return(0,n.jsxs)(a.Zb,{children:[(0,n.jsxs)(a.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(a.ll,{className:"text-sm font-medium",children:l?(0,n.jsx)("span",{children:i.title}):(0,n.jsx)(t.O,{className:"w-24 h-5"})}),i.unit&&(l?i.unit:(0,n.jsx)(t.O,{className:"w-4 h-4 text-muted-foreground"}))]}),(0,n.jsxs)(a.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:l?i.value:(0,n.jsx)(t.O,{className:"w-[150px] h-6"})}),l?(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:i.description}):(0,n.jsx)(t.O,{className:"w-[120px] h-4 mt-1"})]})]},i.title)}}},function(e){e.O(0,[74,310,422,651,756,981,792,547,974,336,128,543,375,425,118,936,877,971,23,744],function(){return e(e.s=26113)}),_N_E=e.O()}]);