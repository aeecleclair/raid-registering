(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4654:function(){},1827:function(e,t,a){Promise.resolve().then(a.bind(a,4056))},1657:function(e,t,a){"use strict";a.d(t,{cn:function(){return l}});var i=a(3167),s=a(1367);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m6)((0,i.W)(t))}},4056:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return t1}});var i,s,l=a(3827),r=a(5671),n=a(9908),o=a(7147),d=a(575),c=a(4642),u=a(568);function m(e){return{fetcherOptions:{},queryOptions:{},queryKeyFn:p}}let p=e=>{let t=x(e)?e.path.split("/").filter(Boolean).map(t=>f(t,e.variables.pathParams)):e.path.split("/").filter(Boolean);return v(e)&&t.push(e.variables.queryParams),h(e)&&t.push(e.variables.body),t},f=(e,t)=>e.startsWith("{")&&e.endsWith("}")?t[e.slice(1,-1)]:e,x=e=>!!e.variables.pathParams,h=e=>!!e.variables.body,v=e=>!!e.variables.queryParams;async function j(e){let{url:t,method:a,body:i,headers:s,pathParams:l,queryParams:r,signal:n}=e;try{var o;let e={"Content-Type":"application/json",...s};e["Content-Type"].toLowerCase().includes("multipart/form-data")&&delete e["Content-Type"];let d=await window.fetch("".concat("https://hyperion-3.dev.eclair.ec-lyon.fr").concat(g(t,r,l)),{signal:n,method:a.toUpperCase(),body:i?i instanceof FormData?i:JSON.stringify(i):void 0,headers:e});if(!d.ok){let e;try{e=await d.json()}catch(t){e={status:"unknown",payload:t instanceof Error?"Unexpected error (".concat(t.message,")"):"Unexpected error"}}throw e}if(null===(o=d.headers.get("content-type"))||void 0===o?void 0:o.includes("json"))return await d.json();return await d.blob()}catch(e){throw{name:"unknown",message:e instanceof Error?"Network error (".concat(e.message,")"):"Network error",stack:e}}}let g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new URLSearchParams(t).toString();return i&&(i="?".concat(i)),e.replace(/\{\w*\}/g,e=>a[e.slice(1,-1)])+i},y=(e,t)=>j({url:"/users/me",method:"get",...e,signal:t}),b=(e,t)=>{let{fetcherOptions:a,queryOptions:i,queryKeyFn:s}=m(t);return c.a({queryKey:s({path:"/users/me",operationId:"readCurrentUserUsersMeGet",variables:e}),queryFn:t=>{let{signal:i}=t;return y({...a,...e},i)},...t,...i})},N=(e,t)=>j({url:"/raid/participants/{participantId}",method:"get",...e,signal:t}),w=(e,t)=>{let{fetcherOptions:a,queryOptions:i,queryKeyFn:s}=m(t);return c.a({queryKey:s({path:"/raid/participants/{participantId}",operationId:"getParticipantByIdRaidParticipantsParticipantIdGet",variables:e}),queryFn:t=>{let{signal:i}=t;return N({...a,...e},i)},...t,...i})},z=(e,t)=>j({url:"/raid/participants/{participantId}",method:"patch",...e,signal:t}),_=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>z({...t,...e}),...e})},S=(e,t)=>j({url:"/raid/participants",method:"post",...e,signal:t}),C=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>S({...t,...e}),...e})},I=(e,t)=>j({url:"/raid/teams",method:"post",...e,signal:t}),k=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>I({...t,...e}),...e})},F=(e,t)=>j({url:"/raid/participants/{participantId}/team",method:"get",...e,signal:t}),T=(e,t)=>{let{fetcherOptions:a,queryOptions:i,queryKeyFn:s}=m(t);return c.a({queryKey:s({path:"/raid/participants/{participantId}/team",operationId:"getTeamByParticipantIdRaidParticipantsParticipantIdTeamGet",variables:e}),queryFn:t=>{let{signal:i}=t;return F({...a,...e},i)},...t,...i})},R=(e,t)=>j({url:"/raid/teams/{teamId}",method:"patch",...e,signal:t}),D=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>R({...t,...e}),...e})},P=(e,t)=>j({url:"/raid/participant/{participantId}/document",method:"post",...e,signal:t}),A=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>P({...t,...e}),...e})},O=(e,t)=>j({url:"/raid/document/{documentId}",method:"get",...e,signal:t}),E=(e,t)=>{let{fetcherOptions:a,queryOptions:i,queryKeyFn:s}=m(t);return c.a({queryKey:s({path:"/raid/document/{documentId}",operationId:"readDocumentRaidDocumentDocumentIdGet",variables:e}),queryFn:t=>{let{signal:i}=t;return O({...a,...e},i)},...t,...i})},L=(e,t)=>j({url:"/raid/security_file/",method:"post",...e,signal:t}),V=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>L({...t,...e}),...e})},B=(e,t)=>j({url:"/raid/participant/{participantId}/security_file",method:"post",...e,signal:t}),U=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>B({...t,...e}),...e})},M=(e,t)=>j({url:"/raid/teams/{teamId}/invite",method:"post",...e,signal:t}),q=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>M({...t,...e}),...e})},Y=(e,t)=>j({url:"/raid/teams/join/{token}",method:"post",...e,signal:t}),G=e=>{let{fetcherOptions:t}=m();return u.D({mutationFn:e=>Y({...t,...e}),...e})};var Z=a(4505);let W=()=>{let{token:e}=(0,Z.u)(),{mutate:t,isPending:a,isSuccess:i}=q({}),{mutate:s,isPending:l,isSuccess:r}=G({});return{createInviteToken:(a,i)=>{t({headers:{Authorization:"Bearer ".concat(e)},pathParams:{teamId:a}},{onSuccess(e,t,a){i(e)}})},isCreationLoading:a,isCreationSuccess:i,joinTeam:(t,a)=>{s({headers:{Authorization:"Bearer ".concat(e)},pathParams:{token:t}},{onSettled:(e,t)=>{console.log(e,t),a()}})},isJoinLoading:l,isJoinSuccess:r}};var H=a(2177),Q=a(9079);let J=e=>{let{team:t}=e,{createInviteToken:a,isCreationLoading:i}=W();return(0,l.jsx)(r.Zb,{className:"w-full",onClick:function(){void 0!==t&&a(t.id,e=>{let t=Q.env.NEXT_PUBLIC_FRONTEND_URL,a="".concat(t,"?invite=").concat(e.token);navigator.clipboard.writeText(a).then(()=>{(0,o.Am)({title:"Invitation envoy\xe9e",description:"Le lien d'invitation a \xe9t\xe9 copi\xe9 dans le presse-papier."})})})},children:(0,l.jsx)(r.aY,{className:"w-full h-full",children:(0,l.jsx)("div",{className:"flex m-auto h-full mt-3",children:(0,l.jsx)(d.z,{variant:"outline",className:"flex m-auto w-[200px]",disabled:i,children:i?(0,l.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.b9W,{className:"inline mr-4"}),(0,l.jsx)("span",{children:"Inviter un participant"})]})})})})})};var X=a(4090),K=a(6969),$=a(9259),ee=a(1657);let et=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(K.fC,{ref:t,className:(0,ee.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...i,children:(0,l.jsx)(K.z$,{className:(0,ee.cn)("flex items-center justify-center text-current"),children:(0,l.jsx)($.Z,{className:"h-4 w-4"})})})});function ea(e){let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,ee.cn)("animate-pulse rounded-md bg-muted",t),...a})}et.displayName=K.fC.displayName;var ei=a(2936),es=a(2235);let el=ei.fC,er=ei.xz,en=ei.h_;ei.x8;let eo=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(ei.aV,{ref:t,className:(0,ee.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...i})});eo.displayName=ei.aV.displayName;let ed=X.forwardRef((e,t)=>{let{className:a,children:i,hideClose:s,...r}=e;return(0,l.jsxs)(en,{children:[(0,l.jsx)(eo,{}),(0,l.jsxs)(ei.VY,{ref:t,className:(0,ee.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[i,!s&&(0,l.jsxs)(ei.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(es.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});ed.displayName=ei.VY.displayName;let ec=e=>{let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,ee.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};ec.displayName="DialogHeader";let eu=e=>{let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,ee.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};eu.displayName="DialogFooter";let em=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(ei.Dx,{ref:t,className:(0,ee.cn)("text-lg font-semibold leading-none tracking-tight",a),...i})});em.displayName=ei.Dx.displayName;let ep=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(ei.dk,{ref:t,className:(0,ee.cn)("text-sm text-muted-foreground",a),...i})});ep.displayName=ei.dk.displayName;var ef=a(7082),ex=a(7908),eh=a(2020),ev=a(5249);let ej=(0,eh.Ue)()((0,ev.mW)((0,ev.tJ)(e=>({documents:["idCard","medicalCertificate","raidRules","studentCard"].reduce((e,t)=>(e[t]={id:void 0,file:void 0},e),{}),setDocument:(t,a,i)=>{e(e=>({documents:{...e.documents,[t]:{id:a,file:i}}}))},setId:(t,a)=>{e(e=>({documents:{...e.documents,[t]:{...e.documents[t],id:a}}}))}}),{name:"raid-documents-storage"}))),eg=()=>{let e=(0,ef.NL)(),{token:t,userId:a}=(0,Z.u)(),{documents:i,setDocument:s,setId:l}=ej(),[r,n]=(0,X.useState)(""),{mutate:o}=A(),{data:d,refetch:c,isPending:u}=E({headers:{Authorization:"Bearer ".concat(t)},pathParams:{documentId:r}},{enabled:""!==r});return{assignDocument:(i,s)=>{o({headers:{Authorization:"Bearer ".concat(t)},pathParams:{participantId:a},body:i},{onSuccess:()=>{e.invalidateQueries({predicate:e=>"getTeamByParticipantId"===e.queryHash}),s()}})},uploadDocument:(a,i,l,r)=>{let n=new FormData;n.append("image",a),ex.Z.post("".concat("https://hyperion-3.dev.eclair.ec-lyon.fr","/raid/document/").concat(l),n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}}).then(()=>{e.invalidateQueries({predicate:e=>"getDocument"===e.queryHash}),s(i,l,a),r()})},getDocument:e=>{var t;return null===(t=i[e])||void 0===t?void 0:t.file},data:d,refetch:c,isLoading:u,setDocumentId:n,isIdSet:""!==r}};var ey=a(703);let eb=e=>{let{documentKey:t,id:a,file:i}=e,{data:s,setDocumentId:r,isIdSet:n}=eg(),{setDocument:o}=ej(),[d,c]=(0,X.useState)(!1);return(null==i?void 0:i.size)!==void 0||n||d||(null==s?void 0:s.size)!==void 0||(c(!0),r(a)),(null==s?void 0:s.size)!==void 0&&d&&(o(t,a,s),r("")),(0,l.jsx)(l.Fragment,{children:(null==i?void 0:i.size)&&(0,l.jsx)(ey.default,{src:URL.createObjectURL(i),alt:t,width:300,height:200,className:"rounded-lg w-auto max-h-[400px]"})})},eN=e=>{let{file:t}=e;return(0,l.jsxs)("div",{className:"flex flex-col justify-between h-full w-full",children:[(0,l.jsx)(ew,{label:"Allergies",value:t.allergy}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ew,{label:"Asthme",value:t.asthma}),t.asthma&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ew,{label:"Passage en soins intensifs",value:t.intensive_care_unit}),t.intensive_care_unit&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(ew,{label:"Date de passage en soins intensifs",value:t.intensive_care_unit_when})})]})]}),(0,l.jsx)(ew,{label:"Traitement en cours",value:t.ongoing_treatment}),(0,l.jsx)(ew,{label:"Maladies",value:t.sicknesses}),(0,l.jsx)(ew,{label:"Hospitalisation",value:t.hospitalization}),(0,l.jsx)(ew,{label:"Op\xe9ration chirurgicale",value:t.surgical_operation}),(0,l.jsx)(ew,{label:"Traumatisme",value:t.trauma}),(0,l.jsx)(ew,{label:"Ant\xe9c\xe9dents familiaux",value:t.family})]})},ew=e=>{let{label:t,value:a}=e,{getDocument:i}=eg(),s=e=>"XS"===e||"S"===e||"M"===e||"L"===e||"XL"===e,r=e=>"boolean"==typeof e,n=e=>null===e,o=e=>"string"==typeof(null==e?void 0:e.type),c=e=>"boolean"==typeof(null==e?void 0:e.asthma),u=e=>"string"==typeof e;return(0,l.jsxs)("div",{className:"flex flex-row w-full justify-between p-2 items-center",children:[(0,l.jsx)("span",{className:"font-semibold w-1/3",children:t}),(e=>{var a;switch(!0){case r(e):return(0,l.jsx)(et,{checked:e});case s(e):return(0,l.jsx)("div",{className:"bg-zinc-200 px-2 rounded-md",children:(0,l.jsx)("span",{children:e})});case o(e):let m=e.type,p=i(m);return(0,l.jsxs)("div",{className:"flex flex-row w-full justify-end items-center h-6",children:[(0,l.jsxs)(el,{children:[(0,l.jsx)(er,{asChild:!0,children:(0,l.jsx)(d.z,{variant:null,className:"col-span-4 px-4 bg-zinc-200 ",children:(0,l.jsx)("div",{className:"flex flex-row items-start w-full",children:(0,l.jsx)("span",{className:"text-gray-500 overflow-hidden",children:null!==(a=e.name)&&void 0!==a?a:"Aucun fichier s\xe9l\xe9ctionn\xe9"})})})}),(0,l.jsxs)(ed,{className:"md:max-w-2xl top-1/2",children:[(0,l.jsx)(ec,{children:(0,l.jsx)(em,{className:"text-red sm:text-lg",children:t})}),(0,l.jsx)("div",{className:"flex flex-col items-center gap-4",children:(0,l.jsx)("span",{className:"text-gray-500 overflow-hidden m-auto",children:(0,l.jsx)(eb,{documentKey:m,id:e.id,file:p})})})]})]}),(0,l.jsx)(et,{checked:e.validated,className:"ml-8"})]});case c(e):return(0,l.jsxs)("div",{className:"flex flex-row w-full justify-end items-center h-6",children:[(0,l.jsxs)(el,{children:[(0,l.jsx)(er,{asChild:!0,children:(0,l.jsx)(d.z,{variant:null,className:"col-span-4 px-4 bg-zinc-200 ",children:(0,l.jsx)("div",{className:"flex flex-row items-start w-full",children:(0,l.jsx)("span",{className:"text-gray-500 overflow-hidden",children:"Fiche s\xe9curit\xe9"})})})}),(0,l.jsxs)(ed,{className:"md:max-w-2xl top-1/2",children:[(0,l.jsx)(ec,{children:(0,l.jsx)(em,{className:"text-red sm:text-lg",children:t})}),(0,l.jsx)("div",{className:"flex flex-col items-center",children:(0,l.jsx)(eN,{file:e})})]})]}),(0,l.jsx)(et,{checked:!0,className:"ml-8"})]});case u(e):return(0,l.jsx)("span",{children:e});case n(e):return(0,l.jsx)("span",{className:"text-zinc-400",children:"Non renseign\xe9"});default:return(0,l.jsx)(ea,{className:"w-24 h-6"})}})(a)]})};var ez=a(7827);let e_=X.forwardRef((e,t)=>{let{className:a,value:i,...s}=e;return(0,l.jsx)(ez.fC,{ref:t,className:(0,ee.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...s,children:(0,l.jsx)(ez.z$,{className:"h-full w-full flex-1 bg-green-700 transition-all",style:{transform:"translateX(-".concat(100-(i||0),"%)")}})})});e_.displayName=ez.fC.displayName;var eS=a(1270),eC=a(2670),eI=a(248),ek=a(5400);let eF=()=>{let{token:e,userId:t}=(0,Z.u)(),a=(0,ef.NL)(),{data:i,isLoading:s,refetch:l}=T({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:t}},{enabled:null!==t,retry:0,queryHash:"getTeamByParticipantId"}),{mutate:r,isSuccess:n,isPending:o}=k({}),{mutate:d,isSuccess:c,isPending:u}=D({});return{team:i,isLoading:s,createTeam:(t,i)=>{r({body:t,headers:{Authorization:"Bearer ".concat(e)}},{onSuccess(e,t,s){a.invalidateQueries({predicate:e=>"getTeamByParticipantId"===e.queryHash}),i()}})},isCreationLoading:o,isCreationSuccess:n,refetchTeam:l,updateTeam:(t,a,i)=>{d({body:i,headers:{Authorization:"Bearer ".concat(e)},pathParams:{teamId:t}},{onSettled:()=>{l(),a()}})},isUpdateLoading:u,isUpdateSuccess:c}},eT=()=>{let{token:e,userId:t}=(0,Z.u)(),a=(0,ef.NL)(),{participant:i,setParticipant:s}=(0,ek.p)(),{refetchTeam:l}=eF(),{data:r,isLoading:n,isFetched:o,refetch:d}=w({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:t}},{enabled:null!==t&&void 0===i,retry:0,queryHash:"getParticipantById"}),{mutate:c,isSuccess:u,isPending:m}=C({}),{mutate:p,isSuccess:f,isPending:x}=_({});return void 0!==r&&i!==r&&null!==e&&s(r),{me:i,isLoading:n,isFetched:o,createParticipant:(t,i)=>{c({body:t,headers:{Authorization:"Bearer ".concat(e)}},{onSuccess:()=>{a.invalidateQueries({predicate:e=>"getParticipantById"===e.queryHash||"getTeamByParticipantId"===e.queryHash}),i()}})},isCreationSuccess:u,isCreationLoading:m,updateParticipant:(a,i)=>{p({body:a,headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:t}},{onSettled:()=>{d(),l(),i()}})},isUpdateSuccess:f,isUpdateLoading:x}};var eR=a(2782),eD=a(553),eP=a(7427);let eA=eP.fC,eO=eP.xz,eE=X.forwardRef((e,t)=>{let{className:a,align:i="center",sideOffset:s=4,...r}=e;return(0,l.jsx)(eP.h_,{children:(0,l.jsx)(eP.VY,{ref:t,align:i,sideOffset:s,className:(0,ee.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});eE.displayName=eP.VY.displayName;var eL=a(3124),eV=a(8670);let eB=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(eL.mY,{ref:t,className:(0,ee.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a),...i})});eB.displayName=eL.mY.displayName;let eU=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,l.jsx)(eV.Z,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,l.jsx)(eL.mY.Input,{ref:t,className:(0,ee.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",a),...i})]})});eU.displayName=eL.mY.Input.displayName,X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(eL.mY.List,{ref:t,className:(0,ee.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...i})}).displayName=eL.mY.List.displayName;let eM=X.forwardRef((e,t)=>(0,l.jsx)(eL.mY.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));eM.displayName=eL.mY.Empty.displayName;let eq=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(eL.mY.Group,{ref:t,className:(0,ee.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",a),...i})});eq.displayName=eL.mY.Group.displayName,X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(eL.mY.Separator,{ref:t,className:(0,ee.cn)("-mx-1 h-px bg-border",a),...i})}).displayName=eL.mY.Separator.displayName;let eY=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(eL.mY.Item,{ref:t,className:(0,ee.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i})});function eG(e){var t;let{values:a,value:i,onChange:s,placeholder:r,isSearchable:n}=e,[o,c]=(0,X.useState)(!1);return(0,l.jsxs)(eA,{open:o,onOpenChange:c,children:[(0,l.jsx)(eO,{asChild:!0,children:(0,l.jsxs)(d.z,{variant:"outline",role:"combobox","aria-expanded":o,className:(0,ee.cn)("w-full justify-between",!i&&"text-muted-foreground"),children:[(0,l.jsx)("span",{children:i?null===(t=a.find(e=>e.value===i))||void 0===t?void 0:t.label:r}),(0,l.jsx)(eD.Z,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,l.jsx)(eE,{className:"w-full p-0",children:(0,l.jsxs)(eB,{children:[n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eU,{placeholder:r}),(0,l.jsx)(eM,{children:"No framework found."})]}),(0,l.jsx)(eq,{children:a.map(e=>(0,l.jsxs)(eY,{value:e.value,onSelect:e=>{s(e),c(!1)},className:"w-full text-left",children:[(0,l.jsx)($.Z,{className:(0,ee.cn)("mr-2 h-4 w-4",i===e.value?"opacity-100":"opacity-0")}),e.label]},e.value))})]})})]})}eY.displayName=eL.mY.Item.displayName;var eZ=a(9143),eW=a(2647);let eH=eC.RV,eQ=X.createContext({}),eJ=e=>{let{...t}=e;return(0,l.jsx)(eQ.Provider,{value:{name:t.name},children:(0,l.jsx)(eC.Qr,{...t})})},eX=()=>{let e=X.useContext(eQ),t=X.useContext(eK),{getFieldState:a,formState:i}=(0,eC.Gc)(),s=a(e.name,i);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...s}},eK=X.createContext({}),e$=X.forwardRef((e,t)=>{let{className:a,...i}=e,s=X.useId();return(0,l.jsx)(eK.Provider,{value:{id:s},children:(0,l.jsx)("div",{ref:t,className:(0,ee.cn)("space-y-2",a),...i})})});e$.displayName="FormItem";let e0=X.forwardRef((e,t)=>{let{className:a,...i}=e,{error:s,formItemId:r}=eX();return(0,l.jsx)(eW._,{ref:t,className:(0,ee.cn)(s&&"text-destructive",a),htmlFor:r,...i})});e0.displayName="FormLabel";let e1=X.forwardRef((e,t)=>{let{...a}=e,{error:i,formItemId:s,formDescriptionId:r,formMessageId:n}=eX();return(0,l.jsx)(eZ.g7,{ref:t,id:s,"aria-describedby":i?"".concat(r," ").concat(n):"".concat(r),"aria-invalid":!!i,...a})});e1.displayName="FormControl",X.forwardRef((e,t)=>{let{className:a,...i}=e,{formDescriptionId:s}=eX();return(0,l.jsx)("p",{ref:t,id:s,className:(0,ee.cn)("text-sm text-muted-foreground",a),...i})}).displayName="FormDescription";let e4=X.forwardRef((e,t)=>{let{className:a,children:i,...s}=e,{error:r,formMessageId:n}=eX(),o=r?String(null==r?void 0:r.message):i;return o?(0,l.jsx)("p",{ref:t,id:n,className:(0,ee.cn)("text-sm font-medium text-destructive",a),...s,children:o}):null});e4.displayName="FormMessage";var e2=a(4739);let e5=e=>{let{setIsOpen:t,onDropAccepted:a,multiple:i=!1,maxSize:s=10485760,accept:r={"image/*":[".jpg",".jpeg",".png"],"application/pdf":[".pdf"]}}=e,[n,o]=(0,X.useState)(!1),[d,c]=(0,X.useState)(""),u=s/1e6,m=Object.values(r).map(e=>e.map(e=>e.replaceAll(".","")).join(", ")).join(", ");return(0,l.jsx)(e2.ZP,{accept:r,onDropAccepted:(e,i)=>{o(!1),t(!1),a(e,i)},onDropRejected:(e,t)=>{e[0].file.size>s?c("Fichier trop lourd (max: ".concat(u,"Mo)")):c("Type de fichier non support\xe9 (support\xe9: ".concat(m,")")),o(!0)},multiple:i,maxSize:s,children:e=>{let{getRootProps:t,getInputProps:a}=e;return(0,l.jsxs)(l.Fragment,{children:[n&&(0,l.jsx)("span",{className:"text-red-600 font-medium",children:d}),(0,l.jsx)("div",{...t({className:(0,ee.cn)("container flex flex-col items-center justify-center w-full h-48 border-2 ".concat(n?"border-red-600":"border-gray-300"," border-dashed rounded-lg cursor-pointer"))}),children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-x-3 mt-2 mb-2",children:[(0,l.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:(0,l.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,l.jsxs)("span",{className:"font-medium text-gray-600",children:["Glissez et d\xe9posez votre fichier ici ou"," ",(0,l.jsx)("span",{className:"text-blue-600 underline",children:"s\xe9lectionnez un fichier"})]})]}),(0,l.jsx)("input",{...a()})]})})]})}})},e6=e=>{let{setIsUploading:t,setIsOpen:a,field:i,id:s}=e,{uploadDocument:r,getDocument:n,data:o,setDocumentId:c,isIdSet:u}=eg(),{setDocument:m}=ej(),[p,f]=(0,X.useState)(!1),x=n(i.value.id),[h,v]=(0,X.useState)(x);return(null==x?void 0:x.size)!==void 0||u||p||(null==o?void 0:o.size)!==void 0||(f(!0),c(i.value.id)),(null==o?void 0:o.size)!==void 0&&p&&(m(s,i.value.id,o),v(o),c("")),(0,l.jsx)(l.Fragment,{children:(null==h?void 0:h.size)!==void 0?(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsx)("span",{className:"text-gray-500 overflow-hidden m-auto",children:(0,l.jsx)(ey.default,{src:URL.createObjectURL(h),alt:i.name,width:300,height:200,className:"rounded-lg w-auto max-h-[400px]"})}),(0,l.jsx)(d.z,{className:"w-full",onClick:()=>{i.onChange(null)},children:"Modifier"})]}):(0,l.jsx)(e5,{setIsOpen:a,onDropAccepted:(e,a)=>{let l=e[0],n=crypto.randomUUID();t(!0),r(l,s,n,()=>{i.onChange({name:l.name,id:n,type:s,updated:!0}),t(!1)})}})})},e3=()=>{let{token:e,userId:t}=(0,Z.u)(),a=(0,ef.NL)(),{mutate:i,isPending:s,isSuccess:l}=V({}),{mutate:r}=U({});return{assignSecurityFile:(t,i,s)=>{r({headers:{Authorization:"Bearer ".concat(e)},pathParams:{participantId:t},queryParams:{security_file_id:i}},{onSuccess(e,t,i){a.invalidateQueries({predicate:e=>"getTeamByParticipantId"===e.queryHash}),s()}})},setSecurityFile:(t,a)=>{i({body:t,headers:{Authorization:"Bearer ".concat(e)}},{onSuccess(e,t,i){a()}})},isCreationLoading:s,isCreationSuccess:l}},e7=e=>{let{setIsOpen:t,form:a}=e,{setSecurityFile:i}=e3();return(0,l.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[(0,l.jsx)(ti,{label:"Allergies",id:"securityFile.allergy",form:a,type:s.STRING}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ti,{label:"Asthme",id:"securityFile.asthma",form:a,type:s.BOOLEAN}),a.watch("securityFile.asthma")&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ti,{label:"Passage en soins intensifs",id:"securityFile.intensive_care_unit",form:a,type:s.BOOLEAN}),a.watch("securityFile.intensive_care_unit")&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(ti,{label:"Date de passage en soins intensifs",id:"securityFile.intensive_care_unit_when",form:a,type:s.STRING})})]})]}),(0,l.jsx)(ti,{label:"Traitement en cours",id:"securityFile.ongoing_treatment",form:a,type:s.STRING}),(0,l.jsx)(ti,{label:"Maladies",id:"securityFile.sicknesses",form:a,type:s.STRING}),(0,l.jsx)(ti,{label:"Hospitalisation",id:"securityFile.hospitalization",form:a,type:s.STRING}),(0,l.jsx)(ti,{label:"Op\xe9ration chirurgicale",id:"securityFile.surgical_operation",form:a,type:s.STRING}),(0,l.jsx)(ti,{label:"Traumatisme",id:"securityFile.trauma",form:a,type:s.STRING}),(0,l.jsx)(ti,{label:"Ant\xe9c\xe9dents familiaux",id:"securityFile.family",form:a,type:s.STRING}),(0,l.jsx)(d.z,{className:"mt-6",type:"button",onClick:function(e){a.setValue("securityFile.updated",!0),void 0===a.getValues("securityFile.id")&&a.setValue("securityFile.id",crypto.randomUUID());let s={...a.getValues("securityFile")};console.log(s),i(s,()=>{}),t(!1)},children:"Valider"})]})},e9=[{value:"centrale",label:"Centrale"},{value:"otherschool",label:"Autre \xe9cole"},{value:"corporatepartner",label:"Partenaire entreprise"},{value:"other",label:"Autre"}],e8=[{value:"discovery",label:"D\xe9couverte"},{value:"sports",label:"Sportif"},{value:"expert",label:"Expert"}],te=[{value:"centrale",label:"Centrale"},{value:"bellecour",label:"Bellecour"},{value:"anyway",label:"Peu importe"}],tt=[{value:"xs",label:"XS"},{value:"s",label:"S"},{value:"m",label:"M"},{value:"l",label:"L"},{value:"xl",label:"XL"}];function ta(e,t){var a;let i=e.find(e=>e.value===t);return null!==(a=null==i?void 0:i.label)&&void 0!==a?a:"Non renseign\xe9"}function ti(e){let{label:t,id:a,placeholder:i,form:s,layer:r,type:o}=e,[c,u]=(0,X.useState)(!1),m=(e,r,n)=>{var m,p,f;switch(o){case"boolean":return(0,l.jsxs)("div",{className:"col-span-4 text-right",children:[(0,l.jsx)(e4,{}),(0,l.jsx)(e1,{children:(0,l.jsx)(et,{checked:e.value,onCheckedChange:e.onChange})})]});case"size":return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"col-span-3"}),(0,l.jsxs)("div",{className:"col-span-1",children:[(0,l.jsx)(e4,{}),(0,l.jsx)(e1,{children:(0,l.jsx)(eG,{values:tt,placeholder:i,...e})})]})]});case"document":return(0,l.jsxs)(el,{open:r,onOpenChange:n,children:[(0,l.jsx)(e4,{}),(0,l.jsx)(er,{asChild:!0,children:(0,l.jsx)(d.z,{variant:"outline",className:"col-span-4",disabled:c,children:(0,l.jsx)("div",{className:"flex flex-row items-start w-full",children:c?(0,l.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"}):(0,l.jsx)(l.Fragment,{children:(null===(m=e.value)||void 0===m?void 0:m.name)?(0,l.jsx)("span",{className:"text-gray-500 overflow-hidden",children:null!==(p=e.value.name)&&void 0!==p?p:"Aucun fichier s\xe9l\xe9ctionn\xe9"}):(0,l.jsx)("span",{className:"font-semibold  mr-6",children:"Choisir un fichier"})})})})}),(0,l.jsxs)(ed,{className:"md:max-w-2xl top-1/2",children:[(0,l.jsx)(ec,{children:(0,l.jsx)(em,{className:"text-red sm:text-lg",children:t})}),(0,l.jsx)(e6,{setIsOpen:n,setIsUploading:u,field:e,id:a})]})]});case"securityFile":return(0,l.jsxs)(el,{open:r,onOpenChange:n,children:[(0,l.jsx)(er,{asChild:!0,children:(0,l.jsx)(d.z,{variant:"outline",className:"col-span-4",children:(0,l.jsx)("div",{className:"flex flex-row items-start w-full",children:(null===(f=e.value)||void 0===f?void 0:f.id)?(0,l.jsx)("span",{className:"text-gray-500 overflow-hidden",children:"Fiche de s\xe9curit\xe9"}):(0,l.jsx)("span",{className:"font-semibold  mr-6",children:"Remplir la fiche de s\xe9curit\xe9"})})})}),(0,l.jsxs)(ed,{className:"md:max-w-3xl top-1/2",children:[(0,l.jsx)(ec,{children:(0,l.jsx)(em,{className:"text-red sm:text-lg",children:t})}),(0,l.jsx)(e7,{setIsOpen:n,form:s})]})]});case"string":return(0,l.jsxs)("div",{className:"col-span-4",children:[(0,l.jsx)(e4,{}),(0,l.jsx)(e1,{children:(0,l.jsx)(eR.I,{placeholder:i,...e})})]});case"situation":return(0,l.jsxs)("div",{className:"col-span-4",children:[(0,l.jsx)(e4,{}),(0,l.jsx)(e1,{children:(0,l.jsx)(eG,{values:e9,placeholder:i,...e})})]});case"difficulty":return(0,l.jsxs)("div",{className:"col-span-4",children:[(0,l.jsx)(e4,{}),(0,l.jsx)(e1,{children:(0,l.jsx)(eG,{values:e8,placeholder:i,...e})})]});case"meetingPlace":return(0,l.jsxs)("div",{className:"col-span-4",children:[(0,l.jsx)(e4,{}),(0,l.jsx)(e1,{children:(0,l.jsx)(eG,{values:te,placeholder:i,...e})})]});default:return(0,l.jsx)(ea,{className:"w-24 h-6"})}},[p,f]=(0,X.useState)(!1);return(0,l.jsx)(eJ,{control:s.control,name:a,render:e=>{let{field:a}=e;return(0,l.jsx)(e$,{children:(0,l.jsxs)("div",{className:"grid p-2 grid-cols-6",children:[(0,l.jsxs)(e0,{className:"font-semibold text-left my-auto text-md col-span-2",children:[r&&(0,l.jsx)(n.WFu,{className:"inline mr-4"}),t]}),m(a,p,f)]})})}})}(i=s||(s={})).STRING="string",i.SIZE="size",i.BOOLEAN="boolean",i.DOCUMENT="document",i.SECURITYFILE="securityFile",i.SITUATION="situation",i.DIFFICULTY="difficulty",i.MEETINGPLACE="meetingPlace";let ts=e=>{var t,a,i,c,u,m,p,f,x,h,v,j,g,y,b,N,w,z,_,S,C,I,k,F,T,R,D,P,A,O,E,L,V,B,U,M,q,Y,G,Z,W,Q,J,K,$,ee;let{me:et,isEdit:ea,setIsEdit:ei}=e,{updateParticipant:es,isUpdateLoading:el}=eT(),{refetchTeam:er}=eF(),{assignDocument:en}=eg(),{assignSecurityFile:eo}=e3(),ed=eI.z.object({address:eI.z.string().min(1,{message:"Veuillez renseigner votre adresse"}).optional(),bikeSize:eI.z.string().refine(e=>["xs","s","m","l","xl"].includes(e),{message:"Veuillez renseigner une taille de v\xe9lo valide"}).optional(),tShirtSize:eI.z.string().refine(e=>["xs","s","m","l","xl"].includes(e),{message:"Veuillez renseigner une taille de t-shirt valide"}).optional(),situation:eI.z.string().optional(),otherSchool:eI.z.string().optional(),company:eI.z.string().optional(),other:eI.z.string().optional(),diet:eI.z.string().optional(),idCard:eI.z.object({name:eI.z.string(),id:eI.z.string().uuid(),updated:eI.z.boolean(),type:eI.z.literal("idCard")}).partial(),medicalCertificate:eI.z.object({name:eI.z.string(),id:eI.z.string().uuid(),updated:eI.z.boolean(),type:eI.z.literal("medicalCertificate")}).partial(),studentCard:eI.z.object({name:eI.z.string(),id:eI.z.string().uuid(),updated:eI.z.boolean(),type:eI.z.literal("studentCard")}).partial(),raidRules:eI.z.object({name:eI.z.string(),id:eI.z.string().uuid(),updated:eI.z.boolean(),type:eI.z.literal("raidRules")}).partial(),securityFile:eI.z.object({allergy:eI.z.string().optional(),asthma:eI.z.boolean(),intensive_care_unit:eI.z.boolean().optional(),intensive_care_unit_when:eI.z.string().optional(),ongoing_treatment:eI.z.string().optional(),sicknesses:eI.z.string().optional(),hospitalization:eI.z.string().optional(),surgical_operation:eI.z.string().optional(),trauma:eI.z.string().optional(),family:eI.z.string().optional(),id:eI.z.string().uuid(),updated:eI.z.boolean()}).partial(),attestationHonour:eI.z.boolean().optional()}),ec=(0,eC.cI)({resolver:(0,eS.F)(ed),mode:"onBlur",defaultValues:{address:null!==(I=et.address)&&void 0!==I?I:void 0,bikeSize:null!==(k=null===(t=et.bike_size)||void 0===t?void 0:t.toLowerCase())&&void 0!==k?k:void 0,tShirtSize:null!==(F=null===(a=et.t_shirt_size)||void 0===a?void 0:a.toLowerCase())&&void 0!==F?F:void 0,situation:"centrale"===et.situation?null!==(T=et.situation)&&void 0!==T?T:void 0:"other",other:"centrale"!==et.situation&&null!==(R=et.situation)&&void 0!==R?R:void 0,diet:null!==(D=et.diet)&&void 0!==D?D:void 0,idCard:{name:null!==(P=null===(i=et.id_card)||void 0===i?void 0:i.name)&&void 0!==P?P:void 0,id:null!==(A=null===(c=et.id_card)||void 0===c?void 0:c.id)&&void 0!==A?A:void 0,type:"idCard"},medicalCertificate:{name:null!==(O=null===(u=et.medical_certificate)||void 0===u?void 0:u.name)&&void 0!==O?O:void 0,id:null!==(E=null===(m=et.medical_certificate)||void 0===m?void 0:m.id)&&void 0!==E?E:void 0,type:"medicalCertificate"},studentCard:{name:null!==(L=null===(p=et.student_card)||void 0===p?void 0:p.name)&&void 0!==L?L:void 0,id:null!==(V=null===(f=et.student_card)||void 0===f?void 0:f.id)&&void 0!==V?V:void 0,type:"studentCard"},raidRules:{name:null!==(B=null===(x=et.raid_rules)||void 0===x?void 0:x.name)&&void 0!==B?B:void 0,id:null!==(U=null===(h=et.raid_rules)||void 0===h?void 0:h.id)&&void 0!==U?U:void 0,type:"raidRules"},securityFile:{allergy:null!==(M=null==et?void 0:null===(v=et.security_file)||void 0===v?void 0:v.allergy)&&void 0!==M?M:void 0,asthma:null!==(q=null==et?void 0:null===(j=et.security_file)||void 0===j?void 0:j.asthma)&&void 0!==q&&q,intensive_care_unit:null!==(Y=null==et?void 0:null===(g=et.security_file)||void 0===g?void 0:g.intensive_care_unit)&&void 0!==Y&&Y,intensive_care_unit_when:null!==(G=null==et?void 0:null===(y=et.security_file)||void 0===y?void 0:y.intensive_care_unit_when)&&void 0!==G?G:void 0,ongoing_treatment:null!==(Z=null==et?void 0:null===(b=et.security_file)||void 0===b?void 0:b.ongoing_treatment)&&void 0!==Z?Z:void 0,sicknesses:null!==(W=null==et?void 0:null===(N=et.security_file)||void 0===N?void 0:N.sicknesses)&&void 0!==W?W:void 0,hospitalization:null!==(Q=null==et?void 0:null===(w=et.security_file)||void 0===w?void 0:w.hospitalization)&&void 0!==Q?Q:void 0,surgical_operation:null!==(J=null==et?void 0:null===(z=et.security_file)||void 0===z?void 0:z.surgical_operation)&&void 0!==J?J:void 0,trauma:null!==(K=null==et?void 0:null===(_=et.security_file)||void 0===_?void 0:_.trauma)&&void 0!==K?K:void 0,family:null!==($=null==et?void 0:null===(S=et.security_file)||void 0===S?void 0:S.family)&&void 0!==$?$:void 0,id:null!==(ee=null==et?void 0:null===(C=et.security_file)||void 0===C?void 0:C.id)&&void 0!==ee?ee:void 0},attestationHonour:et.attestation_on_honour}});return(0,l.jsx)(r.aY,{children:(0,X.createElement)(eC.RV,{...ec,key:"Participant"},(0,l.jsxs)("form",{onSubmit:ec.handleSubmit(function(e){var t,a,i,s,l,r;if(!ec.formState.isDirty){ei(!ea);return}let n=[e.idCard,e.medicalCertificate,e.studentCard,e.raidRules].filter(e=>e.updated);for(let t of(console.log(e),e.securityFile.updated&&eo(et.id,e.securityFile.id,()=>{console.log("Security file updated")}),n))t&&en({id:t.id,name:t.name,type:t.type},()=>{console.log("Document updated: ",t.name)});es({bike_size:null!==(i=null===(t=e.bikeSize)||void 0===t?void 0:t.toUpperCase())&&void 0!==i?i:null,t_shirt_size:null!==(s=null===(a=e.tShirtSize)||void 0===a?void 0:a.toUpperCase())&&void 0!==s?s:null,situation:function(e){switch(e.situation){case"otherschool":return e.otherSchool;case"corporatepartner":return e.company;case"other":return e.other;default:return e.situation}}(e),address:null!==(l=e.address)&&void 0!==l?l:null,diet:null!==(r=e.diet)&&void 0!==r?r:null,attestation_on_honour:e.attestationHonour},()=>{(0,o.Am)({title:"Profil mis \xe0 jour",description:"Vos informations ont \xe9t\xe9 mises \xe0 jour avec succ\xe8s"}),er(),ei(!ea),ec.reset()})}),className:"flex flex-col justify-between h-full ".concat(ea?"":"space-y-4"),children:[ea?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ti,{label:"Addresse",id:"address",form:ec,type:s.STRING}),(0,l.jsx)(ti,{label:"Taille de v\xe9lo",placeholder:"Taille",id:"bikeSize",form:ec,type:s.SIZE}),(0,l.jsx)(ti,{label:"Taille de t-shirt",id:"tShirtSize",placeholder:"Taille",form:ec,type:s.SIZE}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ti,{label:"Situation",id:"situation",form:ec,type:s.SITUATION}),"otherschool"===ec.watch("situation")&&(0,l.jsx)(ti,{label:"Nom de l'\xe9cole",id:"otherSchool",form:ec,type:s.STRING,layer:1}),"corporatepartner"===ec.watch("situation")&&(0,l.jsx)(ti,{label:"Nom de l'entreprise",id:"company",form:ec,type:s.STRING,layer:1}),"other"===ec.watch("situation")&&(0,l.jsx)(ti,{label:"Autre situation",id:"other",form:ec,type:s.STRING,layer:1})]}),(0,l.jsx)(ti,{label:"R\xe9gime alimentaire",id:"diet",form:ec,type:s.STRING}),(0,l.jsx)(ti,{label:"Carte d'identit\xe9",id:"idCard",form:ec,type:s.DOCUMENT}),(0,l.jsx)(ti,{label:"Certificat m\xe9dical",id:"medicalCertificate",form:ec,type:s.DOCUMENT}),(0,l.jsx)(ti,{label:"Fiche de s\xe9curit\xe9",id:"securityFile",form:ec,type:s.SECURITYFILE}),(0,l.jsx)(ti,{label:"Carte \xe9tudiante",id:"studentCard",form:ec,type:s.DOCUMENT}),(0,l.jsx)(ti,{label:"R\xe8glement du raid",id:"raidRules",form:ec,type:s.DOCUMENT}),(0,l.jsx)(ti,{label:"Attestation sur l'honneur",id:"attestationHonour",form:ec,type:s.BOOLEAN})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ew,{label:"Addresse",value:et.address}),(0,l.jsx)(ew,{label:"Taille de v\xe9lo",value:et.bike_size}),(0,l.jsx)(ew,{label:"Taille de t-shirt",value:et.t_shirt_size}),function(){switch(et.situation){case"otherSchool":return(0,l.jsx)(ew,{label:"Situation",value:et.other_school});case"corporatePartner":return(0,l.jsx)(ew,{label:"Situation",value:et.company});case"other":return(0,l.jsx)(ew,{label:"Situation",value:et.situation});default:var e;return(0,l.jsx)(ew,{label:"Situation",value:ta(e9,null!==(e=et.situation)&&void 0!==e?e:void 0)})}}(),(0,l.jsx)(ew,{label:"R\xe9gime alimentaire",value:et.diet}),(0,l.jsx)(ew,{label:"Carte d'identit\xe9",value:et.id_card}),(0,l.jsx)(ew,{label:"Certificat m\xe9dical",value:et.medical_certificate}),(0,l.jsx)(ew,{label:"Fiche de s\xe9curit\xe9",value:et.security_file}),(0,l.jsx)(ew,{label:"Carte \xe9tudiante",value:et.student_card}),(0,l.jsx)(ew,{label:"R\xe8glement du raid",value:et.raid_rules}),(0,l.jsx)(ew,{label:"Attestation sur l'honneur",value:et.attestation_on_honour})]}),ea&&(0,l.jsx)(l.Fragment,{children:el?(0,l.jsx)(d.z,{variant:"default",disabled:!0,className:"w-full mt-6",children:(0,l.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,l.jsxs)(d.z,{className:"w-full mt-6",type:"submit",disabled:!ec.formState.isDirty,children:[(0,l.jsx)(n.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})})]}))})},tl=e=>{let{participant:t,isCaptain:a}=e,[i,s]=(0,X.useState)(!1);function o(){s(!i)}return(0,l.jsxs)(r.Zb,{className:"w-full",children:[(0,l.jsx)(r.Ol,{children:(0,l.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)(r.ll,{children:(null==t?void 0:t.firstname)&&(null==t?void 0:t.firstname)?(null==t?void 0:t.firstname)+" "+(null==t?void 0:t.name):(0,l.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,l.jsx)(ea,{className:"w-24 h-8"}),(0,l.jsx)(ea,{className:"w-24 h-8"})]})}),(0,l.jsx)(r.SZ,{children:a?"Capitaine":"\xa0"})]}),i?(0,l.jsxs)(d.z,{variant:"destructive",onClick:o,className:"w-[110px]",children:[(0,l.jsx)(n.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]}):(0,l.jsxs)(d.z,{variant:"outline",onClick:o,className:"w-[110px]",children:[(0,l.jsx)(n.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})]})}),t&&(0,l.jsx)(ts,{me:t,isEdit:i,setIsEdit:s}),!i&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.eW,{className:"flex flex-col",children:(0,l.jsx)(ew,{label:"Paiement",value:null==t?void 0:t.payment})}),(0,l.jsx)(e_,{value:0})]})]})},tr=e=>{var t,a,i;let{team:c,setIsEdit:u}=e,{isUpdateLoading:m,updateTeam:p}=eF(),f=eI.z.object({name:eI.z.string().optional(),difficulty:eI.z.enum(["discovery","sports","expert"]).optional(),meeting_place:eI.z.enum(["centrale","bellecour","anyway"]).optional()}),x=(0,eC.cI)({resolver:(0,eS.F)(f),mode:"onBlur",defaultValues:{name:null!==(t=null==c?void 0:c.name)&&void 0!==t?t:void 0,difficulty:null!==(a=null==c?void 0:c.difficulty)&&void 0!==a?a:void 0,meeting_place:null!==(i=null==c?void 0:c.meeting_place)&&void 0!==i?i:void 0}});return(0,X.createElement)(eC.RV,{...x,key:"Participant"},(0,l.jsx)("form",{onSubmit:x.handleSubmit(function(e){var t;if(!x.formState.isDirty){u(!1);return}p(null!==(t=null==c?void 0:c.id)&&void 0!==t?t:"",()=>{u(!1),(0,o.Am)({title:"\xc9quipe mise \xe0 jour"})},e)}),className:"flex flex-col justify-between h-full",children:(0,l.jsxs)(r.aY,{children:[(0,l.jsx)(ti,{label:"Nom d'\xe9quipe",id:"name",form:x,type:s.STRING}),(0,l.jsx)(ti,{label:"Lieu de rendez-vous",id:"meeting_place",placeholder:"Selectionner un lieu de rendez-vous",form:x,type:s.MEETINGPLACE}),(0,l.jsx)(ti,{label:"Parcours",id:"difficulty",placeholder:"Selectionner un parcours",form:x,type:s.DIFFICULTY}),m?(0,l.jsx)(d.z,{variant:"default",disabled:!0,className:"w-full mt-6",children:(0,l.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,l.jsxs)(d.z,{className:"w-full mt-6",type:"submit",disabled:!x.formState.isDirty,children:[(0,l.jsx)(n.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})]})}))},tn=e=>{var t,a;let{team:i}=e,[s,o]=(0,X.useState)(!1);function c(){o(!s)}let u=[{title:"Date",value:"06-07 octobre",description:"week-end complet",unit:(0,l.jsx)(n.IAP,{className:"h-4 w-4"})},{title:"Lieu de rendez-vous",value:ta(te,null!==(t=null==i?void 0:i.meeting_place)&&void 0!==t?t:void 0),description:"lieu de d\xe9part et d'arriv\xe9e",unit:(0,l.jsx)(n.REi,{className:"h-4 w-4"})},{title:"Parcours",value:ta(e8,null!==(a=null==i?void 0:i.difficulty)&&void 0!==a?a:void 0),description:"parcours exigeant",unit:(0,l.jsx)(l.Fragment,{})},{title:"Distance",value:"150 km",description:"r\xe9partis sur les deux jours",unit:(0,l.jsx)("div",{children:"km"})},{title:"D\xe9nivel\xe9",value:"2500 m",description:"r\xe9partis sur les deux jours",unit:(0,l.jsx)("div",{children:"m"})},{title:"Inscription",value:"75%",description:"10 jours restants",unit:(0,l.jsx)("div",{children:"%"})}];return(0,l.jsx)(r.Zb,{className:"w-full mt-5",children:(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsxs)(r.Ol,{children:[(0,l.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,l.jsx)(r.ll,{children:s?(0,l.jsx)("div",{children:"\xc9diter l'\xe9quipe"}):(0,l.jsx)(l.Fragment,{children:(null==i?void 0:i.name)?(0,l.jsx)("div",{children:null==i?void 0:i.name}):(0,l.jsx)(ea,{className:"w-24 h-8"})})}),s&&i?(0,l.jsxs)(d.z,{variant:"destructive",onClick:c,className:"w-[110px]",children:[(0,l.jsx)(n.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]}):(0,l.jsxs)(d.z,{variant:"outline",onClick:c,className:"w-[110px]",children:[(0,l.jsx)(n.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})]}),(0,l.jsx)("div",{className:"h-4"}),s&&i?(0,l.jsx)(tr,{team:i,setIsEdit:o}):(0,l.jsx)("div",{className:"flex flex-wrap gap-4",children:u.map(e=>(0,l.jsx)(r.Zb,{className:"w-[220px]",children:(0,l.jsxs)(r.aY,{className:"mt-4",children:[(0,l.jsx)(r.SZ,{children:(0,l.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,l.jsx)("div",{className:"text-l font-bold",children:e.title}),e.unit]})}),(0,l.jsx)("div",{className:"h-3"}),(0,l.jsx)(r.ll,{children:e.value}),(0,l.jsx)(r.SZ,{children:e.description})]})},e.title))})]})})})};var to=a(7742);let td=ei.fC,tc=ei.xz,tu=ei.x8,tm=ei.h_,tp=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(ei.aV,{className:(0,ee.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...i,ref:t})});tp.displayName=ei.aV.displayName;let tf=(0,to.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),tx=X.forwardRef((e,t)=>{let{side:a="right",className:i,children:s,...r}=e;return(0,l.jsxs)(tm,{children:[(0,l.jsx)(tp,{}),(0,l.jsxs)(ei.VY,{ref:t,className:(0,ee.cn)(tf({side:a}),i),...r,children:[s,(0,l.jsxs)(ei.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,l.jsx)(es.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});tx.displayName=ei.VY.displayName;let th=e=>{let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,ee.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};th.displayName="SheetHeader";let tv=e=>{let{className:t,...a}=e;return(0,l.jsx)("div",{className:(0,ee.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};tv.displayName="SheetFooter";let tj=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(ei.Dx,{ref:t,className:(0,ee.cn)("text-lg font-semibold text-foreground",a),...i})});tj.displayName=ei.Dx.displayName;let tg=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(ei.dk,{ref:t,className:(0,ee.cn)("text-sm text-muted-foreground",a),...i})});tg.displayName=ei.dk.displayName;let ty=e=>{let{form:t,label:a,id:i,placeholder:s}=e;return(0,l.jsx)(eJ,{control:t.control,name:i,render:e=>{let{field:t}=e;return(0,l.jsx)(e$,{children:(0,l.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,l.jsxs)(e0,{className:"text-left font-bold",children:[a," :"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(e4,{}),(0,l.jsx)(e1,{children:(0,l.jsx)(eR.I,{placeholder:s,...t})})]})]})})}})};var tb=a(2328),tN=a(230),tw=a(5890),tz=a(1205),t_=a(167),tS=a.n(t_),tC=a(7307),tI=a(9108),tk=a(7805),tF=a(6463),tT=a(3180),tR=a(3441),tD=a(5159);let tP=tT.fC;tT.ZA,tT.B4;let tA=X.forwardRef((e,t)=>{let{className:a,children:i,...s}=e;return(0,l.jsxs)(tT.xz,{ref:t,className:(0,ee.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...s,children:[i,(0,l.jsx)(tT.JO,{asChild:!0,children:(0,l.jsx)(tR.Z,{className:"h-4 w-4 opacity-50"})})]})});tA.displayName=tT.xz.displayName;let tO=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(tT.u_,{ref:t,className:(0,ee.cn)("flex cursor-default items-center justify-center py-1",a),...i,children:(0,l.jsx)(tD.Z,{className:"h-4 w-4"})})});tO.displayName=tT.u_.displayName;let tE=X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(tT.$G,{ref:t,className:(0,ee.cn)("flex cursor-default items-center justify-center py-1",a),...i,children:(0,l.jsx)(tR.Z,{className:"h-4 w-4"})})});tE.displayName=tT.$G.displayName;let tL=X.forwardRef((e,t)=>{let{className:a,children:i,position:s="popper",...r}=e;return(0,l.jsx)(tT.h_,{children:(0,l.jsxs)(tT.VY,{ref:t,className:(0,ee.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:s,...r,children:[(0,l.jsx)(tO,{}),(0,l.jsx)(tT.l_,{className:(0,ee.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,l.jsx)(tE,{})]})})});tL.displayName=tT.VY.displayName,X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(tT.__,{ref:t,className:(0,ee.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...i})}).displayName=tT.__.displayName;let tV=X.forwardRef((e,t)=>{let{className:a,children:i,...s}=e;return(0,l.jsxs)(tT.ck,{ref:t,className:(0,ee.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...s,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(tT.wU,{children:(0,l.jsx)($.Z,{className:"h-4 w-4"})})}),(0,l.jsx)(tT.eT,{children:i})]})});function tB(e){let{className:t,classNames:a,showOutsideDays:i=!0,...s}=e;return(0,l.jsx)(tF._W,{showOutsideDays:i,className:(0,ee.cn)("p-3",t),locale:tz.fr,classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium hidden",nav:"space-x-1 flex items-center",nav_button:(0,ee.cn)((0,d.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,ee.cn)((0,d.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",caption_dropdowns:"flex gap-1 items-center",...a},components:{IconLeft:e=>{let{...t}=e;return(0,l.jsx)(tI.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,l.jsx)(tk.Z,{className:"h-4 w-4"})},Dropdown:e=>{var t,a;let{fromDate:i,fromMonth:s,fromYear:r,toDate:n,toMonth:o,toYear:d}=(0,tF.kD)(),{goToMonth:c,currentMonth:u}=(0,tF.HJ)();if("months"===e.name){let a=Array.from({length:12},(e,t)=>{let a=new Date(0,t);return{value:t.toString(),label:a.toLocaleString("default",{month:"long"})}});return(0,l.jsxs)(tP,{value:null===(t=e.value)||void 0===t?void 0:t.toString(),onValueChange:e=>{let t=new Date(u);t.setMonth(parseInt(e)),c(t)},children:[(0,l.jsx)(tA,{children:(0,tw.WU)(u,"MMM",{locale:tz.fr})}),(0,l.jsx)(tL,{children:a.map(e=>(0,l.jsx)(tV,{value:e.value,children:e.label},e.value))})]})}{let t=r||(null==s?void 0:s.getFullYear())||(null==i?void 0:i.getFullYear()),m=d||(null==o?void 0:o.getFullYear())||(null==n?void 0:n.getFullYear());if(!t||!m)return(0,l.jsx)(l.Fragment,{});{let i=Array.from({length:m-t+1},(e,a)=>{let i=t+a;return{value:i.toString(),label:i.toString()}});return(0,l.jsxs)(tP,{value:null===(a=e.value)||void 0===a?void 0:a.toString(),onValueChange:e=>{let t=new Date(u);t.setFullYear(parseInt(e)),c(t)},children:[(0,l.jsx)(tA,{children:u.getFullYear()}),(0,l.jsx)(tL,{children:i.map(e=>(0,l.jsx)(tV,{value:e.value,children:e.label},e.value))})]})}}}},...s})}function tU(e){let{date:t,setDate:a,defaultDate:i}=e;return(0,l.jsxs)(eA,{children:[(0,l.jsx)(eO,{asChild:!0,children:(0,l.jsxs)(d.z,{variant:"outline",className:(0,ee.cn)("w-full justify-start text-left font-normal",!t&&"text-muted-foreground"),type:"button",children:[(0,l.jsx)(tC.Z,{className:"mr-2 h-4 w-4"}),t?(0,tw.WU)(t,"PPP",{locale:tz.fr}):(0,l.jsx)("span",{children:"S\xe9lectionner une date"})]})}),(0,l.jsx)(eE,{className:"w-auto p-0",children:(0,l.jsx)(tB,{mode:"single",selected:t,onSelect:a,locale:tz.fr,captionLayout:"dropdown-buttons",fromYear:1900,toDate:new Date,defaultMonth:i,initialFocus:!0})})]})}tV.displayName=tT.ck.displayName,X.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,l.jsx)(tT.Z0,{ref:t,className:(0,ee.cn)("-mx-1 my-1 h-px bg-muted",a),...i})}).displayName=tT.Z0.displayName,tB.displayName="Calendar";let tM=e=>{let{label:t,value:a}=e;return(0,l.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,l.jsxs)(eW._,{htmlFor:t,className:"font-bold",children:[t," :"]}),t?(0,l.jsx)("span",{id:t,children:a}):(0,l.jsx)(ea,{className:"w-24 h-6"})]})};var tq=a(7269),tY=a(1328);let tG=()=>{let{logout:e}=(0,tq.a)(),{setUser:t}=(0,tY.L)(),{setParticipant:a}=(0,ek.p)();return(0,l.jsxs)(d.z,{variant:"destructive",onClick:function(){t(void 0),a(void 0),e()},className:"w-full",children:[(0,l.jsx)(n.ApJ,{className:"mr-2 h-4 w-4"}),"Se d\xe9connecter"]})},tZ=e=>{var t,a;let{me:i,isEdit:s,setIsEdit:r,setIsOpen:c}=e,{updateParticipant:u,isUpdateLoading:m}=eT(),p=eI.z.object({firstname:eI.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:eI.z.string().min(1,{message:"Veuillez renseigner votre nom"}),email:eI.z.string().email({message:"Veuillez renseigner une adresse email valide"}),phone:eI.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).min(11,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}).max(14,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}),birthday:eI.z.date({required_error:"Veuillez renseigner votre date de naissance",invalid_type_error:"Veuillez renseigner une date de naissance valide"})}),f=(0,eC.cI)({resolver:(0,eS.F)(p),defaultValues:{firstname:null==i?void 0:i.firstname,name:null==i?void 0:i.name,email:null==i?void 0:i.email,phone:(a=null!==(t=null==i?void 0:i.phone)&&void 0!==t?t:"")?a.startsWith("0")?"+33 ".concat(a.slice(1)):a:"",birthday:(null==i?void 0:i.birthday)?(0,tb.Q)(null==i?void 0:i.birthday):void 0}});return(0,l.jsx)("div",{className:"h-full",children:(0,l.jsx)(eC.RV,{...f,children:(0,l.jsxs)("form",{onSubmit:f.handleSubmit(function(e){if(!f.formState.isDirty){r(!s);return}let t=e.birthday.toISOString().split("T")[0];u({...e,birthday:t},()=>{(0,o.Am)({title:"Profil mis \xe0 jour",description:"Vos informations ont \xe9t\xe9 mises \xe0 jour avec succ\xe8s"}),r(!s),c(!1)})}),className:"flex flex-col justify-between h-full",children:[(0,l.jsx)("div",{}),s?(0,l.jsxs)("div",{className:"grid w-full items-center gap-6",children:[(0,l.jsx)(ty,{form:f,label:"Pr\xe9nom",id:"firstname",placeholder:"Pr\xe9nom"}),(0,l.jsx)(ty,{form:f,label:"Nom",id:"name",placeholder:"Nom"}),(0,l.jsx)(ty,{form:f,label:"Email",id:"email",placeholder:"inscription@raid.fr"}),(0,l.jsx)(eJ,{control:f.control,name:"phone",render:()=>(0,l.jsx)(e$,{children:(0,l.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,l.jsx)(e0,{className:"text-left font-bold",children:"T\xe9l\xe9phone :"}),(0,l.jsxs)("div",{className:"col-span-4",children:[(0,l.jsx)(e4,{}),(0,l.jsx)(eC.Qr,{name:"phone",control:f.control,render:e=>{let{field:{onChange:t,value:a}}=e;return(0,l.jsx)(tS(),{value:a,onChange:t,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})}),(0,l.jsx)(eJ,{control:f.control,name:"birthday",render:e=>{let{field:t}=e;return(0,l.jsx)(e$,{children:(0,l.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,l.jsx)(e0,{className:"text-left font-bold",children:"Date de naissance :"}),(0,l.jsxs)("div",{className:"col-span-4",children:[(0,l.jsx)(e4,{}),(0,l.jsx)(eC.Qr,{name:"birthday",control:f.control,render:e=>{let{field:{onChange:a,value:i}}=e;return(0,l.jsx)(tU,{date:i,setDate:a,defaultDate:i||(0,tN.B)(new Date,-21),...t})}})]})]})})}})]}):(0,l.jsxs)("div",{className:"grid w-full items-center gap-10",children:[(0,l.jsx)(tM,{label:"Pr\xe9nom",value:null==i?void 0:i.firstname}),(0,l.jsx)(tM,{label:"Nom",value:null==i?void 0:i.name}),(0,l.jsx)(tM,{label:"Email",value:null==i?void 0:i.email}),(0,l.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,l.jsx)(eW._,{htmlFor:"phone",className:"font-bold",children:"T\xe9l\xe9phone :"}),(0,l.jsx)(tS(),{value:null==i?void 0:i.phone,country:"fr",specialLabel:"",disabled:!0})]}),(0,l.jsx)(tM,{label:"Date de naissance",value:(null==i?void 0:i.birthday)?(0,tw.p6)((0,tb.Q)(i.birthday),"PPP",{locale:tz.fr}):"Non renseign\xe9"})]}),(0,l.jsx)(tv,{className:"mt-8",children:(0,l.jsxs)("div",{className:"flex flex-row justify-between items-center w-full gap-6",children:[s?(0,l.jsx)(l.Fragment,{children:m?(0,l.jsx)(d.z,{variant:"default",disabled:!0,className:"w-full",children:(0,l.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"})}):(0,l.jsxs)(d.z,{className:"w-full",type:"submit",disabled:!f.formState.isDirty,children:[(0,l.jsx)(n.dZ6,{className:"mr-2 h-4 w-4"}),"Enregistrer"]})}):(0,l.jsx)(l.Fragment,{children:i&&(0,l.jsxs)(d.z,{variant:"outline",onClick:function(){(s&&f.formState.isDirty||!s)&&r(!s)},className:"w-full",children:[(0,l.jsx)(n.LsQ,{className:"mr-2 h-4 w-4"}),"\xc9diter"]})}),s?(0,l.jsxs)(d.z,{variant:"destructive",onClick:()=>f.reset(),className:"w-full",children:[(0,l.jsx)(n.apv,{className:"mr-2 h-4 w-4"}),"Annuler"]}):(0,l.jsx)(tu,{asChild:!0,children:(0,l.jsx)(tG,{})})]})})]})})})},tW=()=>{let{me:e}=eT(),[t,a]=(0,X.useState)(!1),[i,s]=(0,X.useState)(!1);function r(){t&&s(!1),a(!t)}return(0,l.jsxs)(td,{open:t,onOpenChange:r,children:[(0,l.jsx)(tc,{asChild:!0,children:(0,l.jsx)(d.z,{variant:"ghost",children:(null==e?void 0:e.firstname)===void 0||(null==e?void 0:e.name)===void 0?(0,l.jsx)(ea,{className:"w-24 h-6"}):(0,l.jsx)(l.Fragment,{children:e.firstname+" "+e.name})})}),(0,l.jsxs)(tx,{className:"flex flex-col justify-between",children:[(0,l.jsxs)(th,{children:[(0,l.jsx)(tj,{children:"Param\xe8tres"}),(0,l.jsx)(tg,{children:"Information du compte"})]}),e?(0,l.jsx)(tZ,{me:e,isEdit:i,setIsEdit:s,setIsOpen:r}):(0,l.jsx)(tv,{children:(0,l.jsxs)("div",{className:"flex flex-row justify-between items-center w-full gap-6",children:[(0,l.jsx)("div",{className:"w-full"}),(0,l.jsx)(tu,{asChild:!0,children:(0,l.jsx)(tG,{})})]})})]})]})},tH=()=>{let[e,t]=(0,X.useState)(!1);return(0,l.jsx)("div",{className:"px-4 py-5 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8",children:(0,l.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,l.jsxs)("a",{href:"/","aria-label":"Company",title:"Company",className:"inline-flex items-center",children:[(0,l.jsxs)("svg",{className:"w-8 text-deep-purple-accent-400",viewBox:"0 0 24 24",strokeLinejoin:"round",strokeWidth:"2",strokeLinecap:"round",strokeMiterlimit:"10",stroke:"currentColor",fill:"none",children:[(0,l.jsx)("rect",{x:"3",y:"1",width:"7",height:"12"}),(0,l.jsx)("rect",{x:"3",y:"17",width:"7",height:"6"}),(0,l.jsx)("rect",{x:"14",y:"1",width:"7",height:"6"}),(0,l.jsx)("rect",{x:"14",y:"11",width:"7",height:"12"})]}),(0,l.jsx)("span",{className:"ml-2 text-xl font-bold tracking-wide text-zinc-700 uppercase",children:"Inscription Raid 2024"})]}),(0,l.jsx)("div",{className:"items-center hidden space-x-8 lg:flex",children:(0,l.jsx)(tW,{})}),(0,l.jsxs)("div",{className:"lg:hidden",children:[(0,l.jsx)("button",{"aria-label":"Open Menu",title:"Open Menu",className:"p-2 -mr-1 transition duration-200 rounded focus:outline-none focus:shadow-outline hover:bg-deep-purple-50 focus:bg-deep-purple-50",onClick:()=>t(!0),children:(0,l.jsxs)("svg",{className:"w-5 text-zinc-600",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{fill:"currentColor",d:"M23,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h22c0.6,0,1,0.4,1,1S23.6,13,23,13z"}),(0,l.jsx)("path",{fill:"currentColor",d:"M23,6H1C0.4,6,0,5.6,0,5s0.4-1,1-1h22c0.6,0,1,0.4,1,1S23.6,6,23,6z"}),(0,l.jsx)("path",{fill:"currentColor",d:"M23,20H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h22c0.6,0,1,0.4,1,1S23.6,20,23,20z"})]})}),e&&(0,l.jsx)("div",{className:"absolute top-0 left-0 w-full",children:(0,l.jsxs)("div",{className:"p-5 bg-white border rounded shadow-sm",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("div",{children:(0,l.jsxs)("a",{href:"/","aria-label":"Company",title:"Company",className:"inline-flex items-center",children:[(0,l.jsxs)("svg",{className:"w-8 text-deep-purple-accent-400",viewBox:"0 0 24 24",strokeLinejoin:"round",strokeWidth:"2",strokeLinecap:"round",strokeMiterlimit:"10",stroke:"currentColor",fill:"none",children:[(0,l.jsx)("rect",{x:"3",y:"1",width:"7",height:"12"}),(0,l.jsx)("rect",{x:"3",y:"17",width:"7",height:"6"}),(0,l.jsx)("rect",{x:"14",y:"1",width:"7",height:"6"}),(0,l.jsx)("rect",{x:"14",y:"11",width:"7",height:"12"})]}),(0,l.jsx)("span",{className:"ml-2 text-xl font-bold tracking-wide text-zinc-800 uppercase",children:"Inscription Raid 2024"})]})}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{"aria-label":"Close Menu",title:"Close Menu",className:"p-2 -mt-2 -mr-2 transition duration-200 rounded hover:bg-zinc-200 focus:bg-zinc-200 focus:outline-none focus:shadow-outline",onClick:()=>t(!1),children:(0,l.jsx)("svg",{className:"w-5 text-zinc-600",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{fill:"currentColor",d:"M19.7,4.3c-0.4-0.4-1-0.4-1.4,0L12,10.6L5.7,4.3c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l6.3,6.3l-6.3,6.3 c-0.4,0.4-0.4,1,0,1.4C4.5,19.9,4.7,20,5,20s0.5-0.1,0.7-0.3l6.3-6.3l6.3,6.3c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3 c0.4-0.4,0.4-1,0-1.4L13.4,12l6.3-6.3C20.1,5.3,20.1,4.7,19.7,4.3z"})})})})]}),(0,l.jsx)(tW,{})]})})]})]})})};var tQ=a(7907);let tJ=e=>{let{form:t,label:a,id:i,placeholder:s}=e;return(0,l.jsx)(eJ,{control:t.control,name:i,render:e=>{let{field:t}=e;return(0,l.jsx)(e$,{children:(0,l.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,l.jsx)(e0,{className:"text-right",children:a}),(0,l.jsxs)("div",{className:"col-span-4",children:[(0,l.jsx)(e4,{}),(0,l.jsx)(e1,{children:(0,l.jsx)(eR.I,{placeholder:s,...t})})]})]})})}})};var tX=a(7456);let tK=e=>{var t,a;let{user:i,isOpened:s,setIsOpened:r}=e,{createParticipant:n}=eT(),{createTeam:c,refetchTeam:u}=eF(),{inviteToken:m}=(0,tX.u)(),[p,f]=(0,X.useState)(!1),x=eI.z.object({firstname:eI.z.string().min(1,{message:"Veuillez renseigner votre pr\xe9nom"}),name:eI.z.string().min(1,{message:"Veuillez renseigner votre nom"}),email:eI.z.string().email({message:"Veuillez renseigner une adresse email valide"}),phone:eI.z.string({required_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone",invalid_type_error:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone"}).min(11,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}).max(14,{message:"Veuillez renseigner un num\xe9ro de t\xe9l\xe9phone valide"}),birthday:eI.z.date({required_error:"Veuillez renseigner votre date de naissance",invalid_type_error:"Veuillez renseigner une date de naissance valide"})}),h=(0,eC.cI)({resolver:(0,eS.F)(x),defaultValues:{firstname:i.firstname,name:i.name,email:i.email,phone:(a=null!==(t=null==i?void 0:i.phone)&&void 0!==t?t:"")?a.startsWith("0")?"+33 ".concat(a.slice(1)):a:"",birthday:i.birthday?(0,tb.Q)(i.birthday):void 0}});return(0,l.jsx)(el,{open:s,onOpenChange:r,children:(0,l.jsx)(ed,{className:"sm:max-w-[600px]",hideClose:!0,children:(0,l.jsx)(eH,{...h,children:(0,l.jsxs)("form",{onSubmit:h.handleSubmit(function(e){let t=e.birthday.toISOString().split("T")[0];f(!0),n({...e,birthday:t},()=>{void 0===m?c({name:"\xc9quipe de ".concat(e.firstname," ").concat(e.name)},()=>{u(),r(!1),f(!1),(0,o.Am)({title:"Votre profil a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s"})}):console.log("join Team")})}),children:[(0,l.jsxs)(ec,{children:[(0,l.jsx)(em,{children:"Informations personnelles"}),(0,l.jsx)(ep,{children:"Veuillez renseigner vos information pour pouvoir cr\xe9er une \xe9quipe"})]}),(0,l.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,l.jsx)(tJ,{form:h,label:"Pr\xe9nom",id:"firstname",placeholder:"Pr\xe9nom"}),(0,l.jsx)(tJ,{form:h,label:"Nom",id:"name",placeholder:"Nom"}),(0,l.jsx)(tJ,{form:h,label:"Email",id:"email",placeholder:"inscription@raid.fr"}),(0,l.jsx)(eJ,{control:h.control,name:"phone",render:()=>(0,l.jsx)(e$,{children:(0,l.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,l.jsx)(e0,{className:"text-right",children:"T\xe9l\xe9phone"}),(0,l.jsxs)("div",{className:"col-span-4",children:[(0,l.jsx)(e4,{}),(0,l.jsx)(eC.Qr,{name:"phone",control:h.control,render:e=>{let{field:{onChange:t,value:a}}=e;return(0,l.jsx)(tS(),{value:a,onChange:t,country:"fr",specialLabel:"",placeholder:"+33 6 06 06 06 06",inputClass:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",dropdownClass:"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2"})}})]})]})})}),(0,l.jsx)(eJ,{control:h.control,name:"birthday",render:e=>{let{field:t}=e;return(0,l.jsx)(e$,{children:(0,l.jsxs)("div",{className:"grid grid-cols-5 items-center gap-4",children:[(0,l.jsx)(e0,{className:"text-right",children:"Date de naissance"}),(0,l.jsxs)("div",{className:"col-span-4",children:[(0,l.jsx)(e4,{}),(0,l.jsx)(eC.Qr,{name:"birthday",control:h.control,render:e=>{let{field:{onChange:a,value:i}}=e;return(0,l.jsx)(tU,{date:i,setDate:a,defaultDate:i||(0,tN.B)(new Date,-21),...t})}})]})]})})}})]}),(0,l.jsx)(eu,{children:(0,l.jsx)(d.z,{type:"submit",className:"w-full mt-4",children:p?(0,l.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"}):"Valider"})})]})})})})},t$=()=>{let{token:e}=(0,Z.u)(),{user:t,setUser:a}=(0,tY.L)(),{data:i,isLoading:s}=b({headers:{Authorization:"Bearer ".concat(e)}},{enabled:null!==e&&void 0===t,retry:0});return void 0!==i&&void 0===t&&null!==e&&a(i),{me:t,isLoading:s}},t0=e=>{let{isOpened:t,setIsOpened:a}=e,{inviteToken:i,resetInviteToken:s}=(0,tX.u)(),{joinTeam:r,isJoinLoading:n}=W(),{refetchTeam:o}=eF();function c(){a(!1),s()}return(0,l.jsx)(el,{open:t,onOpenChange:a,children:(0,l.jsxs)(ed,{className:"sm:max-w-[600px]",children:[(0,l.jsx)(ec,{children:(0,l.jsx)(em,{children:"Rejoindre une \xe9quipe"})}),(0,l.jsx)(ei.Be,{children:"Vous vous appr\xeatez \xe0 rejoindre une \xe9quipe et quitter votre \xe9quipe actuelle. Toutes vos informations seront transf\xe9r\xe9es \xe0 votre nouvelle \xe9quipe."}),(0,l.jsxs)("div",{className:"flex justify-end mt-2 space-x-4",children:[(0,l.jsx)(d.z,{variant:"outline",onClick:c,children:"Annuler"}),(0,l.jsx)(d.z,{onClick:function(){void 0!==i&&r(i,()=>{o(),c()})},disabled:n,className:"w-[140px]",children:n?(0,l.jsx)(H.BGW,{className:"mr-2 h-4 w-4 animate-spin"}):"Rejoindre l'\xe9quipe"})]})]})})};var t1=()=>{let{isTokenQueried:e,token:t}=(0,tq.a)(),{me:a,isFetched:i}=eT(),{me:s}=t$(),{team:r}=eF(),[n,o]=(0,X.useState)(!1),d=(0,tQ.useSearchParams)().get("invite"),{inviteToken:c,setInviteToken:u}=(0,tX.u)(),m=(0,tQ.useRouter)();return null!==d&&c!==d&&(u(d),m.replace("/")),e&&null===t&&m.replace("/login"),i&&void 0===a&&!n&&o(!0),void 0===c||n||o(!0),(0,l.jsxs)(l.Fragment,{children:[i&&void 0===a&&n&&s&&(0,l.jsx)(tK,{isOpened:n,setIsOpened:o,user:s}),void 0!==c&&(0,l.jsx)(t0,{isOpened:n,setIsOpened:o}),(0,l.jsx)(tH,{}),(0,l.jsxs)("main",{className:"flex flex-col items-center",children:[(0,l.jsx)("div",{className:"w-full px-16",children:(0,l.jsx)(tn,{team:r})}),(0,l.jsx)("div",{className:"grid md:grid-cols-2 gap-16 w-full p-16 grid-cols-1",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(tl,{participant:null==r?void 0:r.captain,isCaptain:!0}),(null==r?void 0:r.second)&&(null==r?void 0:r.second)!==null?(0,l.jsx)(tl,{participant:null==r?void 0:r.second,isCaptain:!1}):(0,l.jsx)(J,{team:r})]})})]})]})}},575:function(e,t,a){"use strict";a.d(t,{d:function(){return o},z:function(){return d}});var i=a(3827),s=a(4090),l=a(9143),r=a(7742),n=a(1657);let o=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-red-700 text-destructive-foreground hover:bg-red-700/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:r,asChild:d=!1,...c}=e,u=d?l.g7:"button";return(0,i.jsx)(u,{className:(0,n.cn)(o({variant:s,size:r,className:a})),ref:t,...c})});d.displayName="Button"},5671:function(e,t,a){"use strict";a.d(t,{Ol:function(){return n},SZ:function(){return d},Zb:function(){return r},aY:function(){return c},eW:function(){return u},ll:function(){return o}});var i=a(3827),s=a(4090),l=a(1657);let r=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});r.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});n.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})});u.displayName="CardFooter"},2782:function(e,t,a){"use strict";a.d(t,{I:function(){return r}});var i=a(3827),s=a(4090),l=a(1657);let r=s.forwardRef((e,t)=>{let{className:a,type:s,...r}=e;return(0,i.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});r.displayName="Input"},2647:function(e,t,a){"use strict";a.d(t,{_:function(){return d}});var i=a(3827),s=a(4090),l=a(4602),r=a(7742),n=a(1657);let o=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)(l.f,{ref:t,className:(0,n.cn)(o(),a),...s})});d.displayName=l.f.displayName},7147:function(e,t,a){"use strict";a.d(t,{Am:function(){return u},pm:function(){return m}});var i=a(4090);let s=0,l=new Map,r=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?r(a):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=n(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||i()}}}),{id:a,dismiss:i,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=i.useState(d);return i.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7269:function(e,t,a){"use strict";a.d(t,{a:function(){return v}});var i=a(4090),s=a(7908),l=a(3374),r=a(4642),n=a(4505),o=a(7907),d=a(1328),c=a(5400),u=a(7456),m=a(9079);let p="Titan",f=m.env.NEXT_PUBLIC_REDIRECT_URL||"https://myecl.fr/static.html",x="https://hyperion-3.dev.eclair.ec-lyon.fr",h=["API"],v=()=>{let[e,t]=(0,i.useState)(!1),{token:a,setToken:m,refreshToken:v,setRefreshToken:j}=(0,n.u)(),{resetUser:g}=(0,d.L)(),{resetParticipant:y}=(0,c.p)(),{resetInviteToken:b}=(0,u.u)(),[N,w]=(0,i.useState)(!1),z=(0,o.useRouter)();async function _(e){let t=new TextEncoder().encode(e);return await crypto.subtle.digest("SHA-256",t).then(e=>btoa(Array.from(new Uint8Array(e)).map(e=>String.fromCharCode(e)).join("")).replace(/\+/g,"-").replace(/\//g,"_"))}async function S(e){let a=(0,l.stringify)(e),i=await s.Z.post("".concat(x,"/auth/token"),a,{headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}});if(200!=i.status){t(!1);return}let r=i.data;t(!1),m(r.access_token),j(r.refresh_token)}async function C(){return(console.log("refreshing tokens"),v)?(await S({grant_type:"refresh_token",client_id:p,refresh_token:v}),v):null}function I(){return!!a&&(a?JSON.parse(atob(a.split(".")[1])).exp:0)<Math.floor(Date.now()/1e3)}async function k(e){let a=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=a.length,s=crypto.getRandomValues(new Uint8Array(e)),l=0;l<e;l++)t+=a.charAt(Math.floor(s[l]/e*i));return t}(128),i="".concat(x,"/auth/authorize?client_id=").concat(p,"&response_type=code&scope=").concat(h.join(" "),"&redirect_uri=").concat(f,"&code_challenge=").concat(await _(a),"&code_challenge_method=S256");t(!0);let s=window.outerHeight/2+window.screenY-450,l=window.outerWidth/2+window.screenX-400;e=window.open(i,"Hyperion","height=".concat(900,",width=").concat(800,",top=").concat(s,",left=").concat(l,",scrollbars=yes"));let r=setInterval(()=>{try{e&&e.closed&&(clearInterval(r),t(!1))}catch(e){console.error(e)}},1e3);window.addEventListener("message",t=>{let i=t.data;null!=i&&null!==new URL(i).searchParams.get("code")&&function(t){let i=new URL(t).searchParams.get("code");e&&(e.close(),e=null),S({grant_type:"authorization_code",client_id:p,code:i,redirect_uri:f,code_verifier:a})}(i)})}async function F(){return t(!0),null!==a?I()?C():(m(a),t(!1)):(t(!1),z.replace("/login")),w(!0),a}return(0,r.a)({queryKey:["getTokenFromStorage"],queryFn:F,retry:0}),(0,r.a)({queryKey:["refreshToken"],queryFn:C,retry:0,enabled:I()}),{getTokenFromRequest:k,isLoading:e,token:a,isTokenQueried:N,logout:function(){m(null),j(null),w(!0),z.replace("/login"),g(),y(),b()}}}},7456:function(e,t,a){"use strict";a.d(t,{u:function(){return l}});var i=a(2020),s=a(5249);let l=(0,i.Ue)()((0,s.mW)((0,s.tJ)(e=>({InviteToken:void 0,setInviteToken:t=>{e({inviteToken:t})},resetInviteToken:()=>{e({inviteToken:void 0})}}),{name:"raid-invite-token-storage"})))},5400:function(e,t,a){"use strict";a.d(t,{p:function(){return l}});var i=a(2020),s=a(5249);let l=(0,i.Ue)()((0,s.mW)((0,s.tJ)(e=>({participant:void 0,setParticipant:t=>{e({participant:t})},resetParticipant:()=>{e({participant:void 0})}}),{name:"raid-participant-storage"})))},4505:function(e,t,a){"use strict";a.d(t,{u:function(){return l}});var i=a(2020),s=a(5249);let l=(0,i.Ue)()((0,s.mW)((0,s.tJ)(e=>({token:null,refreshToken:null,userId:null,setToken:t=>{let a=t?JSON.parse(atob(t.split(".")[1])).sub:null;e({token:t,userId:a})},setRefreshToken:t=>{e({refreshToken:t})}}),{name:"token-storage"})))},1328:function(e,t,a){"use strict";a.d(t,{L:function(){return l}});var i=a(2020),s=a(5249);let l=(0,i.Ue)()((0,s.mW)((0,s.tJ)(e=>({user:void 0,setUser:t=>{e({user:t})},resetUser:()=>{e({user:void 0})}}),{name:"raid-user-storage"})))}},function(e){e.O(0,[310,422,936,470,904,764,905,971,69,744],function(){return e(e.s=1827)}),_N_E=e.O()}]);